"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/pinata";
exports.ids = ["vendor-chunks/pinata"];
exports.modules = {

/***/ "(ssr)/./node_modules/pinata/dist/chunk-ME652TQB.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/pinata/dist/chunk-ME652TQB.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   NetworkError: () => (/* binding */ NetworkError),\n/* harmony export */   PinataError: () => (/* binding */ PinataError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   containsCID: () => (/* binding */ containsCID),\n/* harmony export */   convertToDesiredGateway: () => (/* binding */ convertToDesiredGateway),\n/* harmony export */   formatConfig: () => (/* binding */ formatConfig),\n/* harmony export */   getFileIdFromUrl: () => (/* binding */ getFileIdFromUrl)\n/* harmony export */ });\n// src/utils/custom-errors.ts\nvar PinataError = class extends Error {\n  constructor(message, statusCode, details) {\n    super(message);\n    this.statusCode = statusCode;\n    this.details = details;\n    this.name = \"PinataError\";\n  }\n};\nvar NetworkError = class extends PinataError {\n  constructor(message, statusCode, details) {\n    super(message, statusCode, details);\n    this.name = \"NetworkError\";\n  }\n};\nvar AuthenticationError = class extends PinataError {\n  constructor(message, statusCode, details) {\n    super(message, statusCode, details);\n    this.name = \"AuthenticationError\";\n  }\n};\nvar ValidationError = class extends PinataError {\n  constructor(message, details) {\n    super(message, void 0, details);\n    this.name = \"ValidationError\";\n  }\n};\n\n// src/utils/gateway-tools.ts\nfunction isValidCIDv0(cid) {\n  return /^Qm[1-9A-HJ-NP-Za-km-z]{44}$/.test(cid);\n}\nfunction isValidCIDv1(cid) {\n  return /^b[a-z2-7]{58,}$/.test(cid);\n}\nfunction isCID(str) {\n  str = str.trim();\n  return isValidCIDv0(str) || isValidCIDv1(str);\n}\nasync function containsCID(input) {\n  if (typeof input !== \"string\") {\n    throw new Error(\"Input is not a string\");\n  }\n  const startsWithCID = (str) => {\n    const parts = str.split(\"/\");\n    return isCID(parts[0]) ? parts[0] : null;\n  };\n  const directCID = startsWithCID(input);\n  if (directCID) {\n    return {\n      containsCid: true,\n      cid: directCID\n    };\n  }\n  let url;\n  try {\n    url = new URL(input);\n  } catch (error) {\n    const parts = input.split(/\\/|\\?/);\n    for (const part of parts) {\n      const cid = startsWithCID(part);\n      if (cid) {\n        return {\n          containsCid: true,\n          cid\n        };\n      }\n    }\n    return {\n      containsCid: false,\n      cid: null\n    };\n  }\n  const subdomains = url.hostname.split(\".\");\n  for (const subdomain of subdomains) {\n    if (isCID(subdomain)) {\n      return {\n        containsCid: true,\n        cid: subdomain\n      };\n    }\n  }\n  const pathParts = url.pathname.split(\"/\");\n  for (const part of pathParts) {\n    const cid = startsWithCID(part);\n    if (cid) {\n      return {\n        containsCid: true,\n        cid\n      };\n    }\n  }\n  return {\n    containsCid: false,\n    cid: null\n  };\n}\nasync function convertToDesiredGateway(sourceUrl, desiredGatewayPrefix) {\n  const results = await containsCID(sourceUrl);\n  if (results.containsCid !== true) {\n    throw new Error(\"url does not contain CID\");\n  }\n  if (!sourceUrl.startsWith(\"https\") && !sourceUrl.startsWith(\"ipfs://\")) {\n    return `${desiredGatewayPrefix}/ipfs/${sourceUrl}`;\n  }\n  const urlObj = new URL(sourceUrl);\n  const path = urlObj.pathname + urlObj.search + urlObj.hash;\n  if (sourceUrl.startsWith(`ipfs://${results.cid}`)) {\n    return `${desiredGatewayPrefix}/ipfs/${results.cid}${path}`;\n  }\n  if (sourceUrl.includes(`/ipfs/${results.cid}`)) {\n    return `${desiredGatewayPrefix}${path}`;\n  }\n  if (sourceUrl.includes(`/ipns/${results.cid}`)) {\n    return `${desiredGatewayPrefix}${path}`;\n  }\n  if (urlObj.hostname.includes(results.cid)) {\n    return `${desiredGatewayPrefix}/ipfs/${results.cid}${path}`;\n  }\n  throw new Error(\n    \"unsupported URL pattern, please submit a github issue with the URL utilized\"\n  );\n}\n\n// src/utils/resumable.ts\nfunction getFileIdFromUrl(url) {\n  const match = url.match(/\\/files\\/([^\\/]+)/);\n  if (match && match[1]) {\n    return match[1];\n  }\n  throw new NetworkError(\"File ID not found in URL\", 400, {\n    error: \"File ID not found in URL\",\n    code: \"HTTP_ERROR\",\n    metadata: {\n      requestUrl: url\n    }\n  });\n}\n\n// src/utils/format-config.ts\nvar formatConfig = (config) => {\n  let gateway = config?.pinataGateway;\n  if (config && gateway) {\n    if (gateway && !gateway.startsWith(\"https://\")) {\n      gateway = `https://${gateway}`;\n    }\n    config.pinataGateway = gateway;\n  }\n  return config;\n};\n\n\n//# sourceMappingURL=chunk-ME652TQB.mjs.map\n//# sourceMappingURL=chunk-ME652TQB.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcGluYXRhL2Rpc3QvY2h1bmstTUU2NTJUUUIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0MsR0FBRztBQUNyQztBQUNBO0FBQ0EscUJBQXFCLElBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFCQUFxQixRQUFRLFVBQVU7QUFDckQ7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFlBQVk7QUFDakQsY0FBYyxxQkFBcUIsUUFBUSxZQUFZLEVBQUUsS0FBSztBQUM5RDtBQUNBLGtDQUFrQyxZQUFZO0FBQzlDLGNBQWMscUJBQXFCLEVBQUUsS0FBSztBQUMxQztBQUNBLGtDQUFrQyxZQUFZO0FBQzlDLGNBQWMscUJBQXFCLEVBQUUsS0FBSztBQUMxQztBQUNBO0FBQ0EsY0FBYyxxQkFBcUIsUUFBUSxZQUFZLEVBQUUsS0FBSztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFFBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFaUo7QUFDako7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVU0VSXFxGaWxlRGF0YVxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xccGluYXRhXFxkaXN0XFxjaHVuay1NRTY1MlRRQi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2N1c3RvbS1lcnJvcnMudHNcbnZhciBQaW5hdGFFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlLCBkZXRhaWxzKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgIHRoaXMubmFtZSA9IFwiUGluYXRhRXJyb3JcIjtcbiAgfVxufTtcbnZhciBOZXR3b3JrRXJyb3IgPSBjbGFzcyBleHRlbmRzIFBpbmF0YUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgc3RhdHVzQ29kZSwgZGV0YWlscykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXR1c0NvZGUsIGRldGFpbHMpO1xuICAgIHRoaXMubmFtZSA9IFwiTmV0d29ya0Vycm9yXCI7XG4gIH1cbn07XG52YXIgQXV0aGVudGljYXRpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgUGluYXRhRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlLCBkZXRhaWxzKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgc3RhdHVzQ29kZSwgZGV0YWlscyk7XG4gICAgdGhpcy5uYW1lID0gXCJBdXRoZW50aWNhdGlvbkVycm9yXCI7XG4gIH1cbn07XG52YXIgVmFsaWRhdGlvbkVycm9yID0gY2xhc3MgZXh0ZW5kcyBQaW5hdGFFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGRldGFpbHMpIHtcbiAgICBzdXBlcihtZXNzYWdlLCB2b2lkIDAsIGRldGFpbHMpO1xuICAgIHRoaXMubmFtZSA9IFwiVmFsaWRhdGlvbkVycm9yXCI7XG4gIH1cbn07XG5cbi8vIHNyYy91dGlscy9nYXRld2F5LXRvb2xzLnRzXG5mdW5jdGlvbiBpc1ZhbGlkQ0lEdjAoY2lkKSB7XG4gIHJldHVybiAvXlFtWzEtOUEtSEotTlAtWmEta20tel17NDR9JC8udGVzdChjaWQpO1xufVxuZnVuY3Rpb24gaXNWYWxpZENJRHYxKGNpZCkge1xuICByZXR1cm4gL15iW2EtejItN117NTgsfSQvLnRlc3QoY2lkKTtcbn1cbmZ1bmN0aW9uIGlzQ0lEKHN0cikge1xuICBzdHIgPSBzdHIudHJpbSgpO1xuICByZXR1cm4gaXNWYWxpZENJRHYwKHN0cikgfHwgaXNWYWxpZENJRHYxKHN0cik7XG59XG5hc3luYyBmdW5jdGlvbiBjb250YWluc0NJRChpbnB1dCkge1xuICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW5wdXQgaXMgbm90IGEgc3RyaW5nXCIpO1xuICB9XG4gIGNvbnN0IHN0YXJ0c1dpdGhDSUQgPSAoc3RyKSA9PiB7XG4gICAgY29uc3QgcGFydHMgPSBzdHIuc3BsaXQoXCIvXCIpO1xuICAgIHJldHVybiBpc0NJRChwYXJ0c1swXSkgPyBwYXJ0c1swXSA6IG51bGw7XG4gIH07XG4gIGNvbnN0IGRpcmVjdENJRCA9IHN0YXJ0c1dpdGhDSUQoaW5wdXQpO1xuICBpZiAoZGlyZWN0Q0lEKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRhaW5zQ2lkOiB0cnVlLFxuICAgICAgY2lkOiBkaXJlY3RDSURcbiAgICB9O1xuICB9XG4gIGxldCB1cmw7XG4gIHRyeSB7XG4gICAgdXJsID0gbmV3IFVSTChpbnB1dCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgcGFydHMgPSBpbnB1dC5zcGxpdCgvXFwvfFxcPy8pO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgY29uc3QgY2lkID0gc3RhcnRzV2l0aENJRChwYXJ0KTtcbiAgICAgIGlmIChjaWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250YWluc0NpZDogdHJ1ZSxcbiAgICAgICAgICBjaWRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRhaW5zQ2lkOiBmYWxzZSxcbiAgICAgIGNpZDogbnVsbFxuICAgIH07XG4gIH1cbiAgY29uc3Qgc3ViZG9tYWlucyA9IHVybC5ob3N0bmFtZS5zcGxpdChcIi5cIik7XG4gIGZvciAoY29uc3Qgc3ViZG9tYWluIG9mIHN1YmRvbWFpbnMpIHtcbiAgICBpZiAoaXNDSUQoc3ViZG9tYWluKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGFpbnNDaWQ6IHRydWUsXG4gICAgICAgIGNpZDogc3ViZG9tYWluXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBjb25zdCBwYXRoUGFydHMgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpO1xuICBmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aFBhcnRzKSB7XG4gICAgY29uc3QgY2lkID0gc3RhcnRzV2l0aENJRChwYXJ0KTtcbiAgICBpZiAoY2lkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb250YWluc0NpZDogdHJ1ZSxcbiAgICAgICAgY2lkXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGNvbnRhaW5zQ2lkOiBmYWxzZSxcbiAgICBjaWQ6IG51bGxcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRUb0Rlc2lyZWRHYXRld2F5KHNvdXJjZVVybCwgZGVzaXJlZEdhdGV3YXlQcmVmaXgpIHtcbiAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGNvbnRhaW5zQ0lEKHNvdXJjZVVybCk7XG4gIGlmIChyZXN1bHRzLmNvbnRhaW5zQ2lkICE9PSB0cnVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXJsIGRvZXMgbm90IGNvbnRhaW4gQ0lEXCIpO1xuICB9XG4gIGlmICghc291cmNlVXJsLnN0YXJ0c1dpdGgoXCJodHRwc1wiKSAmJiAhc291cmNlVXJsLnN0YXJ0c1dpdGgoXCJpcGZzOi8vXCIpKSB7XG4gICAgcmV0dXJuIGAke2Rlc2lyZWRHYXRld2F5UHJlZml4fS9pcGZzLyR7c291cmNlVXJsfWA7XG4gIH1cbiAgY29uc3QgdXJsT2JqID0gbmV3IFVSTChzb3VyY2VVcmwpO1xuICBjb25zdCBwYXRoID0gdXJsT2JqLnBhdGhuYW1lICsgdXJsT2JqLnNlYXJjaCArIHVybE9iai5oYXNoO1xuICBpZiAoc291cmNlVXJsLnN0YXJ0c1dpdGgoYGlwZnM6Ly8ke3Jlc3VsdHMuY2lkfWApKSB7XG4gICAgcmV0dXJuIGAke2Rlc2lyZWRHYXRld2F5UHJlZml4fS9pcGZzLyR7cmVzdWx0cy5jaWR9JHtwYXRofWA7XG4gIH1cbiAgaWYgKHNvdXJjZVVybC5pbmNsdWRlcyhgL2lwZnMvJHtyZXN1bHRzLmNpZH1gKSkge1xuICAgIHJldHVybiBgJHtkZXNpcmVkR2F0ZXdheVByZWZpeH0ke3BhdGh9YDtcbiAgfVxuICBpZiAoc291cmNlVXJsLmluY2x1ZGVzKGAvaXBucy8ke3Jlc3VsdHMuY2lkfWApKSB7XG4gICAgcmV0dXJuIGAke2Rlc2lyZWRHYXRld2F5UHJlZml4fSR7cGF0aH1gO1xuICB9XG4gIGlmICh1cmxPYmouaG9zdG5hbWUuaW5jbHVkZXMocmVzdWx0cy5jaWQpKSB7XG4gICAgcmV0dXJuIGAke2Rlc2lyZWRHYXRld2F5UHJlZml4fS9pcGZzLyR7cmVzdWx0cy5jaWR9JHtwYXRofWA7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIFwidW5zdXBwb3J0ZWQgVVJMIHBhdHRlcm4sIHBsZWFzZSBzdWJtaXQgYSBnaXRodWIgaXNzdWUgd2l0aCB0aGUgVVJMIHV0aWxpemVkXCJcbiAgKTtcbn1cblxuLy8gc3JjL3V0aWxzL3Jlc3VtYWJsZS50c1xuZnVuY3Rpb24gZ2V0RmlsZUlkRnJvbVVybCh1cmwpIHtcbiAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goL1xcL2ZpbGVzXFwvKFteXFwvXSspLyk7XG4gIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgIHJldHVybiBtYXRjaFsxXTtcbiAgfVxuICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFwiRmlsZSBJRCBub3QgZm91bmQgaW4gVVJMXCIsIDQwMCwge1xuICAgIGVycm9yOiBcIkZpbGUgSUQgbm90IGZvdW5kIGluIFVSTFwiLFxuICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICByZXF1ZXN0VXJsOiB1cmxcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzcmMvdXRpbHMvZm9ybWF0LWNvbmZpZy50c1xudmFyIGZvcm1hdENvbmZpZyA9IChjb25maWcpID0+IHtcbiAgbGV0IGdhdGV3YXkgPSBjb25maWc/LnBpbmF0YUdhdGV3YXk7XG4gIGlmIChjb25maWcgJiYgZ2F0ZXdheSkge1xuICAgIGlmIChnYXRld2F5ICYmICFnYXRld2F5LnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKSkge1xuICAgICAgZ2F0ZXdheSA9IGBodHRwczovLyR7Z2F0ZXdheX1gO1xuICAgIH1cbiAgICBjb25maWcucGluYXRhR2F0ZXdheSA9IGdhdGV3YXk7XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn07XG5cbmV4cG9ydCB7IEF1dGhlbnRpY2F0aW9uRXJyb3IsIE5ldHdvcmtFcnJvciwgUGluYXRhRXJyb3IsIFZhbGlkYXRpb25FcnJvciwgY29udGFpbnNDSUQsIGNvbnZlcnRUb0Rlc2lyZWRHYXRld2F5LCBmb3JtYXRDb25maWcsIGdldEZpbGVJZEZyb21VcmwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLU1FNjUyVFFCLm1qcy5tYXBcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLU1FNjUyVFFCLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/pinata/dist/chunk-ME652TQB.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/pinata/dist/index.mjs":
/*!********************************************!*\
  !*** ./node_modules/pinata/dist/index.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError),\n/* harmony export */   NetworkError: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError),\n/* harmony export */   PinataError: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError),\n/* harmony export */   PinataSDK: () => (/* binding */ PinataSDK),\n/* harmony export */   ValidationError: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError),\n/* harmony export */   addToGroup: () => (/* binding */ addToGroup),\n/* harmony export */   analyticsDateInterval: () => (/* binding */ analyticsDateInterval),\n/* harmony export */   analyticsTopUsage: () => (/* binding */ analyticsTopUsage),\n/* harmony export */   containsCID: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.containsCID),\n/* harmony export */   convertIPFSUrl: () => (/* binding */ convertIPFSUrl),\n/* harmony export */   convertToDesiredGateway: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.convertToDesiredGateway),\n/* harmony export */   createAccessLink: () => (/* binding */ createAccessLink),\n/* harmony export */   createGroup: () => (/* binding */ createGroup),\n/* harmony export */   createKey: () => (/* binding */ createKey),\n/* harmony export */   createSignedUploadURL: () => (/* binding */ createSignedUploadURL),\n/* harmony export */   deleteFile: () => (/* binding */ deleteFile),\n/* harmony export */   deleteFileVectors: () => (/* binding */ deleteFileVectors),\n/* harmony export */   deleteGroup: () => (/* binding */ deleteGroup),\n/* harmony export */   deletePinRequest: () => (/* binding */ deletePinRequest),\n/* harmony export */   deleteSwap: () => (/* binding */ deleteSwap),\n/* harmony export */   formatConfig: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig),\n/* harmony export */   getCid: () => (/* binding */ getCid),\n/* harmony export */   getFileIdFromUrl: () => (/* reexport safe */ _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.getFileIdFromUrl),\n/* harmony export */   getGroup: () => (/* binding */ getGroup),\n/* harmony export */   listFiles: () => (/* binding */ listFiles),\n/* harmony export */   listGroups: () => (/* binding */ listGroups),\n/* harmony export */   listKeys: () => (/* binding */ listKeys),\n/* harmony export */   pinnedFileCount: () => (/* binding */ pinnedFileCount),\n/* harmony export */   queue: () => (/* binding */ queue),\n/* harmony export */   removeFromGroup: () => (/* binding */ removeFromGroup),\n/* harmony export */   revokeKeys: () => (/* binding */ revokeKeys),\n/* harmony export */   swapCid: () => (/* binding */ swapCid),\n/* harmony export */   swapHistory: () => (/* binding */ swapHistory),\n/* harmony export */   testAuthentication: () => (/* binding */ testAuthentication),\n/* harmony export */   totalStorageUsage: () => (/* binding */ totalStorageUsage),\n/* harmony export */   updateFile: () => (/* binding */ updateFile),\n/* harmony export */   updateGroup: () => (/* binding */ updateGroup),\n/* harmony export */   uploadBase64: () => (/* binding */ uploadBase64),\n/* harmony export */   uploadCid: () => (/* binding */ uploadCid),\n/* harmony export */   uploadFile: () => (/* binding */ uploadFile),\n/* harmony export */   uploadFileArray: () => (/* binding */ uploadFileArray),\n/* harmony export */   uploadJson: () => (/* binding */ uploadJson),\n/* harmony export */   uploadUrl: () => (/* binding */ uploadUrl),\n/* harmony export */   vectorizeFile: () => (/* binding */ vectorizeFile),\n/* harmony export */   vectorizeQuery: () => (/* binding */ vectorizeQuery)\n/* harmony export */ });\n/* harmony import */ var _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-ME652TQB.mjs */ \"(ssr)/./node_modules/pinata/dist/chunk-ME652TQB.mjs\");\n\n\n\n// src/core/functions/analytics/analyticsDateInterval.ts\nvar analyticsDateInterval = async (config, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const params = new URLSearchParams();\n  if (options) {\n    const {\n      cid,\n      gateway_domain,\n      start_date,\n      end_date,\n      file_name,\n      user_agent,\n      country,\n      region,\n      referer,\n      limit,\n      sort_order,\n      date_interval,\n      sort_by\n    } = options;\n    if (cid) params.append(\"cid\", cid);\n    if (gateway_domain) params.append(\"gateway_domain\", gateway_domain);\n    if (start_date) params.append(\"start_date\", start_date);\n    if (end_date) params.append(\"end_date\", end_date);\n    if (file_name) params.append(\"file_name\", file_name);\n    if (user_agent) params.append(\"user_agent\", user_agent.toString());\n    if (country) params.append(\"country\", country.toString());\n    if (region) params.append(\"region\", region);\n    if (referer) params.append(\"referer\", referer.toString());\n    if (limit) params.append(\"limit\", limit.toString());\n    if (sort_order) params.append(\"sort_order\", sort_order);\n    if (sort_by) params.append(\"sort_by\", sort_by);\n    if (date_interval) params.append(\"by\", date_interval);\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  const url = `${endpoint}/ipfs/gateway_analytics_time_series?${params.toString()}`;\n  try {\n    let headers;\n    if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n      headers = { ...config.customHeaders };\n    } else {\n      headers = {\n        Authorization: `Bearer ${config.pinataJwt}`,\n        Source: \"sdk/analyticsDateInterval\"\n      };\n    }\n    const request = await fetch(url, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing anaytics usage: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while fetching gateway usage\"\n    );\n  }\n};\n\n// src/core/functions/analytics/analyticsTopUsage.ts\nvar analyticsTopUsage = async (config, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const params = new URLSearchParams();\n  if (options) {\n    const {\n      cid,\n      gateway_domain,\n      start_date,\n      end_date,\n      file_name,\n      user_agent,\n      country,\n      region,\n      referer,\n      limit,\n      sort_order,\n      sort_by,\n      attribute\n    } = options;\n    const domain = gateway_domain || config.pinataGateway;\n    if (domain) {\n      const cleanDomain = domain.replace(/^https?:\\/\\//, \"\");\n      params.append(\"gateway_domain\", cleanDomain);\n    }\n    if (cid) {\n      params.append(\"cid\", cid);\n    }\n    if (start_date) params.append(\"start_date\", start_date);\n    if (end_date) params.append(\"end_date\", end_date);\n    if (file_name) params.append(\"file_name\", file_name);\n    if (user_agent) params.append(\"user_agent\", user_agent.toString());\n    if (country) params.append(\"country\", country.toString());\n    if (region) params.append(\"region\", region);\n    if (referer) params.append(\"referer\", referer.toString());\n    if (limit) params.append(\"limit\", limit.toString());\n    if (sort_order) params.append(\"sort_order\", sort_order);\n    if (sort_by) params.append(\"sort_by\", sort_by);\n    if (attribute) params.append(\"by\", attribute);\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  const url = `${endpoint}/ipfs/gateway_analytics_top?${params.toString()}`;\n  try {\n    let headers;\n    if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n      headers = { ...config.customHeaders };\n    } else {\n      headers = {\n        Authorization: `Bearer ${config.pinataJwt}`,\n        Source: \"sdk/analyticsTopUsage\"\n      };\n    }\n    const request = await fetch(url, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing anaytics usage: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while fetching gateway usage\"\n    );\n  }\n};\n\n// src/core/functions/authentication/testAuthentication.ts\nvar testAuthentication = async (config) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  let endpoint = \"https://api.pinata.cloud\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/testAuthentication\"\n    };\n  }\n  try {\n    const request = await fetch(`${endpoint}/data/testAuthentication`, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing authentication: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while testing authentication\"\n    );\n  }\n};\n\n// src/core/functions/files/delete.ts\nvar wait = (milliseconds) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, milliseconds);\n  });\n};\nvar deleteFile = async (config, files, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const responses = [];\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/deleteFile\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  for (const id of files) {\n    try {\n      const response = await fetch(`${endpoint}/files/${privacy}/${id}`, {\n        method: \"DELETE\",\n        headers\n      });\n      await wait(300);\n      if (!response.ok) {\n        const errorData = await response.text();\n        if (response.status === 401) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            response.status,\n            {\n              error: errorData,\n              code: \"HTTP_ERROR\",\n              metadata: {\n                requestUrl: response.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error`, response.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: response.url\n          }\n        });\n      }\n      responses.push({\n        id,\n        status: response.statusText\n      });\n    } catch (error) {\n      let errorMessage;\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        errorMessage = error.message;\n      } else if (error instanceof Error) {\n        errorMessage = `Error deleting file ${id}: ${error.message}`;\n      } else {\n        errorMessage = `An unknown error occurred while deleting file ${id}`;\n      }\n      responses.push({\n        id,\n        status: errorMessage\n      });\n    }\n  }\n  return responses;\n};\n\n// src/core/functions/files/deleteFileVectors.ts\nvar deleteFileVectors = async (config, fileId) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/vectorizeFile\"\n    };\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/vectorize/files/${fileId}`, {\n      method: \"DELETE\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing vectorize file: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while vectorizing file\");\n  }\n};\n\n// src/core/functions/files/deleteSwap.ts\nvar deleteSwap = async (config, cid, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/deleteSwap\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/files/${network}/swap/${cid}`, {\n      method: \"DELETE\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(`Authentication failed`, request.status, {\n          error: errorData,\n          code: \"AUTH_ERROR\"\n        });\n      }\n      if (request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n          \"Unauthorized CID Swap Deletion\",\n          request.status,\n          {\n            error: errorData,\n            code: \"UNAUTHORIZED\"\n          }\n        );\n      }\n      if (request.status === 404) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"CID not pinned to account\", request.status, {\n          error: errorData,\n          code: \"NOT_FOUND\"\n        });\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error occurred`, request.status, {\n        error: errorData,\n        code: \"NETWORK_ERROR\"\n      });\n    }\n    return request.statusText;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing deleteSwap: ${error.message}`,\n        void 0,\n        {\n          code: \"DELETE_SWAP_ERROR\"\n        }\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while deleting swap\",\n      void 0,\n      {\n        code: \"UNKNOWN_ERROR\"\n      }\n    );\n  }\n};\n\n// src/core/functions/files/list.ts\nvar listFiles = async (config, privacy, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const params = new URLSearchParams();\n  if (options) {\n    const {\n      name,\n      group,\n      cid,\n      order,\n      limit,\n      mimeType,\n      pageToken,\n      cidPending,\n      metadata,\n      noGroup\n    } = options;\n    if (limit) params.append(\"limit\", limit.toString());\n    if (name) params.append(\"name\", name);\n    if (group) params.append(\"group\", group);\n    if (cid) params.append(\"cid\", cid);\n    if (mimeType) params.append(\"mimeType\", mimeType);\n    if (order) params.append(\"order\", order);\n    if (pageToken) params.append(\"pageToken\", pageToken);\n    if (cidPending) params.append(\"cidPending\", \"true\");\n    if (noGroup) params.append(\"group\", \"null\");\n    if (metadata && typeof metadata === \"object\") {\n      Object.entries(metadata).forEach(([key, value]) => {\n        params.append(`keyvalues[${key.toString()}]`, value.toString());\n      });\n    }\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  const url = `${endpoint}/files/${privacy}?${params.toString()}`;\n  try {\n    let headers;\n    if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n      headers = {\n        Authorization: `Bearer ${config.pinataJwt}`,\n        ...config.customHeaders\n      };\n    } else {\n      headers = {\n        Authorization: `Bearer ${config.pinataJwt}`,\n        Source: \"sdk/listFiles\"\n      };\n    }\n    const request = await fetch(url, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing list files: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while listing files\");\n  }\n};\n\n// src/core/functions/files/pinnedFileUsage.ts\nvar pinnedFileCount = async (config) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let endpoint = \"https://api.pinata.cloud\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/pinnedFileUsage\"\n    };\n  }\n  try {\n    const request = await fetch(`${endpoint}/data/userPinnedDataTotal`, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.pin_count;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing pinnedFileUsage: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while getting pinned file usage\"\n    );\n  }\n};\n\n// src/core/functions/files/swapCid.ts\nvar swapCid = async (config, options, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const data = JSON.stringify({\n    swap_cid: options.swapCid\n  });\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/swapCid\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/files/${network}/swap/${options.cid}`,\n      {\n        method: \"PUT\",\n        headers,\n        body: data\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      if (request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"Unauthorized CID Swap\", request.status, {\n          error: errorData,\n          code: \"AUTH_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      if (request.status === 404) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"CID not pinned to account\", request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing CID Swap: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while swapping CID\");\n  }\n};\n\n// src/core/functions/files/swapHistory.ts\nvar swapHistory = async (config, options, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/swapHistory\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/files/${network}/swap/${options.cid}?domain=${options.domain}`,\n      {\n        method: \"GET\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      if (request.status === 404) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"CID does not have history\", request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error fetching swap history: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while fetching swap history\"\n    );\n  }\n};\n\n// src/core/functions/files/totalStorageUsage.ts\nvar totalStorageUsage = async (config) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let endpoint = \"https://api.pinata.cloud\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = { ...config.customHeaders };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/totalStorageUsage\"\n    };\n  }\n  try {\n    const request = await fetch(`${endpoint}/data/userPinnedDataTotal`, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.pin_size_total;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing totalStorageUsage: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while getting total storage usage\"\n    );\n  }\n};\n\n// src/core/functions/files/updateFile.ts\nvar updateFile = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  if (!options.name && (!options.keyvalues || Object.keys(options.keyvalues).length === 0)) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\n      \"At least one of 'name' or 'keyvalues' must be provided\"\n    );\n  }\n  const data = {};\n  if (options.name !== void 0) {\n    data.name = options.name;\n  }\n  if (options.keyvalues && Object.keys(options.keyvalues).length > 0) {\n    data.keyvalues = options.keyvalues;\n  }\n  const body = JSON.stringify(data);\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/updateMetadata\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/files/${privacy}/${options.id}`, {\n      method: \"PUT\",\n      headers,\n      body\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing updateFile: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while updating file\");\n  }\n};\n\n// src/core/functions/files/vectorizeFile.ts\nvar vectorizeFile = async (config, fileId) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/vectorizeFile\"\n    };\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/vectorize/files/${fileId}`, {\n      method: \"POST\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing vectorize file: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while vectorizing file\");\n  }\n};\n\n// src/core/functions/files/vectorizeQuery.ts\nvar vectorizeQuery = async (config, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/vectorQuery\"\n    };\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  const body = JSON.stringify({\n    text: options.query\n  });\n  try {\n    const request = await fetch(\n      `${endpoint}/vectorize/groups/${options.groupId}/query`,\n      {\n        method: \"POST\",\n        headers,\n        body\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    if (options.returnFile) {\n      if (resData.matches.length === 0) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`No files returned in query to fetch`);\n      }\n      const cid = resData.matches[0].cid;\n      const fileRes = await getCid(config, cid, \"files\");\n      return fileRes;\n    }\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing vectorize file: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while vectorizing file\");\n  }\n};\n\n// src/core/functions/files/queue.ts\nvar queue = async (config, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const params = new URLSearchParams({\n    includesCount: \"false\"\n  });\n  if (options) {\n    const { cid, status, sort, limit, pageToken } = options;\n    if (cid) params.append(\"cid\", cid.toString());\n    if (status) params.append(\"status\", status.toString());\n    if (sort) params.append(\"sort\", sort.toString());\n    if (limit) params.append(\"limit\", limit.toString());\n    if (pageToken) params.append(\"pageToken\", pageToken.toString());\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  const url = `${endpoint}/files/public/pin_by_cid?${params.toString()}`;\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/pinJobs\"\n    };\n  }\n  try {\n    const request = await fetch(url, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing pinJobs: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while listing pin jobs\");\n  }\n};\n\n// src/core/functions/files/deletePinRequest.ts\nvar deletePinRequest = async (config, id) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/deletePinRequest\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const response = await fetch(`${endpoint}/files/public/pin_by_cid/${id}`, {\n      method: \"DELETE\",\n      headers\n    });\n    if (!response.ok) {\n      const errorData = await response.text();\n      if (response.status === 401) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          response.status,\n          {\n            error: errorData,\n            code: \"HTTP_ERROR\",\n            metadata: {\n              requestUrl: response.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error`, response.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: response.url\n        }\n      });\n    }\n    return \"OK\";\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error deleting pin by request: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while deleting pin by CID request\"\n    );\n  }\n};\n\n// src/core/functions/gateway/getCid.ts\nvar getCid = async (config, cid, gatewayType, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let data;\n  let newUrl = `${config?.pinataGateway}/${gatewayType}/${cid}`;\n  const params = new URLSearchParams();\n  if (options) {\n    if (options.width) params.append(\"img-width\", options.width.toString());\n    if (options.height) params.append(\"img-height\", options.height.toString());\n    if (options.dpr) params.append(\"img-dpr\", options.dpr.toString());\n    if (options.fit) params.append(\"img-fit\", options.fit);\n    if (options.gravity) params.append(\"img-gravity\", options.gravity);\n    if (options.quality)\n      params.append(\"img-quality\", options.quality.toString());\n    if (options.format) params.append(\"img-format\", options.format);\n    if (options.animation !== void 0)\n      params.append(\"img-anim\", options.animation.toString());\n    if (options.sharpen)\n      params.append(\"img-sharpen\", options.sharpen.toString());\n    if (options.onError === true) params.append(\"img-onerror\", \"redirect\");\n    if (options.metadata) params.append(\"img-metadata\", options.metadata);\n  }\n  if (config?.pinataGatewayKey) {\n    params.append(\"pinataGatewayToken\", config.pinataGatewayKey);\n  }\n  const queryString = params.toString();\n  if (queryString) {\n    newUrl += `?${queryString}`;\n  }\n  if (gatewayType === \"ipfs\") {\n    const request = await fetch(newUrl);\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication Failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const contentType = request.headers.get(\"content-type\")?.split(\";\")[0] || null;\n    if (contentType?.includes(\"application/json\")) {\n      data = await request.json();\n    } else if (contentType?.includes(\"text/\")) {\n      data = await request.text();\n    } else {\n      data = await request.blob();\n    }\n    const res = {\n      data,\n      contentType\n    };\n    return res;\n  }\n  const date = Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3);\n  const payload = JSON.stringify({\n    url: newUrl,\n    date,\n    expires: 30,\n    method: \"GET\"\n  });\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/getCid\"\n    };\n  }\n  const signedUrlRequest = await fetch(`${endpoint}/files/sign`, {\n    method: \"POST\",\n    headers,\n    body: payload\n  });\n  const signedUrl = await signedUrlRequest.json();\n  try {\n    const request = await fetch(signedUrl.data);\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication Failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const contentType = request.headers.get(\"content-type\")?.split(\";\")[0] || null;\n    if (contentType?.includes(\"application/json\")) {\n      data = await request.json();\n    } else if (contentType?.includes(\"text/\")) {\n      data = await request.text();\n    } else {\n      data = await request.blob();\n    }\n    const res = {\n      data,\n      contentType\n    };\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing getCid: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while getting CID contents\"\n    );\n  }\n};\n\n// src/core/functions/gateway/convertIPFSUrl.ts\nvar convertIPFSUrl = async (config, url, gatewayPrefix) => {\n  let newUrl;\n  let prefix = gatewayPrefix || config?.pinataGateway || \"https://gateway.pinata.cloud\";\n  newUrl = await (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.convertToDesiredGateway)(url, prefix);\n  if (config?.pinataGatewayKey) {\n    `${newUrl}?pinataGatewayToken=${config?.pinataGatewayKey}`;\n  }\n  return newUrl;\n};\n\n// src/core/functions/gateway/createAccessLink.ts\nvar createAccessLink = async (config, options, imgOpts) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let baseUrl;\n  if (options?.gateway) {\n    baseUrl = options.gateway.startsWith(\"https://\") ? options.gateway : `https://${options.gateway}`;\n  } else {\n    baseUrl = config.pinataGateway;\n  }\n  let newUrl = `${baseUrl}/files/${options.cid}`;\n  const params = new URLSearchParams();\n  if (imgOpts) {\n    if (imgOpts.width) params.append(\"img-width\", imgOpts.width.toString());\n    if (imgOpts.height) params.append(\"img-height\", imgOpts.height.toString());\n    if (imgOpts.dpr) params.append(\"img-dpr\", imgOpts.dpr.toString());\n    if (imgOpts.fit) params.append(\"img-fit\", imgOpts.fit);\n    if (imgOpts.gravity) params.append(\"img-gravity\", imgOpts.gravity);\n    if (imgOpts.quality)\n      params.append(\"img-quality\", imgOpts.quality.toString());\n    if (imgOpts.format) params.append(\"img-format\", imgOpts.format);\n    if (imgOpts.animation !== void 0)\n      params.append(\"img-anim\", imgOpts.animation.toString());\n    if (imgOpts.sharpen)\n      params.append(\"img-sharpen\", imgOpts.sharpen.toString());\n    if (imgOpts.onError === true) params.append(\"img-onerror\", \"redirect\");\n    if (imgOpts.metadata) params.append(\"img-metadata\", imgOpts.metadata);\n  }\n  const queryString = params.toString();\n  if (queryString) {\n    newUrl += `?${queryString}`;\n  }\n  const date = options?.date || Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3);\n  const payload = JSON.stringify({\n    url: newUrl,\n    date,\n    expires: options.expires,\n    method: \"GET\"\n  });\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/createSignURL\"\n    };\n  }\n  try {\n    const request = await fetch(`${endpoint}/files/private/download_link`, {\n      method: \"POST\",\n      headers,\n      body: payload\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication Failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.data;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing createSignedURL: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while getting signed url\");\n  }\n};\n\n// src/core/functions/groups/addToGroup.ts\nvar addToGroup = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const wait3 = (milliseconds) => {\n    return new Promise((resolve) => {\n      setTimeout(resolve, milliseconds);\n    });\n  };\n  const responses = [];\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/addToGroup\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  for (const id of options.files) {\n    try {\n      const response = await fetch(\n        `${endpoint}/groups/${privacy}/${options.groupId}/ids/${id}`,\n        {\n          method: \"PUT\",\n          headers\n        }\n      );\n      await wait3(300);\n      if (!response.ok) {\n        const errorData = await response.text();\n        if (response.status === 401) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            response.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: response.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, response.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: response.url\n          }\n        });\n      }\n      responses.push({\n        id,\n        status: response.statusText\n      });\n    } catch (error) {\n      let errorMessage;\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        errorMessage = error.message;\n      } else if (error instanceof Error) {\n        errorMessage = `Error adding file ${id} to group: ${error.message}`;\n      } else {\n        errorMessage = `An unknown error occurred while adding file ${id} to group`;\n      }\n      responses.push({\n        id,\n        status: errorMessage\n      });\n    }\n  }\n  return responses;\n};\n\n// src/core/functions/groups/createGroup.ts\nvar createGroup = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const data = JSON.stringify({\n    name: options.name,\n    is_public: options.isPublic\n  });\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/createGroup\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/groups/${privacy}`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing createGroup: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while creating a group\");\n  }\n};\n\n// src/core/functions/groups/deleteGroup.ts\nvar deleteGroup = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/deleteGroup\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/groups/${privacy}/${options.groupId}`,\n      {\n        method: \"DELETE\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = request.statusText;\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing deleteGroup: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while deleting a group\");\n  }\n};\n\n// src/core/functions/groups/getGroup.ts\nvar getGroup = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/getGroup\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/groups/${privacy}/${options.groupId}`,\n      {\n        method: \"GET\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing getGroup: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while getting info for a group\"\n    );\n  }\n};\n\n// src/core/functions/groups/listGroups.ts\nvar listGroups = async (config, privacy, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/listGroups\"\n    };\n  }\n  const params = new URLSearchParams();\n  if (options) {\n    const { pageToken, name, limit, isPublic } = options;\n    if (pageToken) params.append(\"pageToken\", pageToken.toString());\n    if (isPublic) params.append(\"isPublic\", isPublic.toString());\n    if (name) params.append(\"name\", name);\n    if (limit !== void 0) params.append(\"limit\", limit.toString());\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/groups/${privacy}?${params.toString()}`,\n      {\n        method: \"GET\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing listGroups: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while listing groups\");\n  }\n};\n\n// src/core/functions/groups/removeFromGroup.ts\nvar removeFromGroup = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const wait3 = (milliseconds) => {\n    return new Promise((resolve) => {\n      setTimeout(resolve, milliseconds);\n    });\n  };\n  const responses = [];\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/addToGroup\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  for (const id of options.files) {\n    try {\n      const response = await fetch(\n        `${endpoint}/groups/${privacy}/${options.groupId}/ids/${id}`,\n        {\n          method: \"DELETE\",\n          headers\n        }\n      );\n      await wait3(300);\n      if (!response.ok) {\n        const errorData = await response.text();\n        if (response.status === 401) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            response.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: response.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, response.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: response.url\n          }\n        });\n      }\n      responses.push({\n        id,\n        status: response.statusText\n      });\n    } catch (error) {\n      let errorMessage;\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        errorMessage = error.message;\n      } else if (error instanceof Error) {\n        errorMessage = `Error adding file ${id} to group: ${error.message}`;\n      } else {\n        errorMessage = `An unknown error occurred while adding file ${id} to group`;\n      }\n      responses.push({\n        id,\n        status: errorMessage\n      });\n    }\n  }\n  return responses;\n};\n\n// src/core/functions/groups/updateGroup.ts\nvar updateGroup = async (config, options, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const data = JSON.stringify({\n    name: options.name,\n    is_public: options.isPublic\n  });\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/updateGroup\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/groups/${privacy}/${options.groupId}`,\n      {\n        method: \"PUT\",\n        headers,\n        body: data\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing updateGroup: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while updating group\");\n  }\n};\n\n// src/core/functions/keys/createKey.ts\nvar createKey = async (config, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/createKey\"\n    };\n  }\n  const data = JSON.stringify(options);\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/pinata/keys`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing createKey: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while creating API key\");\n  }\n};\n\n// src/core/functions/keys/listKeys.ts\nvar listKeys = async (config, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/listKeys\"\n    };\n  }\n  const params = new URLSearchParams();\n  if (options) {\n    const { offset, name, revoked, limitedUse, exhausted } = options;\n    if (offset) params.append(\"offset\", offset.toString());\n    if (revoked !== void 0) params.append(\"revoked\", revoked.toString());\n    if (limitedUse !== void 0)\n      params.append(\"limitedUse\", limitedUse.toString());\n    if (exhausted !== void 0)\n      params.append(\"exhausted\", exhausted.toString());\n    if (name) params.append(\"name\", name);\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/pinata/keys?${params.toString()}`,\n      {\n        method: \"GET\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.keys;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing listKeys: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while listing API keys\");\n  }\n};\n\n// src/core/functions/keys/revokeKeys.ts\nvar wait2 = (milliseconds) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, milliseconds);\n  });\n};\nvar revokeKeys = async (config, keys) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n    headers = { ...config.customHeaders };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/revokeKeys\"\n    };\n  }\n  const responses = [];\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  for (const key of keys) {\n    try {\n      const request = await fetch(`${endpoint}/pinata/keys/${key}`, {\n        method: \"PUT\",\n        headers\n      });\n      await wait2(300);\n      if (!request.ok) {\n        const errorData = await request.text();\n        if (request.status === 401 || request.status === 403) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            request.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: request.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      const result = await request.json();\n      responses.push({\n        key,\n        status: result\n      });\n    } catch (error) {\n      let errorMessage;\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        errorMessage = error.message;\n      } else if (error instanceof Error) {\n        errorMessage = `Error revoking key ${key}: ${error.message}`;\n      } else {\n        errorMessage = `An unknown error occurred while revoking key ${key}`;\n      }\n      responses.push({\n        key,\n        status: errorMessage\n      });\n    }\n  }\n  return responses;\n};\n\n// src/core/functions/uploads/base64.ts\nvar uploadBase64 = async (config, base64String, network, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const jwt = options?.keys || config?.pinataJwt;\n  const name = options?.metadata?.name ? options?.metadata?.name : \"base64 string\";\n  const buffer = Buffer.from(base64String, \"base64\");\n  const blob = new Blob([buffer]);\n  const data = new FormData();\n  data.append(\"file\", blob, name);\n  data.append(\"network\", network);\n  data.append(\"name\", name);\n  if (options?.groupId) {\n    data.append(\"group_id\", options.groupId);\n  }\n  if (options?.metadata?.keyvalues) {\n    data.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      Source: \"sdk/base64\"\n    };\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  if (options?.url) {\n    try {\n      const request = await fetch(options.url, {\n        method: \"POST\",\n        body: data\n      });\n      if (!request.ok) {\n        const errorData = await request.text();\n        if (request.status === 401 || request.status === 403) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            request.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: request.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      const res = await request.json();\n      const resData = res.data;\n      return resData;\n    } catch (error) {\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        throw error;\n      }\n      if (error instanceof Error) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing base64: ${error.message}`);\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        \"An unknown error occurred while trying to upload base64\"\n      );\n    }\n  }\n  try {\n    const request = await fetch(`${endpoint}/files`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    if (options?.vectorize) {\n      const vectorReq = await fetch(\n        `${endpoint}/vectorize/files/${resData.id}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${jwt}`\n          }\n        }\n      );\n      if (vectorReq.ok) {\n        resData.vectorized = true;\n        return resData;\n      } else {\n        const errorData = await vectorReq.text();\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\n          `HTTP error during vectorization: ${errorData}`,\n          vectorReq.status,\n          {\n            error: errorData,\n            code: \"HTTP_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n    }\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing base64: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while trying to upload base64\"\n    );\n  }\n};\n\n// src/core/functions/uploads/createSignedUploadURL.ts\nvar createSignedUploadURL = async (config, options, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const date = options?.date || Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3);\n  const payload = {\n    date,\n    expires: options.expires\n  };\n  if (options.groupId) {\n    payload.group_id = options.groupId;\n  }\n  if (options.name) {\n    payload.filename = options.name;\n  }\n  if (options.keyvalues) {\n    payload.keyvalues = options.keyvalues;\n  }\n  if (network) {\n    payload.network = network;\n  }\n  if (options.streamable) {\n    payload.streamable = options.streamable;\n  }\n  if (options.maxFileSize) {\n    payload.max_file_size = options.maxFileSize;\n  }\n  if (options.mimeTypes) {\n    payload.allow_mime_types = options.mimeTypes;\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${config.pinataJwt}`,\n      Source: \"sdk/createSignURL\"\n    };\n  }\n  try {\n    const request = await fetch(`${endpoint}/files/sign`, {\n      method: \"POST\",\n      headers,\n      cache: \"no-store\",\n      body: JSON.stringify(payload)\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication Failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.data;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error processing createSignedURL: ${error.message}`\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while getting signed url\");\n  }\n};\n\n// src/core/functions/uploads/file.ts\nvar uploadFile = async (config, file, network, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const jwt = options?.keys || config.pinataJwt;\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  if (file.size > 94371840) {\n    let headers2;\n    if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n      headers2 = {\n        Authorization: `Bearer ${jwt}`,\n        ...config.customHeaders\n      };\n    } else {\n      headers2 = {\n        Authorization: `Bearer ${jwt}`,\n        Source: \"sdk/file\"\n      };\n    }\n    const name = options?.metadata?.name || file.name || \"File from SDK\";\n    let metadata = `filename ${btoa(name)},filetype ${btoa(file.type)},network ${btoa(network)}`;\n    if (options?.groupId) {\n      metadata += `,group_id ${btoa(options.groupId)}`;\n    }\n    if (options?.metadata?.keyvalues) {\n      metadata += `,keyvalues ${btoa(JSON.stringify(options.metadata.keyvalues))}`;\n    }\n    if (options?.streamable) {\n      metadata += `,streamable ${btoa(\"true\")}`;\n    }\n    let updatedEndpoint = `${endpoint}/files`;\n    if (options?.url) {\n      updatedEndpoint = options.url;\n    }\n    const urlReq = await fetch(updatedEndpoint, {\n      method: \"POST\",\n      headers: {\n        \"Upload-Length\": `${file.size}`,\n        \"Upload-Metadata\": metadata,\n        ...headers2\n      }\n    });\n    const url = urlReq.headers.get(\"Location\");\n    if (!url) {\n      const errorData = await urlReq.text();\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\"Upload URL not provided\", urlReq.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: urlReq.url,\n          requestHeaders: urlReq.headers\n        }\n      });\n    }\n    const chunkSize = 50 * 1024 * 1024 + 1;\n    const totalChunks = Math.ceil(file.size / chunkSize);\n    let offset = 0;\n    let uploadReq;\n    for (let i = 0; i < totalChunks; i++) {\n      const chunk = file.slice(offset, offset + chunkSize);\n      let retryCount = 0;\n      const maxRetries = 5;\n      while (retryCount <= maxRetries) {\n        try {\n          uploadReq = await fetch(url, {\n            method: \"PATCH\",\n            headers: {\n              \"Content-Type\": \"application/offset+octet-stream\",\n              \"Upload-Offset\": offset.toString(),\n              ...headers2\n            },\n            body: chunk\n          });\n          if (uploadReq.ok) {\n            break;\n          } else {\n            const errorData = await uploadReq.text();\n            throw new Error(`HTTP ${uploadReq.status}: ${errorData}`);\n          }\n        } catch (error) {\n          retryCount++;\n          if (retryCount > maxRetries) {\n            const errorData = uploadReq ? await uploadReq.text().catch(() => \"Unknown error\") : error instanceof Error ? error.message : String(error);\n            throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\n              `HTTP error during chunk upload after ${maxRetries} retries: ${errorData}`,\n              uploadReq?.status || 0,\n              {\n                error: errorData,\n                code: \"HTTP_ERROR\",\n                metadata: {\n                  requestUrl: uploadReq?.url || url,\n                  retriesAttempted: maxRetries\n                }\n              }\n            );\n          }\n          const delay = Math.min(1e3 * Math.pow(2, retryCount - 1), 1e4);\n          await new Promise((resolve) => setTimeout(resolve, delay));\n        }\n      }\n      offset += chunk.size;\n    }\n    if (uploadReq.status === 204) {\n      const cid = uploadReq.headers.get(\"upload-cid\");\n      if (!config.pinataJwt) {\n        const data3 = {\n          id: \"\",\n          name: \"\",\n          cid,\n          size: file.size,\n          created_at: \"\",\n          number_of_files: 1,\n          group_id: null,\n          mime_type: \"\",\n          keyvalues: {},\n          vectorized: false,\n          network: \"\"\n        };\n        return data3;\n      }\n      let dataEndpoint;\n      if (config.endpointUrl) {\n        dataEndpoint = config.endpointUrl;\n      } else {\n        dataEndpoint = \"https://api.pinata.cloud/v3\";\n      }\n      const fileInfoReq = await fetch(\n        `${dataEndpoint}/files/${network}?cid=${cid}`,\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${jwt}`\n          }\n        }\n      );\n      const fileInfo = await fileInfoReq.json();\n      const data2 = fileInfo.data.files[0];\n      if (options?.vectorize) {\n        const vectorReq = await fetch(\n          `${endpoint}/vectorize/files/${data2.id}`,\n          {\n            method: \"POST\",\n            headers: {\n              Authorization: `Bearer ${jwt}`\n            }\n          }\n        );\n        if (vectorReq.ok) {\n          data2.vectorized = true;\n          return data2;\n        } else {\n          const errorData = await vectorReq.text();\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\n            `HTTP error during vectorization: ${errorData}`,\n            vectorReq.status,\n            {\n              error: errorData,\n              code: \"HTTP_ERROR\",\n              metadata: {\n                requestUrl: vectorReq.url\n              }\n            }\n          );\n        }\n      }\n      return data2;\n    }\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      Source: \"sdk/file\"\n    };\n  }\n  const data = new FormData();\n  data.append(\"file\", file, file.name);\n  data.append(\"network\", network);\n  data.append(\"name\", options?.metadata?.name || file.name || \"File from SDK\");\n  if (options?.groupId) {\n    data.append(\"group_id\", options.groupId);\n  }\n  if (options?.metadata?.keyvalues) {\n    data.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n  }\n  if (options?.streamable) {\n    data.append(\"streamable\", \"true\");\n  }\n  if (options?.url) {\n    try {\n      const request = await fetch(options.url, {\n        method: \"POST\",\n        headers,\n        body: data\n      });\n      if (!request.ok) {\n        const errorData = await request.text();\n        if (request.status === 401 || request.status === 403) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            request.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: request.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      const res = await request.json();\n      const resData = res.data;\n      return resData;\n    } catch (error) {\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        throw error;\n      }\n      if (error instanceof Error) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n          `Error uploading file: ${error.message}`,\n          void 0,\n          {\n            error: error.toString()\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        \"An unknown error occurred while trying to upload file\"\n      );\n    }\n  }\n  try {\n    const request = await fetch(`${endpoint}/files`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    if (options?.vectorize) {\n      const vectorReq = await fetch(\n        `${endpoint}/vectorize/files/${resData.id}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${jwt}`\n          }\n        }\n      );\n      if (vectorReq.ok) {\n        resData.vectorized = true;\n        return resData;\n      } else {\n        const errorData = await vectorReq.text();\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\n          `HTTP error during vectorization: ${errorData}`,\n          vectorReq.status,\n          {\n            error: errorData,\n            code: \"HTTP_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n    }\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        `Error uploading file: ${error.message}`,\n        void 0,\n        {\n          error: error.toString()\n        }\n      );\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while trying to upload file\"\n    );\n  }\n};\n\n// src/core/functions/uploads/fileArray.ts\nvar uploadFileArray = async (config, files, network, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const jwt = options?.keys || config?.pinataJwt;\n  const folder = options?.metadata?.name || \"folder_from_sdk\";\n  const data = new FormData();\n  for (const file of Array.from(files)) {\n    const path = file.webkitRelativePath || `${folder}/${file.name}`;\n    data.append(\"file\", file, path);\n  }\n  data.append(\n    \"pinataMetadata\",\n    JSON.stringify({\n      name: folder,\n      keyvalues: options?.metadata?.keyvalues\n    })\n  );\n  data.append(\n    \"pinataOptions\",\n    JSON.stringify({\n      groupId: options?.groupId,\n      cidVersion: 1\n    })\n  );\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      Source: \"sdk/fileArray\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/pinning/pinFileToIPFS\";\n  if (config.legacyUploadUrl) {\n    endpoint = config.legacyUploadUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = {\n      id: res.ID,\n      name: res.Name,\n      cid: res.IpfsHash,\n      size: res.PinSize,\n      created_at: res.Timestamp,\n      number_of_files: res.NumberOfFiles,\n      mime_type: res.MimeType,\n      group_id: res.GroupId,\n      keyvalues: res.Keyvalues,\n      vectorized: false,\n      network: \"public\"\n    };\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing fileArray: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while uploading an array of files\"\n    );\n  }\n};\n\n// src/core/functions/uploads/json.ts\nvar uploadJson = async (config, jsonData, network, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const jwt = options?.keys || config?.pinataJwt;\n  const json = JSON.stringify(jsonData);\n  const blob = new Blob([json]);\n  const file = new File([blob], \"data.json\", { type: \"application/json\" });\n  const data = new FormData();\n  data.append(\"file\", file, file.name);\n  data.append(\"network\", network);\n  data.append(\"name\", options?.metadata?.name || file.name || \"File from SDK\");\n  if (options?.groupId) {\n    data.append(\"group_id\", options.groupId);\n  }\n  if (options?.metadata?.keyvalues) {\n    data.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      Source: \"sdk/json\"\n    };\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  if (options?.url) {\n    try {\n      const request = await fetch(options.url, {\n        method: \"POST\",\n        body: data\n      });\n      if (!request.ok) {\n        const errorData = await request.text();\n        if (request.status === 401 || request.status === 403) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            request.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: request.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      const res = await request.json();\n      const resData = res.data;\n      return resData;\n    } catch (error) {\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        throw error;\n      }\n      if (error instanceof Error) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing base64: ${error.message}`);\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        \"An unknown error occurred while trying to upload base64\"\n      );\n    }\n  }\n  try {\n    const request = await fetch(`${endpoint}/files`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    if (options?.vectorize) {\n      const vectorReq = await fetch(\n        `${endpoint}/vectorize/files/${resData.id}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${jwt}`\n          }\n        }\n      );\n      if (vectorReq.ok) {\n        resData.vectorized = true;\n        return resData;\n      } else {\n        const errorData = await vectorReq.text();\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\n          `HTTP error during vectorization: ${errorData}`,\n          vectorReq.status,\n          {\n            error: errorData,\n            code: \"HTTP_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n    }\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing json: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while uploading json\");\n  }\n};\n\n// src/core/functions/uploads/url.ts\nvar uploadUrl = async (config, url, network, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const jwt = options?.keys || config?.pinataJwt;\n  const data = new FormData();\n  const stream = await fetch(url);\n  if (!stream.ok) {\n    const errorData = await stream.text();\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, stream.status, {\n      error: errorData,\n      code: \"HTTP_ERROR\",\n      metadata: {\n        requestUrl: stream.url\n      }\n    });\n  }\n  const arrayBuffer = await stream.arrayBuffer();\n  const blob = new Blob([arrayBuffer]);\n  const name = options?.metadata?.name ?? \"url_upload\";\n  const file = new File([blob], name);\n  data.append(\"file\", file, name);\n  data.append(\"network\", network);\n  data.append(\"name\", name);\n  if (options?.groupId) {\n    data.append(\"group_id\", options.groupId);\n  }\n  if (options?.metadata?.keyvalues) {\n    data.append(\"keyvalues\", JSON.stringify(options.metadata.keyvalues));\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      Source: \"sdk/url\"\n    };\n  }\n  let endpoint = \"https://uploads.pinata.cloud/v3\";\n  if (config.uploadUrl) {\n    endpoint = config.uploadUrl;\n  }\n  if (options?.url) {\n    try {\n      const request = await fetch(options.url, {\n        method: \"POST\",\n        body: data\n      });\n      if (!request.ok) {\n        const errorData = await request.text();\n        if (request.status === 401 || request.status === 403) {\n          throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n            `Authentication failed: ${errorData}`,\n            request.status,\n            {\n              error: errorData,\n              code: \"AUTH_ERROR\",\n              metadata: {\n                requestUrl: request.url\n              }\n            }\n          );\n        }\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n          error: errorData,\n          code: \"HTTP_ERROR\",\n          metadata: {\n            requestUrl: request.url\n          }\n        });\n      }\n      const res = await request.json();\n      const resData = res.data;\n      return resData;\n    } catch (error) {\n      if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n        throw error;\n      }\n      if (error instanceof Error) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing base64: ${error.message}`);\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n        \"An unknown error occurred while trying to upload base64\"\n      );\n    }\n  }\n  try {\n    const request = await fetch(`${endpoint}/files`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    if (options?.vectorize) {\n      const vectorReq = await fetch(\n        `${endpoint}/vectorize/files/${resData.id}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${jwt}`\n          }\n        }\n      );\n      if (vectorReq.ok) {\n        resData.vectorized = true;\n        return resData;\n      } else {\n        const errorData = await vectorReq.text();\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(\n          `HTTP error during vectorization: ${errorData}`,\n          vectorReq.status,\n          {\n            error: errorData,\n            code: \"HTTP_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n    }\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing url: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while uploading by url\");\n  }\n};\n\n// src/core/functions/uploads/cid.ts\nvar uploadCid = async (config, cid, options) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const jwt = options?.keys || config?.pinataJwt;\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${jwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/cid\"\n    };\n  }\n  const requestBody = {\n    cid,\n    name: options?.metadata ? options?.metadata?.name : cid,\n    keyvalues: options?.metadata?.keyvalues,\n    group_id: options?.groupId,\n    host_nodes: options?.peerAddresses\n  };\n  const data = JSON.stringify(requestBody);\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/files/public/pin_by_cid`, {\n      method: \"POST\",\n      headers,\n      body: data\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing cid: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\"An unknown error occurred while pinning by CID\");\n  }\n};\n\n// src/core/classes/analytics/Analytics.ts\nvar Analytics = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.requests = new AnalyticsRequests(this.config);\n    this.bandwidth = new AnalyticsBandwidth(this.config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n    this.requests.updateConfig(newConfig);\n    this.bandwidth.updateConfig(newConfig);\n  }\n  summary(options) {\n    return new TimeIntervalAnalyticsBuilder(\n      this.config,\n      options.domain,\n      options.start,\n      options.end,\n      options.interval\n    );\n  }\n};\n\n// src/core/classes/analytics/utils.ts\nvar calculateDates = (days) => {\n  const end = /* @__PURE__ */ new Date();\n  const start = /* @__PURE__ */ new Date();\n  start.setDate(start.getDate() - days);\n  return {\n    start: start.toISOString().split(\"T\")[0],\n    end: end.toISOString().split(\"T\")[0]\n  };\n};\n\n// src/core/classes/analytics/AnalyticsFilter.ts\nvar AnalyticsFilter = class {\n  constructor(config, domain, start, end) {\n    this.config = config;\n    this.query = {\n      gateway_domain: domain,\n      start_date: start,\n      end_date: end,\n      sort_by: \"requests\",\n      // Will be overridden in child classes\n      attribute: \"cid\"\n    };\n  }\n  cid(cid) {\n    this.query.attribute = \"cid\";\n    if (cid) {\n      this.query.cid = cid;\n    }\n    return this;\n  }\n  fileName(fileName) {\n    this.query.attribute = \"file_name\";\n    if (fileName) {\n      this.query.file_name = fileName;\n    }\n    return this;\n  }\n  userAgent(userAgent) {\n    this.query.attribute = \"user_agent\";\n    if (userAgent) {\n      this.query.user_agent = userAgent;\n    }\n    return this;\n  }\n  country(country) {\n    this.query.attribute = \"country\";\n    if (country) {\n      this.query.country = country;\n    }\n    return this;\n  }\n  region(region) {\n    this.query.attribute = \"region\";\n    if (region) {\n      this.query.region = region;\n    }\n    return this;\n  }\n  referer(referer) {\n    this.query.attribute = \"referer\";\n    if (referer) {\n      this.query.referer = referer;\n    }\n    return this;\n  }\n  limit(limit) {\n    this.query.limit = limit;\n    return this;\n  }\n  sort(order) {\n    this.query.sort_order = order;\n    return this;\n  }\n  days(numberOfDays) {\n    const { start, end } = calculateDates(numberOfDays);\n    this.query.start_date = start;\n    this.query.end_date = end;\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return analyticsTopUsage(this.config, this.query).then(\n      onfulfilled,\n      onrejected\n    );\n  }\n};\n\n// src/core/classes/analytics/AnalyticsBandwidth.ts\nvar AnalyticsBandwidth = class extends AnalyticsFilter {\n  constructor(config) {\n    super(config, \"\", \"\", \"\");\n    this.query.sort_by = \"bandwidth\";\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  customDates(start, end) {\n    if (start) this.query.start_date = start;\n    if (end) this.query.end_date = end;\n    return this;\n  }\n  from(domain) {\n    this.query.gateway_domain = domain;\n    return this;\n  }\n};\n\n// src/core/classes/analytics/AnalyticsBuilder.ts\nvar AnalyticsBuilder = class {\n  constructor(config, query) {\n    this.requestCount = 0;\n    this.lastRequestTime = 0;\n    this.MAX_REQUESTS_PER_MINUTE = 30;\n    this.MINUTE_IN_MS = 6e4;\n    this.config = config;\n    this.query = query;\n  }\n  cid(cid) {\n    this.query.cid = cid;\n    return this;\n  }\n  fileName(fileName) {\n    this.query.file_name = fileName;\n    return this;\n  }\n  userAgent(userAgent) {\n    this.query.user_agent = userAgent;\n    return this;\n  }\n  country(country) {\n    this.query.country = country;\n    return this;\n  }\n  region(region) {\n    this.query.region = region;\n    return this;\n  }\n  referer(referer) {\n    this.query.referer = referer;\n    return this;\n  }\n  limit(limit) {\n    this.query.limit = limit;\n    return this;\n  }\n  sort(order) {\n    this.query.sort_order = order;\n    return this;\n  }\n  // private async rateLimit(): Promise<void> {\n  // \tthis.requestCount++;\n  // \tconst now = Date.now();\n  // \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n  // \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n  // \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n  // \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n  // \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n  // \t\t}\n  // \t\tthis.requestCount = 0;\n  // \t}\n  // \tthis.lastRequestTime = Date.now();\n  // }\n  async getAnalytics() {\n    throw new Error(\"getAnalytics method must be implemented in derived class\");\n  }\n  then(onfulfilled, onrejected) {\n    return this.getAnalytics().then(onfulfilled, onrejected);\n  }\n};\n\n// src/core/classes/analytics/AnalyticsRequests.ts\nvar AnalyticsRequests = class extends AnalyticsFilter {\n  constructor(config) {\n    super(config, \"\", \"\", \"\");\n    this.query.sort_by = \"requests\";\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  customDates(start, end) {\n    if (start) this.query.start_date = start;\n    if (end) this.query.end_date = end;\n    return this;\n  }\n  from(domain) {\n    this.query.gateway_domain = domain;\n    return this;\n  }\n};\n\n// src/core/classes/analytics/TimeIntervalAnalyticsBuilder.ts\nvar TimeIntervalAnalyticsBuilder = class extends AnalyticsBuilder {\n  constructor(config, domain, start, end, dateInterval) {\n    super(config, {\n      gateway_domain: domain,\n      start_date: start,\n      end_date: end,\n      date_interval: dateInterval\n    });\n  }\n  sortBy(sortBy) {\n    this.query.sort_by = sortBy;\n    return this;\n  }\n  async getAnalytics() {\n    return analyticsDateInterval(this.config, this.query);\n  }\n  async all() {\n    return this.getAnalytics();\n  }\n};\n\n// src/core/classes/groups/GroupsFilter.ts\nvar FilterGroups = class {\n  constructor(config, privacy) {\n    this.query = {};\n    this.config = config;\n    this.privacy = privacy;\n  }\n  name(name) {\n    this.query.name = name;\n    return this;\n  }\n  limit(limit) {\n    this.query.limit = limit;\n    return this;\n  }\n  isPublic(isPublic) {\n    this.query.isPublic = isPublic;\n    return this;\n  }\n  pageToken(pageToken) {\n    this.query.pageToken = pageToken;\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return this.fetchPage().then((response) => {\n      this.nextPageToken = response.next_page_token;\n      return response;\n    }).then(onfulfilled, onrejected);\n  }\n  async fetchPage() {\n    if (this.nextPageToken) {\n      this.query.pageToken = this.nextPageToken;\n    }\n    return listGroups(this.config, this.privacy, this.query);\n  }\n  // rate limit, hopefully temporary?\n  // private async rateLimit(): Promise<void> {\n  // \tthis.requestCount++;\n  // \tconst now = Date.now();\n  // \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n  // \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n  // \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n  // \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n  // \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n  // \t\t}\n  // \t\tthis.requestCount = 0;\n  // \t}\n  // \tthis.lastRequestTime = Date.now();\n  // }\n  async *[Symbol.asyncIterator]() {\n    while (true) {\n      const response = await this.fetchPage();\n      for (const item of response.groups) {\n        yield item;\n      }\n      if (!response.next_page_token) {\n        break;\n      }\n      this.nextPageToken = response.next_page_token;\n    }\n  }\n  async all() {\n    const allItems = [];\n    for await (const item of this) {\n      allItems.push(item);\n    }\n    return allItems;\n  }\n};\n\n// src/core/classes/groups/PublicGroups.ts\nvar PublicGroups = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  create(options) {\n    return createGroup(this.config, options, \"public\");\n  }\n  list() {\n    return new FilterGroups(this.config, \"public\");\n  }\n  get(options) {\n    return getGroup(this.config, options, \"public\");\n  }\n  addFiles(options) {\n    return addToGroup(this.config, options, \"public\");\n  }\n  removeFiles(options) {\n    return removeFromGroup(this.config, options, \"public\");\n  }\n  update(options) {\n    return updateGroup(this.config, options, \"public\");\n  }\n  delete(options) {\n    return deleteGroup(this.config, options, \"public\");\n  }\n};\n\n// src/core/classes/groups/PrivateGroups.ts\nvar PrivateGroups = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  create(options) {\n    return createGroup(this.config, options, \"private\");\n  }\n  list() {\n    return new FilterGroups(this.config, \"private\");\n  }\n  get(options) {\n    return getGroup(this.config, options, \"private\");\n  }\n  addFiles(options) {\n    return addToGroup(this.config, options, \"private\");\n  }\n  removeFiles(options) {\n    return removeFromGroup(this.config, options, \"private\");\n  }\n  update(options) {\n    return updateGroup(this.config, options, \"private\");\n  }\n  delete(options) {\n    return deleteGroup(this.config, options, \"private\");\n  }\n};\n\n// src/core/classes/groups/Groups.ts\nvar Groups = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.public = new PublicGroups(config);\n    this.private = new PrivateGroups(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n};\n\n// src/core/classes/keys/Keys.ts\nvar Keys = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  create(options) {\n    return createKey(this.config, options);\n  }\n  list() {\n    return new FilterKeys(this.config);\n  }\n  revoke(keys) {\n    return revokeKeys(this.config, keys);\n  }\n};\n\n// src/core/classes/keys/FilterKeys.ts\nvar FilterKeys = class {\n  // rate limit vars\n  // private requestCount = 0;\n  // private lastRequestTime = 0;\n  // private readonly MAX_REQUESTS_PER_MINUTE = 30;\n  // private readonly MINUTE_IN_MS = 60000;\n  constructor(config) {\n    this.query = {};\n    this.config = config;\n  }\n  offset(offset) {\n    this.query.offset = offset;\n    return this;\n  }\n  revoked(revoked) {\n    this.query.revoked = revoked;\n    return this;\n  }\n  limitedUse(limitedUse) {\n    this.query.limitedUse = limitedUse;\n    return this;\n  }\n  exhausted(exhausted) {\n    this.query.exhausted = exhausted;\n    return this;\n  }\n  name(name) {\n    this.query.name = name;\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return listKeys(this.config, this.query).then(onfulfilled, onrejected);\n  }\n  // private async rateLimit(): Promise<void> {\n  // \tthis.requestCount++;\n  // \tconst now = Date.now();\n  // \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n  // \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n  // \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n  // \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n  // \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n  // \t\t}\n  // \t\tthis.requestCount = 0;\n  // \t}\n  // \tthis.lastRequestTime = Date.now();\n  // }\n  async *[Symbol.asyncIterator]() {\n    let hasMore = true;\n    let offset = 0;\n    while (hasMore) {\n      this.query.offset = offset;\n      const items = await listKeys(this.config, this.query);\n      for (const item of items) {\n        yield item;\n      }\n      if (items.length === 0) {\n        hasMore = false;\n      } else {\n        offset += items.length;\n      }\n    }\n  }\n  async all() {\n    const allItems = [];\n    for await (const item of this) {\n      allItems.push(item);\n    }\n    return allItems;\n  }\n};\n\n// src/core/classes/gateways/Gateways.ts\nvar Gateways = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.public = new PublicGateways(config);\n    this.private = new PrivateGateways(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n};\n\n// src/core/classes/gateways/OptimizeImageCreateSignedUrl.ts\nvar OptimizeImageCreateAccessLink = class {\n  constructor(config, urlOpts) {\n    this.imgOpts = {};\n    this.config = config;\n    this.urlOpts = urlOpts;\n  }\n  optimizeImage(options) {\n    this.imgOpts = { ...this.imgOpts, ...options };\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return createAccessLink(this.config, this.urlOpts, this.imgOpts).then(\n      onfulfilled,\n      onrejected\n    );\n  }\n};\n\n// src/core/classes/gateways/OptimizeImageGetCid.ts\nvar OptimizeImageGetCid = class {\n  constructor(config, cid, gatewayType) {\n    this.options = {};\n    this.config = config;\n    this.cid = cid;\n    this.gatewayType = gatewayType;\n  }\n  optimizeImage(options) {\n    this.options = { ...this.options, ...options };\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return getCid(this.config, this.cid, this.gatewayType, this.options).then(\n      onfulfilled,\n      onrejected\n    );\n  }\n};\n\n// src/core/classes/gateways/PrivateGateways.ts\nvar PrivateGateways = class {\n  constructor(config) {\n    this.config = config;\n  }\n  get(cid) {\n    return new OptimizeImageGetCid(this.config, cid, \"files\");\n  }\n  createAccessLink(options) {\n    return new OptimizeImageCreateAccessLink(this.config, options);\n  }\n};\n\n// src/core/classes/gateways/PublicGateways.ts\nvar PublicGateways = class {\n  constructor(config) {\n    this.config = config;\n  }\n  get(cid) {\n    return new OptimizeImageGetCid(this.config, cid, \"ipfs\");\n  }\n  convert(url, gatewayPrefix) {\n    return convertIPFSUrl(this.config, url, gatewayPrefix);\n  }\n};\n\n// src/core/functions/files/getFile.ts\nvar getFile = async (config, id, privacy) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      ...config.customHeaders\n    };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/getFile\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(`${endpoint}/files/${privacy}/${id}`, {\n      method: \"GET\",\n      headers\n    });\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    const resData = res.data;\n    return resData;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing getGroup: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while getting info for a group\"\n    );\n  }\n};\n\n// src/core/classes/files/FilterFiles.ts\nvar FilterFiles = class {\n  // rate limit vars\n  // private requestCount = 0;\n  // private lastRequestTime = 0;\n  // private readonly MAX_REQUESTS_PER_MINUTE = 30;\n  // private readonly MINUTE_IN_MS = 60000;\n  constructor(config, privacy) {\n    this.query = {};\n    this.config = config;\n    this.privacy = privacy;\n  }\n  name(name) {\n    this.query.name = name;\n    return this;\n  }\n  group(group) {\n    this.query.group = group;\n    return this;\n  }\n  cid(cid) {\n    this.query.cid = cid;\n    return this;\n  }\n  mimeType(mimeType) {\n    this.query.mimeType = mimeType;\n    return this;\n  }\n  order(order) {\n    this.query.order = order;\n    return this;\n  }\n  limit(limit) {\n    this.query.limit = limit;\n    return this;\n  }\n  cidPending(cidPending) {\n    this.query.cidPending = cidPending;\n    return this;\n  }\n  keyvalues(keyvalues) {\n    this.query.metadata = keyvalues;\n    return this;\n  }\n  noGroup(noGroup) {\n    this.query.noGroup = noGroup;\n    return this;\n  }\n  pageToken(pageToken) {\n    this.query.pageToken = pageToken;\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return this.fetchPage().then(onfulfilled, onrejected);\n  }\n  async fetchPage() {\n    if (this.currentPageToken) {\n      this.query.pageToken = this.currentPageToken;\n    }\n    const response = await listFiles(this.config, this.privacy, this.query);\n    this.currentPageToken = response.next_page_token;\n    return response;\n  }\n  // // rate limit, hopefully temporary?\n  // private async rateLimit(): Promise<void> {\n  // \tthis.requestCount++;\n  // \tconst now = Date.now();\n  // \tif (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n  // \t\tconst timePassedSinceLastRequest = now - this.lastRequestTime;\n  // \t\tif (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n  // \t\t\tconst delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n  // \t\t\tawait new Promise((resolve) => setTimeout(resolve, delayTime));\n  // \t\t}\n  // \t\tthis.requestCount = 0;\n  // \t}\n  // \tthis.lastRequestTime = Date.now();\n  // }\n  async *[Symbol.asyncIterator]() {\n    while (true) {\n      const items = await this.fetchPage();\n      for (const item of items.files) {\n        yield item;\n      }\n      if (!this.currentPageToken) {\n        break;\n      }\n    }\n  }\n  async all() {\n    const allItems = [];\n    for await (const item of this) {\n      allItems.push(item);\n    }\n    return allItems;\n  }\n};\n\n// src/core/classes/files/FilterQueue.ts\nvar FilterQueue = class {\n  constructor(config) {\n    this.query = {};\n    // rate limit vars\n    this.requestCount = 0;\n    this.lastRequestTime = 0;\n    this.MAX_REQUESTS_PER_MINUTE = 30;\n    this.MINUTE_IN_MS = 6e4;\n    this.config = config;\n  }\n  cid(cid) {\n    this.query.cid = cid;\n    return this;\n  }\n  status(status) {\n    this.query.status = status;\n    return this;\n  }\n  pageLimit(limit) {\n    this.query.limit = limit;\n    return this;\n  }\n  pageToken(pageToken) {\n    this.query.pageToken = pageToken;\n    return this;\n  }\n  async fetchPage() {\n    if (this.currentPageToken) {\n      this.query.pageToken = this.currentPageToken;\n    }\n    const response = await queue(this.config, this.query);\n    this.currentPageToken = response.next_page_token;\n    return response;\n  }\n  sort(sort) {\n    this.query.sort = sort;\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    return queue(this.config, this.query).then(onfulfilled, onrejected);\n  }\n  // rate limit, hopefully temporary?\n  async rateLimit() {\n    this.requestCount++;\n    const now = Date.now();\n    if (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n      const timePassedSinceLastRequest = now - this.lastRequestTime;\n      if (timePassedSinceLastRequest < this.MINUTE_IN_MS) {\n        const delayTime = this.MINUTE_IN_MS - timePassedSinceLastRequest;\n        await new Promise((resolve) => setTimeout(resolve, delayTime));\n      }\n      this.requestCount = 0;\n    }\n    this.lastRequestTime = Date.now();\n  }\n  async *[Symbol.asyncIterator]() {\n    while (true) {\n      const items = await this.fetchPage();\n      for (const item of items.jobs) {\n        yield item;\n      }\n      if (!this.currentPageToken) {\n        break;\n      }\n    }\n  }\n  async all() {\n    const allItems = [];\n    for await (const item of this) {\n      allItems.push(item);\n    }\n    return allItems;\n  }\n};\n\n// src/core/classes/files/PublicFiles.ts\nvar PublicFiles = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  list() {\n    return new FilterFiles(this.config, \"public\");\n  }\n  get(id) {\n    return getFile(this.config, id, \"public\");\n  }\n  delete(files) {\n    return deleteFile(this.config, files, \"public\");\n  }\n  update(options) {\n    return updateFile(this.config, options, \"public\");\n  }\n  addSwap(options) {\n    return swapCid(this.config, options, \"public\");\n  }\n  getSwapHistory(options) {\n    return swapHistory(this.config, options, \"public\");\n  }\n  deleteSwap(cid) {\n    return deleteSwap(this.config, cid, \"public\");\n  }\n  queue() {\n    return new FilterQueue(this.config);\n  }\n  deletePinRequest(requestId) {\n    return deletePinRequest(this.config, requestId);\n  }\n};\n\n// src/core/classes/files/PrivateFiles.ts\nvar PrivateFiles = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  list() {\n    return new FilterFiles(this.config, \"private\");\n  }\n  get(id) {\n    return getFile(this.config, id, \"private\");\n  }\n  delete(files) {\n    return deleteFile(this.config, files, \"private\");\n  }\n  update(options) {\n    return updateFile(this.config, options, \"private\");\n  }\n  addSwap(options) {\n    return swapCid(this.config, options, \"private\");\n  }\n  getSwapHistory(options) {\n    return swapHistory(this.config, options, \"private\");\n  }\n  deleteSwap(cid) {\n    return deleteSwap(this.config, cid, \"private\");\n  }\n  vectorize(fileId) {\n    return vectorizeFile(this.config, fileId);\n  }\n  queryVectors(options) {\n    return vectorizeQuery(this.config, options);\n  }\n  deleteVectors(fileId) {\n    return deleteFileVectors(this.config, fileId);\n  }\n};\n\n// src/core/classes/files/Files.ts\nvar Files = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.public = new PublicFiles(config);\n    this.private = new PrivateFiles(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n};\n\n// src/core/classes/uploads/UploadBuilder.ts\nvar UploadBuilder = class {\n  constructor(config, uploadFunction, ...args) {\n    this.metadata = {};\n    this.config = config;\n    this.uploadFunction = uploadFunction;\n    this.args = args;\n  }\n  // Replace addMetadata with these two methods:\n  name(name) {\n    if (!this.metadata) {\n      this.metadata = {};\n    }\n    this.metadata.name = name;\n    return this;\n  }\n  keyvalues(keyvalues) {\n    if (!this.metadata) {\n      this.metadata = {};\n    }\n    this.metadata.keyvalues = keyvalues;\n    return this;\n  }\n  key(jwt) {\n    this.keys = jwt;\n    return this;\n  }\n  vectorize() {\n    this.vector = true;\n    return this;\n  }\n  url(url) {\n    this.uploadUrl = url;\n    return this;\n  }\n  // cidVersion(v: 0 | 1): UploadBuilder<T> {\n  // \tthis.version = v;\n  // \treturn this;\n  // }\n  group(groupId) {\n    this.groupId = groupId;\n    return this;\n  }\n  streamable() {\n    this.isStreamable = true;\n    return this;\n  }\n  peerAddress(peerAddresses) {\n    this.peerAddresses = peerAddresses;\n    return this;\n  }\n  then(onfulfilled, onrejected) {\n    const options = this.args[this.args.length - 1] || {};\n    if (this.metadata) {\n      options.metadata = this.metadata;\n    }\n    if (this.keys) {\n      options.keys = this.keys;\n    }\n    if (this.groupId) {\n      options.groupId = this.groupId;\n    }\n    if (this.vector) {\n      options.vectorize = this.vector;\n    }\n    if (this.uploadUrl) {\n      options.url = this.uploadUrl;\n    }\n    if (this.isStreamable) {\n      options.streamable = this.isStreamable;\n    }\n    if (this.peerAddresses) {\n      options.peerAddresses = this.peerAddresses;\n    }\n    this.args[this.args.length - 1] = options;\n    return this.uploadFunction(this.config, ...this.args).then(\n      onfulfilled,\n      onrejected\n    );\n  }\n};\n\n// src/core/classes/uploads/PublicUpload.ts\nvar PublicUpload = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  file(file, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, file2, options2) => uploadFile(config, file2, \"public\", options2),\n      file,\n      options\n    );\n  }\n  fileArray(files, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, file, options2) => uploadFileArray(config, file, \"public\", options2),\n      files,\n      options\n    );\n  }\n  base64(base64String, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, base64String2, options2) => uploadBase64(config, base64String2, \"public\", options2),\n      base64String,\n      options\n    );\n  }\n  url(url, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, url2, options2) => uploadUrl(config, url2, \"public\", options2),\n      url,\n      options\n    );\n  }\n  json(data, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, data2, options2) => uploadJson(config, data2, \"public\", options2),\n      data,\n      options\n    );\n  }\n  cid(cid, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, cid2, options2) => uploadCid(config, cid2, options2),\n      cid,\n      options\n    );\n  }\n  createSignedURL(options) {\n    return createSignedUploadURL(this.config, options, \"public\");\n  }\n};\n\n// src/core/classes/uploads/PrivateUpload.ts\nvar PrivateUpload = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  file(file, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, file2, options2) => uploadFile(config, file2, \"private\", options2),\n      file,\n      options\n    );\n  }\n  // Reserved for future release\n  // fileArray(\n  // \tfiles: FileObject[],\n  // \toptions?: UploadOptions,\n  // ): UploadBuilder<UploadResponse> {\n  // \treturn new UploadBuilder(\n  // \t\tthis.config,\n  // \t\t(config, file, options) =>\n  // \t\t\tuploadFileArray(config, file, \"private\", options),\n  // \t\tfiles,\n  // \t\toptions,\n  // \t);\n  // }\n  base64(base64String, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, base64String2, options2) => uploadBase64(config, base64String2, \"private\", options2),\n      base64String,\n      options\n    );\n  }\n  url(url, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, url2, options2) => uploadUrl(config, url2, \"private\", options2),\n      url,\n      options\n    );\n  }\n  json(data, options) {\n    return new UploadBuilder(\n      this.config,\n      (config, data2, options2) => uploadJson(config, data2, \"private\", options2),\n      data,\n      options\n    );\n  }\n  createSignedURL(options) {\n    return createSignedUploadURL(this.config, options, \"private\");\n  }\n};\n\n// src/core/classes/uploads/Upload.ts\nvar Upload = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.public = new PublicUpload(config);\n    this.private = new PrivateUpload(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n};\n\n// src/core/functions/signatures/addSignature.ts\nvar addSignature = async (config, options, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  const data = JSON.stringify({\n    signature: options.signature,\n    address: options.address\n  });\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = { ...config.customHeaders };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/addSignature\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/files/${network}/signature/${options.cid}`,\n      {\n        method: \"POST\",\n        headers,\n        body: data\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      if (request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n          \"Unauthorized signing, you must be the original owner of the file and it must not have a signature\",\n          request.status,\n          {\n            error: errorData,\n            code: \"HTTP_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.data;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing addSignature: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while adding signature to CID\"\n    );\n  }\n};\n\n// src/core/functions/signatures/getSignature.ts\nvar getSignature = async (config, cid, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = { ...config.customHeaders };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/getSignature\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/files/${network}/signature/${cid}`,\n      {\n        method: \"GET\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    const res = await request.json();\n    return res.data;\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing getSignature: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while fetching signature for CID\"\n    );\n  }\n};\n\n// src/core/functions/signatures/removeSignature.ts\nvar removeSignature = async (config, cid, network) => {\n  if (!config) {\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Pinata configuration is missing\");\n  }\n  let headers;\n  if (config.customHeaders && Object.keys(config.customHeaders).length > 0) {\n    headers = { ...config.customHeaders };\n  } else {\n    headers = {\n      Authorization: `Bearer ${config.pinataJwt}`,\n      \"Content-Type\": \"application/json\",\n      Source: \"sdk/removeSignature\"\n    };\n  }\n  let endpoint = \"https://api.pinata.cloud/v3\";\n  if (config.endpointUrl) {\n    endpoint = config.endpointUrl;\n  }\n  try {\n    const request = await fetch(\n      `${endpoint}/files/${network}/signature/${cid}`,\n      {\n        method: \"DELETE\",\n        headers\n      }\n    );\n    if (!request.ok) {\n      const errorData = await request.text();\n      if (request.status === 401 || request.status === 403) {\n        throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthenticationError(\n          `Authentication failed: ${errorData}`,\n          request.status,\n          {\n            error: errorData,\n            code: \"AUTH_ERROR\",\n            metadata: {\n              requestUrl: request.url\n            }\n          }\n        );\n      }\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.NetworkError(`HTTP error: ${errorData}`, request.status, {\n        error: errorData,\n        code: \"HTTP_ERROR\",\n        metadata: {\n          requestUrl: request.url\n        }\n      });\n    }\n    return \"OK\";\n  } catch (error) {\n    if (error instanceof _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(`Error processing addSignature: ${error.message}`);\n    }\n    throw new _chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.PinataError(\n      \"An unknown error occurred while adding signature to CID\"\n    );\n  }\n};\n\n// src/core/classes/signatures/PublicSignatures.ts\nvar PublicSignatures = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n  add(options) {\n    return addSignature(this.config, options, \"public\");\n  }\n  get(cid) {\n    return getSignature(this.config, cid, \"public\");\n  }\n  delete(cid) {\n    return removeSignature(this.config, cid, \"public\");\n  }\n};\n\n// src/core/classes/signatures/Signatures.ts\nvar Signatures = class {\n  //private: PrivateSignatures\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.public = new PublicSignatures(config);\n  }\n  updateConfig(newConfig) {\n    this.config = newConfig;\n  }\n};\n\n// src/core/pinataSDK.ts\nvar PinataSDK = class {\n  constructor(config) {\n    this.config = (0,_chunk_ME652TQB_mjs__WEBPACK_IMPORTED_MODULE_0__.formatConfig)(config);\n    this.files = new Files(this.config);\n    this.upload = new Upload(this.config);\n    this.gateways = new Gateways(this.config);\n    this.keys = new Keys(this.config);\n    this.groups = new Groups(this.config);\n    this.analytics = new Analytics(this.config);\n    this.signatures = new Signatures(this.config);\n  }\n  setNewHeaders(headers) {\n    if (!this.config) {\n      this.config = { pinataJwt: \"\", customHeaders: {} };\n    }\n    this.config.customHeaders = { ...this.config.customHeaders, ...headers };\n    this.files.updateConfig(this.config);\n    this.upload.updateConfig(this.config);\n    this.gateways.updateConfig(this.config);\n    this.keys.updateConfig(this.config);\n    this.groups.updateConfig(this.config);\n    this.analytics.updateConfig(this.config);\n    this.signatures.updateConfig(this.config);\n  }\n  setNewJwt(jwt) {\n    if (!this.config) {\n      this.config = { pinataJwt: \"\" };\n    }\n    this.config.pinataJwt = jwt;\n    this.files.updateConfig(this.config);\n    this.upload.updateConfig(this.config);\n    this.gateways.updateConfig(this.config);\n    this.keys.updateConfig(this.config);\n    this.groups.updateConfig(this.config);\n    this.analytics.updateConfig(this.config);\n    this.signatures.updateConfig(this.config);\n  }\n  testAuthentication() {\n    return testAuthentication(this.config);\n  }\n};\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcGluYXRhL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEk7QUFDK0I7O0FBRTdLO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0VBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUyxzQ0FBc0Msa0JBQWtCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixNQUFNO0FBQ047QUFDQSxpQ0FBaUMsaUJBQWlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0VBQW1CO0FBQ3JDLG9DQUFvQyxVQUFVO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZEQUFZLGdCQUFnQixVQUFVO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oseUJBQXlCLDREQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw0REFBVztBQUMzQiw0Q0FBNEMsY0FBYztBQUMxRDtBQUNBO0FBQ0EsY0FBYyw0REFBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdFQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVB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QUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlFQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ2hCO0FBQ2hoQjtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVTRVJcXEZpbGVEYXRhXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxwaW5hdGFcXGRpc3RcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIEF1dGhlbnRpY2F0aW9uRXJyb3IsIE5ldHdvcmtFcnJvciwgUGluYXRhRXJyb3IsIGNvbnZlcnRUb0Rlc2lyZWRHYXRld2F5LCBmb3JtYXRDb25maWcgfSBmcm9tICcuL2NodW5rLU1FNjUyVFFCLm1qcyc7XG5leHBvcnQgeyBBdXRoZW50aWNhdGlvbkVycm9yLCBOZXR3b3JrRXJyb3IsIFBpbmF0YUVycm9yLCBWYWxpZGF0aW9uRXJyb3IsIGNvbnRhaW5zQ0lELCBjb252ZXJ0VG9EZXNpcmVkR2F0ZXdheSwgZm9ybWF0Q29uZmlnLCBnZXRGaWxlSWRGcm9tVXJsIH0gZnJvbSAnLi9jaHVuay1NRTY1MlRRQi5tanMnO1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvYW5hbHl0aWNzL2FuYWx5dGljc0RhdGVJbnRlcnZhbC50c1xudmFyIGFuYWx5dGljc0RhdGVJbnRlcnZhbCA9IGFzeW5jIChjb25maWcsIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGlmIChvcHRpb25zKSB7XG4gICAgY29uc3Qge1xuICAgICAgY2lkLFxuICAgICAgZ2F0ZXdheV9kb21haW4sXG4gICAgICBzdGFydF9kYXRlLFxuICAgICAgZW5kX2RhdGUsXG4gICAgICBmaWxlX25hbWUsXG4gICAgICB1c2VyX2FnZW50LFxuICAgICAgY291bnRyeSxcbiAgICAgIHJlZ2lvbixcbiAgICAgIHJlZmVyZXIsXG4gICAgICBsaW1pdCxcbiAgICAgIHNvcnRfb3JkZXIsXG4gICAgICBkYXRlX2ludGVydmFsLFxuICAgICAgc29ydF9ieVxuICAgIH0gPSBvcHRpb25zO1xuICAgIGlmIChjaWQpIHBhcmFtcy5hcHBlbmQoXCJjaWRcIiwgY2lkKTtcbiAgICBpZiAoZ2F0ZXdheV9kb21haW4pIHBhcmFtcy5hcHBlbmQoXCJnYXRld2F5X2RvbWFpblwiLCBnYXRld2F5X2RvbWFpbik7XG4gICAgaWYgKHN0YXJ0X2RhdGUpIHBhcmFtcy5hcHBlbmQoXCJzdGFydF9kYXRlXCIsIHN0YXJ0X2RhdGUpO1xuICAgIGlmIChlbmRfZGF0ZSkgcGFyYW1zLmFwcGVuZChcImVuZF9kYXRlXCIsIGVuZF9kYXRlKTtcbiAgICBpZiAoZmlsZV9uYW1lKSBwYXJhbXMuYXBwZW5kKFwiZmlsZV9uYW1lXCIsIGZpbGVfbmFtZSk7XG4gICAgaWYgKHVzZXJfYWdlbnQpIHBhcmFtcy5hcHBlbmQoXCJ1c2VyX2FnZW50XCIsIHVzZXJfYWdlbnQudG9TdHJpbmcoKSk7XG4gICAgaWYgKGNvdW50cnkpIHBhcmFtcy5hcHBlbmQoXCJjb3VudHJ5XCIsIGNvdW50cnkudG9TdHJpbmcoKSk7XG4gICAgaWYgKHJlZ2lvbikgcGFyYW1zLmFwcGVuZChcInJlZ2lvblwiLCByZWdpb24pO1xuICAgIGlmIChyZWZlcmVyKSBwYXJhbXMuYXBwZW5kKFwicmVmZXJlclwiLCByZWZlcmVyLnRvU3RyaW5nKCkpO1xuICAgIGlmIChsaW1pdCkgcGFyYW1zLmFwcGVuZChcImxpbWl0XCIsIGxpbWl0LnRvU3RyaW5nKCkpO1xuICAgIGlmIChzb3J0X29yZGVyKSBwYXJhbXMuYXBwZW5kKFwic29ydF9vcmRlclwiLCBzb3J0X29yZGVyKTtcbiAgICBpZiAoc29ydF9ieSkgcGFyYW1zLmFwcGVuZChcInNvcnRfYnlcIiwgc29ydF9ieSk7XG4gICAgaWYgKGRhdGVfaW50ZXJ2YWwpIHBhcmFtcy5hcHBlbmQoXCJieVwiLCBkYXRlX2ludGVydmFsKTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgY29uc3QgdXJsID0gYCR7ZW5kcG9pbnR9L2lwZnMvZ2F0ZXdheV9hbmFseXRpY3NfdGltZV9zZXJpZXM/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuICB0cnkge1xuICAgIGxldCBoZWFkZXJzO1xuICAgIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgICAgaGVhZGVycyA9IHsgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgICAgU291cmNlOiBcInNkay9hbmFseXRpY3NEYXRlSW50ZXJ2YWxcIlxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgcmVzRGF0YSA9IHJlcy5kYXRhO1xuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgYEVycm9yIHByb2Nlc3NpbmcgYW5heXRpY3MgdXNhZ2U6ICR7ZXJyb3IubWVzc2FnZX1gXG4gICAgICApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgZ2F0ZXdheSB1c2FnZVwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2FuYWx5dGljcy9hbmFseXRpY3NUb3BVc2FnZS50c1xudmFyIGFuYWx5dGljc1RvcFVzYWdlID0gYXN5bmMgKGNvbmZpZywgb3B0aW9ucykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBjaWQsXG4gICAgICBnYXRld2F5X2RvbWFpbixcbiAgICAgIHN0YXJ0X2RhdGUsXG4gICAgICBlbmRfZGF0ZSxcbiAgICAgIGZpbGVfbmFtZSxcbiAgICAgIHVzZXJfYWdlbnQsXG4gICAgICBjb3VudHJ5LFxuICAgICAgcmVnaW9uLFxuICAgICAgcmVmZXJlcixcbiAgICAgIGxpbWl0LFxuICAgICAgc29ydF9vcmRlcixcbiAgICAgIHNvcnRfYnksXG4gICAgICBhdHRyaWJ1dGVcbiAgICB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBkb21haW4gPSBnYXRld2F5X2RvbWFpbiB8fCBjb25maWcucGluYXRhR2F0ZXdheTtcbiAgICBpZiAoZG9tYWluKSB7XG4gICAgICBjb25zdCBjbGVhbkRvbWFpbiA9IGRvbWFpbi5yZXBsYWNlKC9eaHR0cHM/OlxcL1xcLy8sIFwiXCIpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcImdhdGV3YXlfZG9tYWluXCIsIGNsZWFuRG9tYWluKTtcbiAgICB9XG4gICAgaWYgKGNpZCkge1xuICAgICAgcGFyYW1zLmFwcGVuZChcImNpZFwiLCBjaWQpO1xuICAgIH1cbiAgICBpZiAoc3RhcnRfZGF0ZSkgcGFyYW1zLmFwcGVuZChcInN0YXJ0X2RhdGVcIiwgc3RhcnRfZGF0ZSk7XG4gICAgaWYgKGVuZF9kYXRlKSBwYXJhbXMuYXBwZW5kKFwiZW5kX2RhdGVcIiwgZW5kX2RhdGUpO1xuICAgIGlmIChmaWxlX25hbWUpIHBhcmFtcy5hcHBlbmQoXCJmaWxlX25hbWVcIiwgZmlsZV9uYW1lKTtcbiAgICBpZiAodXNlcl9hZ2VudCkgcGFyYW1zLmFwcGVuZChcInVzZXJfYWdlbnRcIiwgdXNlcl9hZ2VudC50b1N0cmluZygpKTtcbiAgICBpZiAoY291bnRyeSkgcGFyYW1zLmFwcGVuZChcImNvdW50cnlcIiwgY291bnRyeS50b1N0cmluZygpKTtcbiAgICBpZiAocmVnaW9uKSBwYXJhbXMuYXBwZW5kKFwicmVnaW9uXCIsIHJlZ2lvbik7XG4gICAgaWYgKHJlZmVyZXIpIHBhcmFtcy5hcHBlbmQoXCJyZWZlcmVyXCIsIHJlZmVyZXIudG9TdHJpbmcoKSk7XG4gICAgaWYgKGxpbWl0KSBwYXJhbXMuYXBwZW5kKFwibGltaXRcIiwgbGltaXQudG9TdHJpbmcoKSk7XG4gICAgaWYgKHNvcnRfb3JkZXIpIHBhcmFtcy5hcHBlbmQoXCJzb3J0X29yZGVyXCIsIHNvcnRfb3JkZXIpO1xuICAgIGlmIChzb3J0X2J5KSBwYXJhbXMuYXBwZW5kKFwic29ydF9ieVwiLCBzb3J0X2J5KTtcbiAgICBpZiAoYXR0cmlidXRlKSBwYXJhbXMuYXBwZW5kKFwiYnlcIiwgYXR0cmlidXRlKTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgY29uc3QgdXJsID0gYCR7ZW5kcG9pbnR9L2lwZnMvZ2F0ZXdheV9hbmFseXRpY3NfdG9wPyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgdHJ5IHtcbiAgICBsZXQgaGVhZGVycztcbiAgICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGhlYWRlcnMgPSB7IC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlcnMgPSB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICAgIFNvdXJjZTogXCJzZGsvYW5hbHl0aWNzVG9wVXNhZ2VcIlxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgIGBFcnJvciBwcm9jZXNzaW5nIGFuYXl0aWNzIHVzYWdlOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGdhdGV3YXkgdXNhZ2VcIlxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9hdXRoZW50aWNhdGlvbi90ZXN0QXV0aGVudGljYXRpb24udHNcbnZhciB0ZXN0QXV0aGVudGljYXRpb24gPSBhc3luYyAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvdGVzdEF1dGhlbnRpY2F0aW9uXCJcbiAgICB9O1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9kYXRhL3Rlc3RBdXRoZW50aWNhdGlvbmAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIHJldHVybiByZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgICBgRXJyb3IgcHJvY2Vzc2luZyBhdXRoZW50aWNhdGlvbjogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSB0ZXN0aW5nIGF1dGhlbnRpY2F0aW9uXCJcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZmlsZXMvZGVsZXRlLnRzXG52YXIgd2FpdCA9IChtaWxsaXNlY29uZHMpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgc2V0VGltZW91dChyZXNvbHZlLCBtaWxsaXNlY29uZHMpO1xuICB9KTtcbn07XG52YXIgZGVsZXRlRmlsZSA9IGFzeW5jIChjb25maWcsIGZpbGVzLCBwcml2YWN5KSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3QgcmVzcG9uc2VzID0gW107XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvZGVsZXRlRmlsZVwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgZm9yIChjb25zdCBpZCBvZiBmaWxlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9maWxlcy8ke3ByaXZhY3l9LyR7aWR9YCwge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnNcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgd2FpdCgzMDApO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVzcG9uc2UudXJsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3JgLCByZXNwb25zZS5zdGF0dXMsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICByZXF1ZXN0VXJsOiByZXNwb25zZS51cmxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzcG9uc2VzLnB1c2goe1xuICAgICAgICBpZCxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGV0IGVycm9yTWVzc2FnZTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gYEVycm9yIGRlbGV0aW5nIGZpbGUgJHtpZH06ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gYEFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZGVsZXRpbmcgZmlsZSAke2lkfWA7XG4gICAgICB9XG4gICAgICByZXNwb25zZXMucHVzaCh7XG4gICAgICAgIGlkLFxuICAgICAgICBzdGF0dXM6IGVycm9yTWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNwb25zZXM7XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZmlsZXMvZGVsZXRlRmlsZVZlY3RvcnMudHNcbnZhciBkZWxldGVGaWxlVmVjdG9ycyA9IGFzeW5jIChjb25maWcsIGZpbGVJZCkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvdmVjdG9yaXplRmlsZVwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vdXBsb2Fkcy5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy51cGxvYWRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy51cGxvYWRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L3ZlY3Rvcml6ZS9maWxlcy8ke2ZpbGVJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgYEVycm9yIHByb2Nlc3NpbmcgdmVjdG9yaXplIGZpbGU6ICR7ZXJyb3IubWVzc2FnZX1gXG4gICAgICApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHZlY3Rvcml6aW5nIGZpbGVcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy9kZWxldGVTd2FwLnRzXG52YXIgZGVsZXRlU3dhcCA9IGFzeW5jIChjb25maWcsIGNpZCwgbmV0d29yaykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL2RlbGV0ZVN3YXBcIlxuICAgIH07XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9maWxlcy8ke25ldHdvcmt9L3N3YXAvJHtjaWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKGBBdXRoZW50aWNhdGlvbiBmYWlsZWRgLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgICAgXCJVbmF1dGhvcml6ZWQgQ0lEIFN3YXAgRGVsZXRpb25cIixcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJVTkFVVEhPUklaRURcIlxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcIkNJRCBub3QgcGlubmVkIHRvIGFjY291bnRcIiwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yIG9jY3VycmVkYCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJORVRXT1JLX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVxdWVzdC5zdGF0dXNUZXh0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgYEVycm9yIHByb2Nlc3NpbmcgZGVsZXRlU3dhcDogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAge1xuICAgICAgICAgIGNvZGU6IFwiREVMRVRFX1NXQVBfRVJST1JcIlxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZGVsZXRpbmcgc3dhcFwiLFxuICAgICAgdm9pZCAwLFxuICAgICAge1xuICAgICAgICBjb2RlOiBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfVxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy9saXN0LnRzXG52YXIgbGlzdEZpbGVzID0gYXN5bmMgKGNvbmZpZywgcHJpdmFjeSwgb3B0aW9ucykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgZ3JvdXAsXG4gICAgICBjaWQsXG4gICAgICBvcmRlcixcbiAgICAgIGxpbWl0LFxuICAgICAgbWltZVR5cGUsXG4gICAgICBwYWdlVG9rZW4sXG4gICAgICBjaWRQZW5kaW5nLFxuICAgICAgbWV0YWRhdGEsXG4gICAgICBub0dyb3VwXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgaWYgKGxpbWl0KSBwYXJhbXMuYXBwZW5kKFwibGltaXRcIiwgbGltaXQudG9TdHJpbmcoKSk7XG4gICAgaWYgKG5hbWUpIHBhcmFtcy5hcHBlbmQoXCJuYW1lXCIsIG5hbWUpO1xuICAgIGlmIChncm91cCkgcGFyYW1zLmFwcGVuZChcImdyb3VwXCIsIGdyb3VwKTtcbiAgICBpZiAoY2lkKSBwYXJhbXMuYXBwZW5kKFwiY2lkXCIsIGNpZCk7XG4gICAgaWYgKG1pbWVUeXBlKSBwYXJhbXMuYXBwZW5kKFwibWltZVR5cGVcIiwgbWltZVR5cGUpO1xuICAgIGlmIChvcmRlcikgcGFyYW1zLmFwcGVuZChcIm9yZGVyXCIsIG9yZGVyKTtcbiAgICBpZiAocGFnZVRva2VuKSBwYXJhbXMuYXBwZW5kKFwicGFnZVRva2VuXCIsIHBhZ2VUb2tlbik7XG4gICAgaWYgKGNpZFBlbmRpbmcpIHBhcmFtcy5hcHBlbmQoXCJjaWRQZW5kaW5nXCIsIFwidHJ1ZVwiKTtcbiAgICBpZiAobm9Hcm91cCkgcGFyYW1zLmFwcGVuZChcImdyb3VwXCIsIFwibnVsbFwiKTtcbiAgICBpZiAobWV0YWRhdGEgJiYgdHlwZW9mIG1ldGFkYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBPYmplY3QuZW50cmllcyhtZXRhZGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIHBhcmFtcy5hcHBlbmQoYGtleXZhbHVlc1ske2tleS50b1N0cmluZygpfV1gLCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgY29uc3QgdXJsID0gYCR7ZW5kcG9pbnR9L2ZpbGVzLyR7cHJpdmFjeX0/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuICB0cnkge1xuICAgIGxldCBoZWFkZXJzO1xuICAgIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlcnMgPSB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICAgIFNvdXJjZTogXCJzZGsvbGlzdEZpbGVzXCJcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgbGlzdCBmaWxlczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGxpc3RpbmcgZmlsZXNcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy9waW5uZWRGaWxlVXNhZ2UudHNcbnZhciBwaW5uZWRGaWxlQ291bnQgPSBhc3luYyAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWRcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvcGlubmVkRmlsZVVzYWdlXCJcbiAgICB9O1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9kYXRhL3VzZXJQaW5uZWREYXRhVG90YWxgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICByZXR1cm4gcmVzLnBpbl9jb3VudDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgIGBFcnJvciBwcm9jZXNzaW5nIHBpbm5lZEZpbGVVc2FnZTogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIHBpbm5lZCBmaWxlIHVzYWdlXCJcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZmlsZXMvc3dhcENpZC50c1xudmFyIHN3YXBDaWQgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zLCBuZXR3b3JrKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICBzd2FwX2NpZDogb3B0aW9ucy5zd2FwQ2lkXG4gIH0pO1xuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgU291cmNlOiBcInNkay9zd2FwQ2lkXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2VuZHBvaW50fS9maWxlcy8ke25ldHdvcmt9L3N3YXAvJHtvcHRpb25zLmNpZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IGRhdGFcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJVbmF1dGhvcml6ZWQgQ0lEIFN3YXBcIiwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJDSUQgbm90IHBpbm5lZCB0byBhY2NvdW50XCIsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgQ0lEIFN3YXA6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBzd2FwcGluZyBDSURcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy9zd2FwSGlzdG9yeS50c1xudmFyIHN3YXBIaXN0b3J5ID0gYXN5bmMgKGNvbmZpZywgb3B0aW9ucywgbmV0d29yaykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL3N3YXBIaXN0b3J5XCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2VuZHBvaW50fS9maWxlcy8ke25ldHdvcmt9L3N3YXAvJHtvcHRpb25zLmNpZH0/ZG9tYWluPSR7b3B0aW9ucy5kb21haW59YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICBoZWFkZXJzXG4gICAgICB9XG4gICAgKTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFwiQ0lEIGRvZXMgbm90IGhhdmUgaGlzdG9yeVwiLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgcmV0dXJuIHJlc0RhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBmZXRjaGluZyBzd2FwIGhpc3Rvcnk6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHN3YXAgaGlzdG9yeVwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2ZpbGVzL3RvdGFsU3RvcmFnZVVzYWdlLnRzXG52YXIgdG90YWxTdG9yYWdlVXNhZ2UgPSBhc3luYyAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWRcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0geyAuLi5jb25maWcuY3VzdG9tSGVhZGVycyB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgU291cmNlOiBcInNkay90b3RhbFN0b3JhZ2VVc2FnZVwiXG4gICAgfTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgJHtlbmRwb2ludH0vZGF0YS91c2VyUGlubmVkRGF0YVRvdGFsYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcy5waW5fc2l6ZV90b3RhbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgIGBFcnJvciBwcm9jZXNzaW5nIHRvdGFsU3RvcmFnZVVzYWdlOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgdG90YWwgc3RvcmFnZSB1c2FnZVwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2ZpbGVzL3VwZGF0ZUZpbGUudHNcbnZhciB1cGRhdGVGaWxlID0gYXN5bmMgKGNvbmZpZywgb3B0aW9ucywgcHJpdmFjeSkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGlmICghb3B0aW9ucy5uYW1lICYmICghb3B0aW9ucy5rZXl2YWx1ZXMgfHwgT2JqZWN0LmtleXMob3B0aW9ucy5rZXl2YWx1ZXMpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxuICAgICAgXCJBdCBsZWFzdCBvbmUgb2YgJ25hbWUnIG9yICdrZXl2YWx1ZXMnIG11c3QgYmUgcHJvdmlkZWRcIlxuICAgICk7XG4gIH1cbiAgY29uc3QgZGF0YSA9IHt9O1xuICBpZiAob3B0aW9ucy5uYW1lICE9PSB2b2lkIDApIHtcbiAgICBkYXRhLm5hbWUgPSBvcHRpb25zLm5hbWU7XG4gIH1cbiAgaWYgKG9wdGlvbnMua2V5dmFsdWVzICYmIE9iamVjdC5rZXlzKG9wdGlvbnMua2V5dmFsdWVzKS5sZW5ndGggPiAwKSB7XG4gICAgZGF0YS5rZXl2YWx1ZXMgPSBvcHRpb25zLmtleXZhbHVlcztcbiAgfVxuICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL3VwZGF0ZU1ldGFkYXRhXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgJHtlbmRwb2ludH0vZmlsZXMvJHtwcml2YWN5fS8ke29wdGlvbnMuaWR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHlcbiAgICB9KTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgdXBkYXRlRmlsZTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIGZpbGVcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy92ZWN0b3JpemVGaWxlLnRzXG52YXIgdmVjdG9yaXplRmlsZSA9IGFzeW5jIChjb25maWcsIGZpbGVJZCkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvdmVjdG9yaXplRmlsZVwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vdXBsb2Fkcy5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy51cGxvYWRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy51cGxvYWRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L3ZlY3Rvcml6ZS9maWxlcy8ke2ZpbGVJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgIGBFcnJvciBwcm9jZXNzaW5nIHZlY3Rvcml6ZSBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSB2ZWN0b3JpemluZyBmaWxlXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZmlsZXMvdmVjdG9yaXplUXVlcnkudHNcbnZhciB2ZWN0b3JpemVRdWVyeSA9IGFzeW5jIChjb25maWcsIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBTb3VyY2U6IFwic2RrL3ZlY3RvclF1ZXJ5XCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly91cGxvYWRzLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLnVwbG9hZFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLnVwbG9hZFVybDtcbiAgfVxuICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHRleHQ6IG9wdGlvbnMucXVlcnlcbiAgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKFxuICAgICAgYCR7ZW5kcG9pbnR9L3ZlY3Rvcml6ZS9ncm91cHMvJHtvcHRpb25zLmdyb3VwSWR9L3F1ZXJ5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keVxuICAgICAgfVxuICAgICk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgaWYgKG9wdGlvbnMucmV0dXJuRmlsZSkge1xuICAgICAgaWYgKHJlc0RhdGEubWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBObyBmaWxlcyByZXR1cm5lZCBpbiBxdWVyeSB0byBmZXRjaGApO1xuICAgICAgfVxuICAgICAgY29uc3QgY2lkID0gcmVzRGF0YS5tYXRjaGVzWzBdLmNpZDtcbiAgICAgIGNvbnN0IGZpbGVSZXMgPSBhd2FpdCBnZXRDaWQoY29uZmlnLCBjaWQsIFwiZmlsZXNcIik7XG4gICAgICByZXR1cm4gZmlsZVJlcztcbiAgICB9XG4gICAgcmV0dXJuIHJlc0RhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgICBgRXJyb3IgcHJvY2Vzc2luZyB2ZWN0b3JpemUgZmlsZTogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdmVjdG9yaXppbmcgZmlsZVwiKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2ZpbGVzL3F1ZXVlLnRzXG52YXIgcXVldWUgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgaW5jbHVkZXNDb3VudDogXCJmYWxzZVwiXG4gIH0pO1xuICBpZiAob3B0aW9ucykge1xuICAgIGNvbnN0IHsgY2lkLCBzdGF0dXMsIHNvcnQsIGxpbWl0LCBwYWdlVG9rZW4gfSA9IG9wdGlvbnM7XG4gICAgaWYgKGNpZCkgcGFyYW1zLmFwcGVuZChcImNpZFwiLCBjaWQudG9TdHJpbmcoKSk7XG4gICAgaWYgKHN0YXR1cykgcGFyYW1zLmFwcGVuZChcInN0YXR1c1wiLCBzdGF0dXMudG9TdHJpbmcoKSk7XG4gICAgaWYgKHNvcnQpIHBhcmFtcy5hcHBlbmQoXCJzb3J0XCIsIHNvcnQudG9TdHJpbmcoKSk7XG4gICAgaWYgKGxpbWl0KSBwYXJhbXMuYXBwZW5kKFwibGltaXRcIiwgbGltaXQudG9TdHJpbmcoKSk7XG4gICAgaWYgKHBhZ2VUb2tlbikgcGFyYW1zLmFwcGVuZChcInBhZ2VUb2tlblwiLCBwYWdlVG9rZW4udG9TdHJpbmcoKSk7XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIGNvbnN0IHVybCA9IGAke2VuZHBvaW50fS9maWxlcy9wdWJsaWMvcGluX2J5X2NpZD8ke3BhcmFtcy50b1N0cmluZygpfWA7XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvcGluSm9ic1wiXG4gICAgfTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgcGluSm9iczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGxpc3RpbmcgcGluIGpvYnNcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy9kZWxldGVQaW5SZXF1ZXN0LnRzXG52YXIgZGVsZXRlUGluUmVxdWVzdCA9IGFzeW5jIChjb25maWcsIGlkKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgU291cmNlOiBcInNkay9kZWxldGVQaW5SZXF1ZXN0XCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzL3B1YmxpYy9waW5fYnlfY2lkLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXNwb25zZS51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yYCwgcmVzcG9uc2Uuc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlc3BvbnNlLnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFwiT0tcIjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIGRlbGV0aW5nIHBpbiBieSByZXF1ZXN0OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBkZWxldGluZyBwaW4gYnkgQ0lEIHJlcXVlc3RcIlxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9nYXRld2F5L2dldENpZC50c1xudmFyIGdldENpZCA9IGFzeW5jIChjb25maWcsIGNpZCwgZ2F0ZXdheVR5cGUsIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBsZXQgZGF0YTtcbiAgbGV0IG5ld1VybCA9IGAke2NvbmZpZz8ucGluYXRhR2F0ZXdheX0vJHtnYXRld2F5VHlwZX0vJHtjaWR9YDtcbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLndpZHRoKSBwYXJhbXMuYXBwZW5kKFwiaW1nLXdpZHRoXCIsIG9wdGlvbnMud2lkdGgudG9TdHJpbmcoKSk7XG4gICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBwYXJhbXMuYXBwZW5kKFwiaW1nLWhlaWdodFwiLCBvcHRpb25zLmhlaWdodC50b1N0cmluZygpKTtcbiAgICBpZiAob3B0aW9ucy5kcHIpIHBhcmFtcy5hcHBlbmQoXCJpbWctZHByXCIsIG9wdGlvbnMuZHByLnRvU3RyaW5nKCkpO1xuICAgIGlmIChvcHRpb25zLmZpdCkgcGFyYW1zLmFwcGVuZChcImltZy1maXRcIiwgb3B0aW9ucy5maXQpO1xuICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHBhcmFtcy5hcHBlbmQoXCJpbWctZ3Jhdml0eVwiLCBvcHRpb25zLmdyYXZpdHkpO1xuICAgIGlmIChvcHRpb25zLnF1YWxpdHkpXG4gICAgICBwYXJhbXMuYXBwZW5kKFwiaW1nLXF1YWxpdHlcIiwgb3B0aW9ucy5xdWFsaXR5LnRvU3RyaW5nKCkpO1xuICAgIGlmIChvcHRpb25zLmZvcm1hdCkgcGFyYW1zLmFwcGVuZChcImltZy1mb3JtYXRcIiwgb3B0aW9ucy5mb3JtYXQpO1xuICAgIGlmIChvcHRpb25zLmFuaW1hdGlvbiAhPT0gdm9pZCAwKVxuICAgICAgcGFyYW1zLmFwcGVuZChcImltZy1hbmltXCIsIG9wdGlvbnMuYW5pbWF0aW9uLnRvU3RyaW5nKCkpO1xuICAgIGlmIChvcHRpb25zLnNoYXJwZW4pXG4gICAgICBwYXJhbXMuYXBwZW5kKFwiaW1nLXNoYXJwZW5cIiwgb3B0aW9ucy5zaGFycGVuLnRvU3RyaW5nKCkpO1xuICAgIGlmIChvcHRpb25zLm9uRXJyb3IgPT09IHRydWUpIHBhcmFtcy5hcHBlbmQoXCJpbWctb25lcnJvclwiLCBcInJlZGlyZWN0XCIpO1xuICAgIGlmIChvcHRpb25zLm1ldGFkYXRhKSBwYXJhbXMuYXBwZW5kKFwiaW1nLW1ldGFkYXRhXCIsIG9wdGlvbnMubWV0YWRhdGEpO1xuICB9XG4gIGlmIChjb25maWc/LnBpbmF0YUdhdGV3YXlLZXkpIHtcbiAgICBwYXJhbXMuYXBwZW5kKFwicGluYXRhR2F0ZXdheVRva2VuXCIsIGNvbmZpZy5waW5hdGFHYXRld2F5S2V5KTtcbiAgfVxuICBjb25zdCBxdWVyeVN0cmluZyA9IHBhcmFtcy50b1N0cmluZygpO1xuICBpZiAocXVlcnlTdHJpbmcpIHtcbiAgICBuZXdVcmwgKz0gYD8ke3F1ZXJ5U3RyaW5nfWA7XG4gIH1cbiAgaWYgKGdhdGV3YXlUeXBlID09PSBcImlwZnNcIikge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChuZXdVcmwpO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBGYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY29udGVudFR5cGUgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpPy5zcGxpdChcIjtcIilbMF0gfHwgbnVsbDtcbiAgICBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkge1xuICAgICAgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIH0gZWxzZSBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKFwidGV4dC9cIikpIHtcbiAgICAgIGRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IGF3YWl0IHJlcXVlc3QuYmxvYigpO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSB7XG4gICAgICBkYXRhLFxuICAgICAgY29udGVudFR5cGVcbiAgICB9O1xuICAgIHJldHVybiByZXM7XG4gIH1cbiAgY29uc3QgZGF0ZSA9IE1hdGguZmxvb3IoKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLyAxZTMpO1xuICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHVybDogbmV3VXJsLFxuICAgIGRhdGUsXG4gICAgZXhwaXJlczogMzAsXG4gICAgbWV0aG9kOiBcIkdFVFwiXG4gIH0pO1xuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvZ2V0Q2lkXCJcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNpZ25lZFVybFJlcXVlc3QgPSBhd2FpdCBmZXRjaChgJHtlbmRwb2ludH0vZmlsZXMvc2lnbmAsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogcGF5bG9hZFxuICB9KTtcbiAgY29uc3Qgc2lnbmVkVXJsID0gYXdhaXQgc2lnbmVkVXJsUmVxdWVzdC5qc29uKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKHNpZ25lZFVybC5kYXRhKTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gRmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKT8uc3BsaXQoXCI7XCIpWzBdIHx8IG51bGw7XG4gICAgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgIGRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcyhcInRleHQvXCIpKSB7XG4gICAgICBkYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSBhd2FpdCByZXF1ZXN0LmJsb2IoKTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgZGF0YSxcbiAgICAgIGNvbnRlbnRUeXBlXG4gICAgfTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBnZXRDaWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgQ0lEIGNvbnRlbnRzXCJcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZ2F0ZXdheS9jb252ZXJ0SVBGU1VybC50c1xudmFyIGNvbnZlcnRJUEZTVXJsID0gYXN5bmMgKGNvbmZpZywgdXJsLCBnYXRld2F5UHJlZml4KSA9PiB7XG4gIGxldCBuZXdVcmw7XG4gIGxldCBwcmVmaXggPSBnYXRld2F5UHJlZml4IHx8IGNvbmZpZz8ucGluYXRhR2F0ZXdheSB8fCBcImh0dHBzOi8vZ2F0ZXdheS5waW5hdGEuY2xvdWRcIjtcbiAgbmV3VXJsID0gYXdhaXQgY29udmVydFRvRGVzaXJlZEdhdGV3YXkodXJsLCBwcmVmaXgpO1xuICBpZiAoY29uZmlnPy5waW5hdGFHYXRld2F5S2V5KSB7XG4gICAgYCR7bmV3VXJsfT9waW5hdGFHYXRld2F5VG9rZW49JHtjb25maWc/LnBpbmF0YUdhdGV3YXlLZXl9YDtcbiAgfVxuICByZXR1cm4gbmV3VXJsO1xufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2dhdGV3YXkvY3JlYXRlQWNjZXNzTGluay50c1xudmFyIGNyZWF0ZUFjY2Vzc0xpbmsgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zLCBpbWdPcHRzKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGJhc2VVcmw7XG4gIGlmIChvcHRpb25zPy5nYXRld2F5KSB7XG4gICAgYmFzZVVybCA9IG9wdGlvbnMuZ2F0ZXdheS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikgPyBvcHRpb25zLmdhdGV3YXkgOiBgaHR0cHM6Ly8ke29wdGlvbnMuZ2F0ZXdheX1gO1xuICB9IGVsc2Uge1xuICAgIGJhc2VVcmwgPSBjb25maWcucGluYXRhR2F0ZXdheTtcbiAgfVxuICBsZXQgbmV3VXJsID0gYCR7YmFzZVVybH0vZmlsZXMvJHtvcHRpb25zLmNpZH1gO1xuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGlmIChpbWdPcHRzKSB7XG4gICAgaWYgKGltZ09wdHMud2lkdGgpIHBhcmFtcy5hcHBlbmQoXCJpbWctd2lkdGhcIiwgaW1nT3B0cy53aWR0aC50b1N0cmluZygpKTtcbiAgICBpZiAoaW1nT3B0cy5oZWlnaHQpIHBhcmFtcy5hcHBlbmQoXCJpbWctaGVpZ2h0XCIsIGltZ09wdHMuaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgIGlmIChpbWdPcHRzLmRwcikgcGFyYW1zLmFwcGVuZChcImltZy1kcHJcIiwgaW1nT3B0cy5kcHIudG9TdHJpbmcoKSk7XG4gICAgaWYgKGltZ09wdHMuZml0KSBwYXJhbXMuYXBwZW5kKFwiaW1nLWZpdFwiLCBpbWdPcHRzLmZpdCk7XG4gICAgaWYgKGltZ09wdHMuZ3Jhdml0eSkgcGFyYW1zLmFwcGVuZChcImltZy1ncmF2aXR5XCIsIGltZ09wdHMuZ3Jhdml0eSk7XG4gICAgaWYgKGltZ09wdHMucXVhbGl0eSlcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJpbWctcXVhbGl0eVwiLCBpbWdPcHRzLnF1YWxpdHkudG9TdHJpbmcoKSk7XG4gICAgaWYgKGltZ09wdHMuZm9ybWF0KSBwYXJhbXMuYXBwZW5kKFwiaW1nLWZvcm1hdFwiLCBpbWdPcHRzLmZvcm1hdCk7XG4gICAgaWYgKGltZ09wdHMuYW5pbWF0aW9uICE9PSB2b2lkIDApXG4gICAgICBwYXJhbXMuYXBwZW5kKFwiaW1nLWFuaW1cIiwgaW1nT3B0cy5hbmltYXRpb24udG9TdHJpbmcoKSk7XG4gICAgaWYgKGltZ09wdHMuc2hhcnBlbilcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJpbWctc2hhcnBlblwiLCBpbWdPcHRzLnNoYXJwZW4udG9TdHJpbmcoKSk7XG4gICAgaWYgKGltZ09wdHMub25FcnJvciA9PT0gdHJ1ZSkgcGFyYW1zLmFwcGVuZChcImltZy1vbmVycm9yXCIsIFwicmVkaXJlY3RcIik7XG4gICAgaWYgKGltZ09wdHMubWV0YWRhdGEpIHBhcmFtcy5hcHBlbmQoXCJpbWctbWV0YWRhdGFcIiwgaW1nT3B0cy5tZXRhZGF0YSk7XG4gIH1cbiAgY29uc3QgcXVlcnlTdHJpbmcgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgbmV3VXJsICs9IGA/JHtxdWVyeVN0cmluZ31gO1xuICB9XG4gIGNvbnN0IGRhdGUgPSBvcHRpb25zPy5kYXRlIHx8IE1hdGguZmxvb3IoKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLyAxZTMpO1xuICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHVybDogbmV3VXJsLFxuICAgIGRhdGUsXG4gICAgZXhwaXJlczogb3B0aW9ucy5leHBpcmVzLFxuICAgIG1ldGhvZDogXCJHRVRcIlxuICB9KTtcbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBTb3VyY2U6IFwic2RrL2NyZWF0ZVNpZ25VUkxcIlxuICAgIH07XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzL3ByaXZhdGUvZG93bmxvYWRfbGlua2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogcGF5bG9hZFxuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBGYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgYEVycm9yIHByb2Nlc3NpbmcgY3JlYXRlU2lnbmVkVVJMOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIHNpZ25lZCB1cmxcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9ncm91cHMvYWRkVG9Hcm91cC50c1xudmFyIGFkZFRvR3JvdXAgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zLCBwcml2YWN5KSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3Qgd2FpdDMgPSAobWlsbGlzZWNvbmRzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGxpc2Vjb25kcyk7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHJlc3BvbnNlcyA9IFtdO1xuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgU291cmNlOiBcInNkay9hZGRUb0dyb3VwXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICBmb3IgKGNvbnN0IGlkIG9mIG9wdGlvbnMuZmlsZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7ZW5kcG9pbnR9L2dyb3Vwcy8ke3ByaXZhY3l9LyR7b3B0aW9ucy5ncm91cElkfS9pZHMvJHtpZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGF3YWl0IHdhaXQzKDMwMCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXNwb25zZS51cmxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVzcG9uc2Uuc3RhdHVzLCB7XG4gICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgcmVxdWVzdFVybDogcmVzcG9uc2UudXJsXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgaWQsXG4gICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzVGV4dFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxldCBlcnJvck1lc3NhZ2U7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGBFcnJvciBhZGRpbmcgZmlsZSAke2lkfSB0byBncm91cDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBgQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBhZGRpbmcgZmlsZSAke2lkfSB0byBncm91cGA7XG4gICAgICB9XG4gICAgICByZXNwb25zZXMucHVzaCh7XG4gICAgICAgIGlkLFxuICAgICAgICBzdGF0dXM6IGVycm9yTWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNwb25zZXM7XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZ3JvdXBzL2NyZWF0ZUdyb3VwLnRzXG52YXIgY3JlYXRlR3JvdXAgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zLCBwcml2YWN5KSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgaXNfcHVibGljOiBvcHRpb25zLmlzUHVibGljXG4gIH0pO1xuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgU291cmNlOiBcInNkay9jcmVhdGVHcm91cFwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2dyb3Vwcy8ke3ByaXZhY3l9YCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBkYXRhXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgcmV0dXJuIHJlc0RhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGNyZWF0ZUdyb3VwOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY3JlYXRpbmcgYSBncm91cFwiKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2dyb3Vwcy9kZWxldGVHcm91cC50c1xudmFyIGRlbGV0ZUdyb3VwID0gYXN5bmMgKGNvbmZpZywgb3B0aW9ucywgcHJpdmFjeSkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL2RlbGV0ZUdyb3VwXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2VuZHBvaW50fS9ncm91cHMvJHtwcml2YWN5fS8ke29wdGlvbnMuZ3JvdXBJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gcmVxdWVzdC5zdGF0dXNUZXh0O1xuICAgIHJldHVybiByZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGRlbGV0ZUdyb3VwOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZGVsZXRpbmcgYSBncm91cFwiKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2dyb3Vwcy9nZXRHcm91cC50c1xudmFyIGdldEdyb3VwID0gYXN5bmMgKGNvbmZpZywgb3B0aW9ucywgcHJpdmFjeSkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL2dldEdyb3VwXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2VuZHBvaW50fS9ncm91cHMvJHtwcml2YWN5fS8ke29wdGlvbnMuZ3JvdXBJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIGhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgcmVzRGF0YSA9IHJlcy5kYXRhO1xuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBnZXRHcm91cDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBpbmZvIGZvciBhIGdyb3VwXCJcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZ3JvdXBzL2xpc3RHcm91cHMudHNcbnZhciBsaXN0R3JvdXBzID0gYXN5bmMgKGNvbmZpZywgcHJpdmFjeSwgb3B0aW9ucykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL2xpc3RHcm91cHNcIlxuICAgIH07XG4gIH1cbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBpZiAob3B0aW9ucykge1xuICAgIGNvbnN0IHsgcGFnZVRva2VuLCBuYW1lLCBsaW1pdCwgaXNQdWJsaWMgfSA9IG9wdGlvbnM7XG4gICAgaWYgKHBhZ2VUb2tlbikgcGFyYW1zLmFwcGVuZChcInBhZ2VUb2tlblwiLCBwYWdlVG9rZW4udG9TdHJpbmcoKSk7XG4gICAgaWYgKGlzUHVibGljKSBwYXJhbXMuYXBwZW5kKFwiaXNQdWJsaWNcIiwgaXNQdWJsaWMudG9TdHJpbmcoKSk7XG4gICAgaWYgKG5hbWUpIHBhcmFtcy5hcHBlbmQoXCJuYW1lXCIsIG5hbWUpO1xuICAgIGlmIChsaW1pdCAhPT0gdm9pZCAwKSBwYXJhbXMuYXBwZW5kKFwibGltaXRcIiwgbGltaXQudG9TdHJpbmcoKSk7XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKFxuICAgICAgYCR7ZW5kcG9pbnR9L2dyb3Vwcy8ke3ByaXZhY3l9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICBoZWFkZXJzXG4gICAgICB9XG4gICAgKTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgbGlzdEdyb3VwczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGxpc3RpbmcgZ3JvdXBzXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvZ3JvdXBzL3JlbW92ZUZyb21Hcm91cC50c1xudmFyIHJlbW92ZUZyb21Hcm91cCA9IGFzeW5jIChjb25maWcsIG9wdGlvbnMsIHByaXZhY3kpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCB3YWl0MyA9IChtaWxsaXNlY29uZHMpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbWlsbGlzZWNvbmRzKTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcmVzcG9uc2VzID0gW107XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL2FkZFRvR3JvdXBcIlxuICAgIH07XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIGZvciAoY29uc3QgaWQgb2Ygb3B0aW9ucy5maWxlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHtlbmRwb2ludH0vZ3JvdXBzLyR7cHJpdmFjeX0vJHtvcHRpb25zLmdyb3VwSWR9L2lkcy8ke2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgaGVhZGVyc1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgYXdhaXQgd2FpdDMoMzAwKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgICByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlc3BvbnNlLnVybFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXNwb25zZS5zdGF0dXMsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICByZXF1ZXN0VXJsOiByZXNwb25zZS51cmxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzcG9uc2VzLnB1c2goe1xuICAgICAgICBpZCxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGV0IGVycm9yTWVzc2FnZTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gYEVycm9yIGFkZGluZyBmaWxlICR7aWR9IHRvIGdyb3VwOiAke2Vycm9yLm1lc3NhZ2V9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGBBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGFkZGluZyBmaWxlICR7aWR9IHRvIGdyb3VwYDtcbiAgICAgIH1cbiAgICAgIHJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgaWQsXG4gICAgICAgIHN0YXR1czogZXJyb3JNZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3BvbnNlcztcbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9ncm91cHMvdXBkYXRlR3JvdXAudHNcbnZhciB1cGRhdGVHcm91cCA9IGFzeW5jIChjb25maWcsIG9wdGlvbnMsIHByaXZhY3kpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICBpc19wdWJsaWM6IG9wdGlvbnMuaXNQdWJsaWNcbiAgfSk7XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL3VwZGF0ZUdyb3VwXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2VuZHBvaW50fS9ncm91cHMvJHtwcml2YWN5fS8ke29wdGlvbnMuZ3JvdXBJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IGRhdGFcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgcmVzRGF0YSA9IHJlcy5kYXRhO1xuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyB1cGRhdGVHcm91cDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIGdyb3VwXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMva2V5cy9jcmVhdGVLZXkudHNcbnZhciBjcmVhdGVLZXkgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFNvdXJjZTogXCJzZGsvY3JlYXRlS2V5XCJcbiAgICB9O1xuICB9XG4gIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zKTtcbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9waW5hdGEva2V5c2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogZGF0YVxuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgY3JlYXRlS2V5OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY3JlYXRpbmcgQVBJIGtleVwiKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL2tleXMvbGlzdEtleXMudHNcbnZhciBsaXN0S2V5cyA9IGFzeW5jIChjb25maWcsIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgU291cmNlOiBcInNkay9saXN0S2V5c1wiXG4gICAgfTtcbiAgfVxuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGlmIChvcHRpb25zKSB7XG4gICAgY29uc3QgeyBvZmZzZXQsIG5hbWUsIHJldm9rZWQsIGxpbWl0ZWRVc2UsIGV4aGF1c3RlZCB9ID0gb3B0aW9ucztcbiAgICBpZiAob2Zmc2V0KSBwYXJhbXMuYXBwZW5kKFwib2Zmc2V0XCIsIG9mZnNldC50b1N0cmluZygpKTtcbiAgICBpZiAocmV2b2tlZCAhPT0gdm9pZCAwKSBwYXJhbXMuYXBwZW5kKFwicmV2b2tlZFwiLCByZXZva2VkLnRvU3RyaW5nKCkpO1xuICAgIGlmIChsaW1pdGVkVXNlICE9PSB2b2lkIDApXG4gICAgICBwYXJhbXMuYXBwZW5kKFwibGltaXRlZFVzZVwiLCBsaW1pdGVkVXNlLnRvU3RyaW5nKCkpO1xuICAgIGlmIChleGhhdXN0ZWQgIT09IHZvaWQgMClcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJleGhhdXN0ZWRcIiwgZXhoYXVzdGVkLnRvU3RyaW5nKCkpO1xuICAgIGlmIChuYW1lKSBwYXJhbXMuYXBwZW5kKFwibmFtZVwiLCBuYW1lKTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goXG4gICAgICBgJHtlbmRwb2ludH0vcGluYXRhL2tleXM/JHtwYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIGhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcy5rZXlzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBsaXN0S2V5czogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIGxpc3RpbmcgQVBJIGtleXNcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9rZXlzL3Jldm9rZUtleXMudHNcbnZhciB3YWl0MiA9IChtaWxsaXNlY29uZHMpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgc2V0VGltZW91dChyZXNvbHZlLCBtaWxsaXNlY29uZHMpO1xuICB9KTtcbn07XG52YXIgcmV2b2tlS2V5cyA9IGFzeW5jIChjb25maWcsIGtleXMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgfTtcbiAgICBoZWFkZXJzID0geyAuLi5jb25maWcuY3VzdG9tSGVhZGVycyB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL3Jldm9rZUtleXNcIlxuICAgIH07XG4gIH1cbiAgY29uc3QgcmVzcG9uc2VzID0gW107XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgJHtlbmRwb2ludH0vcGluYXRhL2tleXMvJHtrZXl9YCwge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnNcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgd2FpdDIoMzAwKTtcbiAgICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgcmVzcG9uc2VzLnB1c2goe1xuICAgICAgICBrZXksXG4gICAgICAgIHN0YXR1czogcmVzdWx0XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGV0IGVycm9yTWVzc2FnZTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gYEVycm9yIHJldm9raW5nIGtleSAke2tleX06ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gYEFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmV2b2tpbmcga2V5ICR7a2V5fWA7XG4gICAgICB9XG4gICAgICByZXNwb25zZXMucHVzaCh7XG4gICAgICAgIGtleSxcbiAgICAgICAgc3RhdHVzOiBlcnJvck1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzcG9uc2VzO1xufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL3VwbG9hZHMvYmFzZTY0LnRzXG52YXIgdXBsb2FkQmFzZTY0ID0gYXN5bmMgKGNvbmZpZywgYmFzZTY0U3RyaW5nLCBuZXR3b3JrLCBvcHRpb25zKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3Qgand0ID0gb3B0aW9ucz8ua2V5cyB8fCBjb25maWc/LnBpbmF0YUp3dDtcbiAgY29uc3QgbmFtZSA9IG9wdGlvbnM/Lm1ldGFkYXRhPy5uYW1lID8gb3B0aW9ucz8ubWV0YWRhdGE/Lm5hbWUgOiBcImJhc2U2NCBzdHJpbmdcIjtcbiAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYmFzZTY0U3RyaW5nLCBcImJhc2U2NFwiKTtcbiAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtidWZmZXJdKTtcbiAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICBkYXRhLmFwcGVuZChcImZpbGVcIiwgYmxvYiwgbmFtZSk7XG4gIGRhdGEuYXBwZW5kKFwibmV0d29ya1wiLCBuZXR3b3JrKTtcbiAgZGF0YS5hcHBlbmQoXCJuYW1lXCIsIG5hbWUpO1xuICBpZiAob3B0aW9ucz8uZ3JvdXBJZCkge1xuICAgIGRhdGEuYXBwZW5kKFwiZ3JvdXBfaWRcIiwgb3B0aW9ucy5ncm91cElkKTtcbiAgfVxuICBpZiAob3B0aW9ucz8ubWV0YWRhdGE/LmtleXZhbHVlcykge1xuICAgIGRhdGEuYXBwZW5kKFwia2V5dmFsdWVzXCIsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubWV0YWRhdGEua2V5dmFsdWVzKSk7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvYmFzZTY0XCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly91cGxvYWRzLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLnVwbG9hZFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLnVwbG9hZFVybDtcbiAgfVxuICBpZiAob3B0aW9ucz8udXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChvcHRpb25zLnVybCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBkYXRhXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgY29uc3QgcmVzRGF0YSA9IHJlcy5kYXRhO1xuICAgICAgcmV0dXJuIHJlc0RhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGJhc2U2NDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHVwbG9hZCBiYXNlNjRcIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBkYXRhXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgaWYgKG9wdGlvbnM/LnZlY3Rvcml6ZSkge1xuICAgICAgY29uc3QgdmVjdG9yUmVxID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke2VuZHBvaW50fS92ZWN0b3JpemUvZmlsZXMvJHtyZXNEYXRhLmlkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmICh2ZWN0b3JSZXEub2spIHtcbiAgICAgICAgcmVzRGF0YS52ZWN0b3JpemVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc0RhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCB2ZWN0b3JSZXEudGV4dCgpO1xuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxuICAgICAgICAgIGBIVFRQIGVycm9yIGR1cmluZyB2ZWN0b3JpemF0aW9uOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHZlY3RvclJlcS5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBiYXNlNjQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byB1cGxvYWQgYmFzZTY0XCJcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvdXBsb2Fkcy9jcmVhdGVTaWduZWRVcGxvYWRVUkwudHNcbnZhciBjcmVhdGVTaWduZWRVcGxvYWRVUkwgPSBhc3luYyAoY29uZmlnLCBvcHRpb25zLCBuZXR3b3JrKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgY29uc3QgZGF0ZSA9IG9wdGlvbnM/LmRhdGUgfHwgTWF0aC5mbG9vcigoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDFlMyk7XG4gIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgZGF0ZSxcbiAgICBleHBpcmVzOiBvcHRpb25zLmV4cGlyZXNcbiAgfTtcbiAgaWYgKG9wdGlvbnMuZ3JvdXBJZCkge1xuICAgIHBheWxvYWQuZ3JvdXBfaWQgPSBvcHRpb25zLmdyb3VwSWQ7XG4gIH1cbiAgaWYgKG9wdGlvbnMubmFtZSkge1xuICAgIHBheWxvYWQuZmlsZW5hbWUgPSBvcHRpb25zLm5hbWU7XG4gIH1cbiAgaWYgKG9wdGlvbnMua2V5dmFsdWVzKSB7XG4gICAgcGF5bG9hZC5rZXl2YWx1ZXMgPSBvcHRpb25zLmtleXZhbHVlcztcbiAgfVxuICBpZiAobmV0d29yaykge1xuICAgIHBheWxvYWQubmV0d29yayA9IG5ldHdvcms7XG4gIH1cbiAgaWYgKG9wdGlvbnMuc3RyZWFtYWJsZSkge1xuICAgIHBheWxvYWQuc3RyZWFtYWJsZSA9IG9wdGlvbnMuc3RyZWFtYWJsZTtcbiAgfVxuICBpZiAob3B0aW9ucy5tYXhGaWxlU2l6ZSkge1xuICAgIHBheWxvYWQubWF4X2ZpbGVfc2l6ZSA9IG9wdGlvbnMubWF4RmlsZVNpemU7XG4gIH1cbiAgaWYgKG9wdGlvbnMubWltZVR5cGVzKSB7XG4gICAgcGF5bG9hZC5hbGxvd19taW1lX3R5cGVzID0gb3B0aW9ucy5taW1lVHlwZXM7XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL3VwbG9hZHMucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcudXBsb2FkVXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcudXBsb2FkVXJsO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBTb3VyY2U6IFwic2RrL2NyZWF0ZVNpZ25VUkxcIlxuICAgIH07XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzL3NpZ25gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBGYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgYEVycm9yIHByb2Nlc3NpbmcgY3JlYXRlU2lnbmVkVVJMOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIHNpZ25lZCB1cmxcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy91cGxvYWRzL2ZpbGUudHNcbnZhciB1cGxvYWRGaWxlID0gYXN5bmMgKGNvbmZpZywgZmlsZSwgbmV0d29yaywgb3B0aW9ucykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGNvbnN0IGp3dCA9IG9wdGlvbnM/LmtleXMgfHwgY29uZmlnLnBpbmF0YUp3dDtcbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL3VwbG9hZHMucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcudXBsb2FkVXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcudXBsb2FkVXJsO1xuICB9XG4gIGlmIChmaWxlLnNpemUgPiA5NDM3MTg0MCkge1xuICAgIGxldCBoZWFkZXJzMjtcbiAgICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGhlYWRlcnMyID0ge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICAgIC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkZXJzMiA9IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2p3dH1gLFxuICAgICAgICBTb3VyY2U6IFwic2RrL2ZpbGVcIlxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgbmFtZSA9IG9wdGlvbnM/Lm1ldGFkYXRhPy5uYW1lIHx8IGZpbGUubmFtZSB8fCBcIkZpbGUgZnJvbSBTREtcIjtcbiAgICBsZXQgbWV0YWRhdGEgPSBgZmlsZW5hbWUgJHtidG9hKG5hbWUpfSxmaWxldHlwZSAke2J0b2EoZmlsZS50eXBlKX0sbmV0d29yayAke2J0b2EobmV0d29yayl9YDtcbiAgICBpZiAob3B0aW9ucz8uZ3JvdXBJZCkge1xuICAgICAgbWV0YWRhdGEgKz0gYCxncm91cF9pZCAke2J0b2Eob3B0aW9ucy5ncm91cElkKX1gO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucz8ubWV0YWRhdGE/LmtleXZhbHVlcykge1xuICAgICAgbWV0YWRhdGEgKz0gYCxrZXl2YWx1ZXMgJHtidG9hKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubWV0YWRhdGEua2V5dmFsdWVzKSl9YDtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnM/LnN0cmVhbWFibGUpIHtcbiAgICAgIG1ldGFkYXRhICs9IGAsc3RyZWFtYWJsZSAke2J0b2EoXCJ0cnVlXCIpfWA7XG4gICAgfVxuICAgIGxldCB1cGRhdGVkRW5kcG9pbnQgPSBgJHtlbmRwb2ludH0vZmlsZXNgO1xuICAgIGlmIChvcHRpb25zPy51cmwpIHtcbiAgICAgIHVwZGF0ZWRFbmRwb2ludCA9IG9wdGlvbnMudXJsO1xuICAgIH1cbiAgICBjb25zdCB1cmxSZXEgPSBhd2FpdCBmZXRjaCh1cGRhdGVkRW5kcG9pbnQsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiVXBsb2FkLUxlbmd0aFwiOiBgJHtmaWxlLnNpemV9YCxcbiAgICAgICAgXCJVcGxvYWQtTWV0YWRhdGFcIjogbWV0YWRhdGEsXG4gICAgICAgIC4uLmhlYWRlcnMyXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgdXJsID0gdXJsUmVxLmhlYWRlcnMuZ2V0KFwiTG9jYXRpb25cIik7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHVybFJlcS50ZXh0KCk7XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFwiVXBsb2FkIFVSTCBub3QgcHJvdmlkZWRcIiwgdXJsUmVxLnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiB1cmxSZXEudXJsLFxuICAgICAgICAgIHJlcXVlc3RIZWFkZXJzOiB1cmxSZXEuaGVhZGVyc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY2h1bmtTaXplID0gNTAgKiAxMDI0ICogMTAyNCArIDE7XG4gICAgY29uc3QgdG90YWxDaHVua3MgPSBNYXRoLmNlaWwoZmlsZS5zaXplIC8gY2h1bmtTaXplKTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBsZXQgdXBsb2FkUmVxO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxDaHVua3M7IGkrKykge1xuICAgICAgY29uc3QgY2h1bmsgPSBmaWxlLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgY2h1bmtTaXplKTtcbiAgICAgIGxldCByZXRyeUNvdW50ID0gMDtcbiAgICAgIGNvbnN0IG1heFJldHJpZXMgPSA1O1xuICAgICAgd2hpbGUgKHJldHJ5Q291bnQgPD0gbWF4UmV0cmllcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVwbG9hZFJlcSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vb2Zmc2V0K29jdGV0LXN0cmVhbVwiLFxuICAgICAgICAgICAgICBcIlVwbG9hZC1PZmZzZXRcIjogb2Zmc2V0LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIC4uLmhlYWRlcnMyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogY2h1bmtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAodXBsb2FkUmVxLm9rKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgdXBsb2FkUmVxLnRleHQoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3VwbG9hZFJlcS5zdGF0dXN9OiAke2Vycm9yRGF0YX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0cnlDb3VudCsrO1xuICAgICAgICAgIGlmIChyZXRyeUNvdW50ID4gbWF4UmV0cmllcykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gdXBsb2FkUmVxID8gYXdhaXQgdXBsb2FkUmVxLnRleHQoKS5jYXRjaCgoKSA9PiBcIlVua25vd24gZXJyb3JcIikgOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxuICAgICAgICAgICAgICBgSFRUUCBlcnJvciBkdXJpbmcgY2h1bmsgdXBsb2FkIGFmdGVyICR7bWF4UmV0cmllc30gcmV0cmllczogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICAgICAgdXBsb2FkUmVxPy5zdGF0dXMgfHwgMCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHVwbG9hZFJlcT8udXJsIHx8IHVybCxcbiAgICAgICAgICAgICAgICAgIHJldHJpZXNBdHRlbXB0ZWQ6IG1heFJldHJpZXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oMWUzICogTWF0aC5wb3coMiwgcmV0cnlDb3VudCAtIDEpLCAxZTQpO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9mZnNldCArPSBjaHVuay5zaXplO1xuICAgIH1cbiAgICBpZiAodXBsb2FkUmVxLnN0YXR1cyA9PT0gMjA0KSB7XG4gICAgICBjb25zdCBjaWQgPSB1cGxvYWRSZXEuaGVhZGVycy5nZXQoXCJ1cGxvYWQtY2lkXCIpO1xuICAgICAgaWYgKCFjb25maWcucGluYXRhSnd0KSB7XG4gICAgICAgIGNvbnN0IGRhdGEzID0ge1xuICAgICAgICAgIGlkOiBcIlwiLFxuICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgY2lkLFxuICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBcIlwiLFxuICAgICAgICAgIG51bWJlcl9vZl9maWxlczogMSxcbiAgICAgICAgICBncm91cF9pZDogbnVsbCxcbiAgICAgICAgICBtaW1lX3R5cGU6IFwiXCIsXG4gICAgICAgICAga2V5dmFsdWVzOiB7fSxcbiAgICAgICAgICB2ZWN0b3JpemVkOiBmYWxzZSxcbiAgICAgICAgICBuZXR3b3JrOiBcIlwiXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkYXRhMztcbiAgICAgIH1cbiAgICAgIGxldCBkYXRhRW5kcG9pbnQ7XG4gICAgICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgICAgIGRhdGFFbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGFFbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlSW5mb1JlcSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHtkYXRhRW5kcG9pbnR9L2ZpbGVzLyR7bmV0d29ya30/Y2lkPSR7Y2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2p3dH1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc3QgZmlsZUluZm8gPSBhd2FpdCBmaWxlSW5mb1JlcS5qc29uKCk7XG4gICAgICBjb25zdCBkYXRhMiA9IGZpbGVJbmZvLmRhdGEuZmlsZXNbMF07XG4gICAgICBpZiAob3B0aW9ucz8udmVjdG9yaXplKSB7XG4gICAgICAgIGNvbnN0IHZlY3RvclJlcSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgIGAke2VuZHBvaW50fS92ZWN0b3JpemUvZmlsZXMvJHtkYXRhMi5pZH1gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHZlY3RvclJlcS5vaykge1xuICAgICAgICAgIGRhdGEyLnZlY3Rvcml6ZWQgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBkYXRhMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCB2ZWN0b3JSZXEudGV4dCgpO1xuICAgICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoXG4gICAgICAgICAgICBgSFRUUCBlcnJvciBkdXJpbmcgdmVjdG9yaXphdGlvbjogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICAgIHZlY3RvclJlcS5zdGF0dXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHZlY3RvclJlcS51cmxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhMjtcbiAgICB9XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvZmlsZVwiXG4gICAgfTtcbiAgfVxuICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gIGRhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlLCBmaWxlLm5hbWUpO1xuICBkYXRhLmFwcGVuZChcIm5ldHdvcmtcIiwgbmV0d29yayk7XG4gIGRhdGEuYXBwZW5kKFwibmFtZVwiLCBvcHRpb25zPy5tZXRhZGF0YT8ubmFtZSB8fCBmaWxlLm5hbWUgfHwgXCJGaWxlIGZyb20gU0RLXCIpO1xuICBpZiAob3B0aW9ucz8uZ3JvdXBJZCkge1xuICAgIGRhdGEuYXBwZW5kKFwiZ3JvdXBfaWRcIiwgb3B0aW9ucy5ncm91cElkKTtcbiAgfVxuICBpZiAob3B0aW9ucz8ubWV0YWRhdGE/LmtleXZhbHVlcykge1xuICAgIGRhdGEuYXBwZW5kKFwia2V5dmFsdWVzXCIsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubWV0YWRhdGEua2V5dmFsdWVzKSk7XG4gIH1cbiAgaWYgKG9wdGlvbnM/LnN0cmVhbWFibGUpIHtcbiAgICBkYXRhLmFwcGVuZChcInN0cmVhbWFibGVcIiwgXCJ0cnVlXCIpO1xuICB9XG4gIGlmIChvcHRpb25zPy51cmwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKG9wdGlvbnMudXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IGRhdGFcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgICByZXR1cm4gcmVzRGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgICAgYEVycm9yIHVwbG9hZGluZyBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yLnRvU3RyaW5nKClcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gdXBsb2FkIGZpbGVcIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBkYXRhXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgaWYgKG9wdGlvbnM/LnZlY3Rvcml6ZSkge1xuICAgICAgY29uc3QgdmVjdG9yUmVxID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke2VuZHBvaW50fS92ZWN0b3JpemUvZmlsZXMvJHtyZXNEYXRhLmlkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmICh2ZWN0b3JSZXEub2spIHtcbiAgICAgICAgcmVzRGF0YS52ZWN0b3JpemVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc0RhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCB2ZWN0b3JSZXEudGV4dCgpO1xuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxuICAgICAgICAgIGBIVFRQIGVycm9yIGR1cmluZyB2ZWN0b3JpemF0aW9uOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHZlY3RvclJlcS5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgYEVycm9yIHVwbG9hZGluZyBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICB7XG4gICAgICAgICAgZXJyb3I6IGVycm9yLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byB1cGxvYWQgZmlsZVwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL3VwbG9hZHMvZmlsZUFycmF5LnRzXG52YXIgdXBsb2FkRmlsZUFycmF5ID0gYXN5bmMgKGNvbmZpZywgZmlsZXMsIG5ldHdvcmssIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCBqd3QgPSBvcHRpb25zPy5rZXlzIHx8IGNvbmZpZz8ucGluYXRhSnd0O1xuICBjb25zdCBmb2xkZXIgPSBvcHRpb25zPy5tZXRhZGF0YT8ubmFtZSB8fCBcImZvbGRlcl9mcm9tX3Nka1wiO1xuICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gIGZvciAoY29uc3QgZmlsZSBvZiBBcnJheS5mcm9tKGZpbGVzKSkge1xuICAgIGNvbnN0IHBhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aCB8fCBgJHtmb2xkZXJ9LyR7ZmlsZS5uYW1lfWA7XG4gICAgZGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUsIHBhdGgpO1xuICB9XG4gIGRhdGEuYXBwZW5kKFxuICAgIFwicGluYXRhTWV0YWRhdGFcIixcbiAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBuYW1lOiBmb2xkZXIsXG4gICAgICBrZXl2YWx1ZXM6IG9wdGlvbnM/Lm1ldGFkYXRhPy5rZXl2YWx1ZXNcbiAgICB9KVxuICApO1xuICBkYXRhLmFwcGVuZChcbiAgICBcInBpbmF0YU9wdGlvbnNcIixcbiAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBncm91cElkOiBvcHRpb25zPy5ncm91cElkLFxuICAgICAgY2lkVmVyc2lvbjogMVxuICAgIH0pXG4gICk7XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2p3dH1gLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICBTb3VyY2U6IFwic2RrL2ZpbGVBcnJheVwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC9waW5uaW5nL3BpbkZpbGVUb0lQRlNcIjtcbiAgaWYgKGNvbmZpZy5sZWdhY3lVcGxvYWRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5sZWdhY3lVcGxvYWRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBkYXRhXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0ge1xuICAgICAgaWQ6IHJlcy5JRCxcbiAgICAgIG5hbWU6IHJlcy5OYW1lLFxuICAgICAgY2lkOiByZXMuSXBmc0hhc2gsXG4gICAgICBzaXplOiByZXMuUGluU2l6ZSxcbiAgICAgIGNyZWF0ZWRfYXQ6IHJlcy5UaW1lc3RhbXAsXG4gICAgICBudW1iZXJfb2ZfZmlsZXM6IHJlcy5OdW1iZXJPZkZpbGVzLFxuICAgICAgbWltZV90eXBlOiByZXMuTWltZVR5cGUsXG4gICAgICBncm91cF9pZDogcmVzLkdyb3VwSWQsXG4gICAgICBrZXl2YWx1ZXM6IHJlcy5LZXl2YWx1ZXMsXG4gICAgICB2ZWN0b3JpemVkOiBmYWxzZSxcbiAgICAgIG5ldHdvcms6IFwicHVibGljXCJcbiAgICB9O1xuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBmaWxlQXJyYXk6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwbG9hZGluZyBhbiBhcnJheSBvZiBmaWxlc1wiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL3VwbG9hZHMvanNvbi50c1xudmFyIHVwbG9hZEpzb24gPSBhc3luYyAoY29uZmlnLCBqc29uRGF0YSwgbmV0d29yaywgb3B0aW9ucykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGNvbnN0IGp3dCA9IG9wdGlvbnM/LmtleXMgfHwgY29uZmlnPy5waW5hdGFKd3Q7XG4gIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShqc29uRGF0YSk7XG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbanNvbl0pO1xuICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBcImRhdGEuanNvblwiLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiIH0pO1xuICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gIGRhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlLCBmaWxlLm5hbWUpO1xuICBkYXRhLmFwcGVuZChcIm5ldHdvcmtcIiwgbmV0d29yayk7XG4gIGRhdGEuYXBwZW5kKFwibmFtZVwiLCBvcHRpb25zPy5tZXRhZGF0YT8ubmFtZSB8fCBmaWxlLm5hbWUgfHwgXCJGaWxlIGZyb20gU0RLXCIpO1xuICBpZiAob3B0aW9ucz8uZ3JvdXBJZCkge1xuICAgIGRhdGEuYXBwZW5kKFwiZ3JvdXBfaWRcIiwgb3B0aW9ucy5ncm91cElkKTtcbiAgfVxuICBpZiAob3B0aW9ucz8ubWV0YWRhdGE/LmtleXZhbHVlcykge1xuICAgIGRhdGEuYXBwZW5kKFwia2V5dmFsdWVzXCIsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubWV0YWRhdGEua2V5dmFsdWVzKSk7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvanNvblwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vdXBsb2Fkcy5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy51cGxvYWRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy51cGxvYWRVcmw7XG4gIH1cbiAgaWYgKG9wdGlvbnM/LnVybCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2gob3B0aW9ucy51cmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogZGF0YVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICAgIHJldHVybiByZXNEYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBiYXNlNjQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byB1cGxvYWQgYmFzZTY0XCJcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9maWxlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogZGF0YVxuICAgIH0pO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgcmVzRGF0YSA9IHJlcy5kYXRhO1xuICAgIGlmIChvcHRpb25zPy52ZWN0b3JpemUpIHtcbiAgICAgIGNvbnN0IHZlY3RvclJlcSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHtlbmRwb2ludH0vdmVjdG9yaXplL2ZpbGVzLyR7cmVzRGF0YS5pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAodmVjdG9yUmVxLm9rKSB7XG4gICAgICAgIHJlc0RhdGEudmVjdG9yaXplZCA9IHRydWU7XG4gICAgICAgIHJldHVybiByZXNEYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgdmVjdG9yUmVxLnRleHQoKTtcbiAgICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihcbiAgICAgICAgICBgSFRUUCBlcnJvciBkdXJpbmcgdmVjdG9yaXphdGlvbjogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICB2ZWN0b3JSZXEuc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcganNvbjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwbG9hZGluZyBqc29uXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvdXBsb2Fkcy91cmwudHNcbnZhciB1cGxvYWRVcmwgPSBhc3luYyAoY29uZmlnLCB1cmwsIG5ldHdvcmssIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCBqd3QgPSBvcHRpb25zPy5rZXlzIHx8IGNvbmZpZz8ucGluYXRhSnd0O1xuICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGlmICghc3RyZWFtLm9rKSB7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgc3RyZWFtLnRleHQoKTtcbiAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCBzdHJlYW0uc3RhdHVzLCB7XG4gICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICByZXF1ZXN0VXJsOiBzdHJlYW0udXJsXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBzdHJlYW0uYXJyYXlCdWZmZXIoKTtcbiAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFthcnJheUJ1ZmZlcl0pO1xuICBjb25zdCBuYW1lID0gb3B0aW9ucz8ubWV0YWRhdGE/Lm5hbWUgPz8gXCJ1cmxfdXBsb2FkXCI7XG4gIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWUpO1xuICBkYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSwgbmFtZSk7XG4gIGRhdGEuYXBwZW5kKFwibmV0d29ya1wiLCBuZXR3b3JrKTtcbiAgZGF0YS5hcHBlbmQoXCJuYW1lXCIsIG5hbWUpO1xuICBpZiAob3B0aW9ucz8uZ3JvdXBJZCkge1xuICAgIGRhdGEuYXBwZW5kKFwiZ3JvdXBfaWRcIiwgb3B0aW9ucy5ncm91cElkKTtcbiAgfVxuICBpZiAob3B0aW9ucz8ubWV0YWRhdGE/LmtleXZhbHVlcykge1xuICAgIGRhdGEuYXBwZW5kKFwia2V5dmFsdWVzXCIsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubWV0YWRhdGEua2V5dmFsdWVzKSk7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YCxcbiAgICAgIFNvdXJjZTogXCJzZGsvdXJsXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly91cGxvYWRzLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLnVwbG9hZFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLnVwbG9hZFVybDtcbiAgfVxuICBpZiAob3B0aW9ucz8udXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChvcHRpb25zLnVybCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBkYXRhXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgY29uc3QgcmVzRGF0YSA9IHJlcy5kYXRhO1xuICAgICAgcmV0dXJuIHJlc0RhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGJhc2U2NDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFxuICAgICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHVwbG9hZCBiYXNlNjRcIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBkYXRhXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgaWYgKG9wdGlvbnM/LnZlY3Rvcml6ZSkge1xuICAgICAgY29uc3QgdmVjdG9yUmVxID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke2VuZHBvaW50fS92ZWN0b3JpemUvZmlsZXMvJHtyZXNEYXRhLmlkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmICh2ZWN0b3JSZXEub2spIHtcbiAgICAgICAgcmVzRGF0YS52ZWN0b3JpemVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc0RhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCB2ZWN0b3JSZXEudGV4dCgpO1xuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxuICAgICAgICAgIGBIVFRQIGVycm9yIGR1cmluZyB2ZWN0b3JpemF0aW9uOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHZlY3RvclJlcS5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBpbmF0YUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyB1cmw6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSB1cGxvYWRpbmcgYnkgdXJsXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9mdW5jdGlvbnMvdXBsb2Fkcy9jaWQudHNcbnZhciB1cGxvYWRDaWQgPSBhc3luYyAoY29uZmlnLCBjaWQsIG9wdGlvbnMpID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCBqd3QgPSBvcHRpb25zPy5rZXlzIHx8IGNvbmZpZz8ucGluYXRhSnd0O1xuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7and0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFNvdXJjZTogXCJzZGsvY2lkXCJcbiAgICB9O1xuICB9XG4gIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgIGNpZCxcbiAgICBuYW1lOiBvcHRpb25zPy5tZXRhZGF0YSA/IG9wdGlvbnM/Lm1ldGFkYXRhPy5uYW1lIDogY2lkLFxuICAgIGtleXZhbHVlczogb3B0aW9ucz8ubWV0YWRhdGE/LmtleXZhbHVlcyxcbiAgICBncm91cF9pZDogb3B0aW9ucz8uZ3JvdXBJZCxcbiAgICBob3N0X25vZGVzOiBvcHRpb25zPy5wZWVyQWRkcmVzc2VzXG4gIH07XG4gIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSk7XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgJHtlbmRwb2ludH0vZmlsZXMvcHVibGljL3Bpbl9ieV9jaWRgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHk6IGRhdGFcbiAgICB9KTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHJlc0RhdGEgPSByZXMuZGF0YTtcbiAgICByZXR1cm4gcmVzRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgY2lkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcGlubmluZyBieSBDSURcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvYW5hbHl0aWNzL0FuYWx5dGljcy50c1xudmFyIEFuYWx5dGljcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBmb3JtYXRDb25maWcoY29uZmlnKTtcbiAgICB0aGlzLnJlcXVlc3RzID0gbmV3IEFuYWx5dGljc1JlcXVlc3RzKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmJhbmR3aWR0aCA9IG5ldyBBbmFseXRpY3NCYW5kd2lkdGgodGhpcy5jb25maWcpO1xuICB9XG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IG5ld0NvbmZpZztcbiAgICB0aGlzLnJlcXVlc3RzLnVwZGF0ZUNvbmZpZyhuZXdDb25maWcpO1xuICAgIHRoaXMuYmFuZHdpZHRoLnVwZGF0ZUNvbmZpZyhuZXdDb25maWcpO1xuICB9XG4gIHN1bW1hcnkob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgVGltZUludGVydmFsQW5hbHl0aWNzQnVpbGRlcihcbiAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgb3B0aW9ucy5kb21haW4sXG4gICAgICBvcHRpb25zLnN0YXJ0LFxuICAgICAgb3B0aW9ucy5lbmQsXG4gICAgICBvcHRpb25zLmludGVydmFsXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy9hbmFseXRpY3MvdXRpbHMudHNcbnZhciBjYWxjdWxhdGVEYXRlcyA9IChkYXlzKSA9PiB7XG4gIGNvbnN0IGVuZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICBjb25zdCBzdGFydCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICBzdGFydC5zZXREYXRlKHN0YXJ0LmdldERhdGUoKSAtIGRheXMpO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydC50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSxcbiAgICBlbmQ6IGVuZC50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXVxuICB9O1xufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy9hbmFseXRpY3MvQW5hbHl0aWNzRmlsdGVyLnRzXG52YXIgQW5hbHl0aWNzRmlsdGVyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGRvbWFpbiwgc3RhcnQsIGVuZCkge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMucXVlcnkgPSB7XG4gICAgICBnYXRld2F5X2RvbWFpbjogZG9tYWluLFxuICAgICAgc3RhcnRfZGF0ZTogc3RhcnQsXG4gICAgICBlbmRfZGF0ZTogZW5kLFxuICAgICAgc29ydF9ieTogXCJyZXF1ZXN0c1wiLFxuICAgICAgLy8gV2lsbCBiZSBvdmVycmlkZGVuIGluIGNoaWxkIGNsYXNzZXNcbiAgICAgIGF0dHJpYnV0ZTogXCJjaWRcIlxuICAgIH07XG4gIH1cbiAgY2lkKGNpZCkge1xuICAgIHRoaXMucXVlcnkuYXR0cmlidXRlID0gXCJjaWRcIjtcbiAgICBpZiAoY2lkKSB7XG4gICAgICB0aGlzLnF1ZXJ5LmNpZCA9IGNpZDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZmlsZU5hbWUoZmlsZU5hbWUpIHtcbiAgICB0aGlzLnF1ZXJ5LmF0dHJpYnV0ZSA9IFwiZmlsZV9uYW1lXCI7XG4gICAgaWYgKGZpbGVOYW1lKSB7XG4gICAgICB0aGlzLnF1ZXJ5LmZpbGVfbmFtZSA9IGZpbGVOYW1lO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB1c2VyQWdlbnQodXNlckFnZW50KSB7XG4gICAgdGhpcy5xdWVyeS5hdHRyaWJ1dGUgPSBcInVzZXJfYWdlbnRcIjtcbiAgICBpZiAodXNlckFnZW50KSB7XG4gICAgICB0aGlzLnF1ZXJ5LnVzZXJfYWdlbnQgPSB1c2VyQWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGNvdW50cnkoY291bnRyeSkge1xuICAgIHRoaXMucXVlcnkuYXR0cmlidXRlID0gXCJjb3VudHJ5XCI7XG4gICAgaWYgKGNvdW50cnkpIHtcbiAgICAgIHRoaXMucXVlcnkuY291bnRyeSA9IGNvdW50cnk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlZ2lvbihyZWdpb24pIHtcbiAgICB0aGlzLnF1ZXJ5LmF0dHJpYnV0ZSA9IFwicmVnaW9uXCI7XG4gICAgaWYgKHJlZ2lvbikge1xuICAgICAgdGhpcy5xdWVyeS5yZWdpb24gPSByZWdpb247XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlZmVyZXIocmVmZXJlcikge1xuICAgIHRoaXMucXVlcnkuYXR0cmlidXRlID0gXCJyZWZlcmVyXCI7XG4gICAgaWYgKHJlZmVyZXIpIHtcbiAgICAgIHRoaXMucXVlcnkucmVmZXJlciA9IHJlZmVyZXI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpbWl0KGxpbWl0KSB7XG4gICAgdGhpcy5xdWVyeS5saW1pdCA9IGxpbWl0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNvcnQob3JkZXIpIHtcbiAgICB0aGlzLnF1ZXJ5LnNvcnRfb3JkZXIgPSBvcmRlcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkYXlzKG51bWJlck9mRGF5cykge1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gY2FsY3VsYXRlRGF0ZXMobnVtYmVyT2ZEYXlzKTtcbiAgICB0aGlzLnF1ZXJ5LnN0YXJ0X2RhdGUgPSBzdGFydDtcbiAgICB0aGlzLnF1ZXJ5LmVuZF9kYXRlID0gZW5kO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gYW5hbHl0aWNzVG9wVXNhZ2UodGhpcy5jb25maWcsIHRoaXMucXVlcnkpLnRoZW4oXG4gICAgICBvbmZ1bGZpbGxlZCxcbiAgICAgIG9ucmVqZWN0ZWRcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2FuYWx5dGljcy9BbmFseXRpY3NCYW5kd2lkdGgudHNcbnZhciBBbmFseXRpY3NCYW5kd2lkdGggPSBjbGFzcyBleHRlbmRzIEFuYWx5dGljc0ZpbHRlciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZywgXCJcIiwgXCJcIiwgXCJcIik7XG4gICAgdGhpcy5xdWVyeS5zb3J0X2J5ID0gXCJiYW5kd2lkdGhcIjtcbiAgfVxuICB1cGRhdGVDb25maWcobmV3Q29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBuZXdDb25maWc7XG4gIH1cbiAgY3VzdG9tRGF0ZXMoc3RhcnQsIGVuZCkge1xuICAgIGlmIChzdGFydCkgdGhpcy5xdWVyeS5zdGFydF9kYXRlID0gc3RhcnQ7XG4gICAgaWYgKGVuZCkgdGhpcy5xdWVyeS5lbmRfZGF0ZSA9IGVuZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBmcm9tKGRvbWFpbikge1xuICAgIHRoaXMucXVlcnkuZ2F0ZXdheV9kb21haW4gPSBkb21haW47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvYW5hbHl0aWNzL0FuYWx5dGljc0J1aWxkZXIudHNcbnZhciBBbmFseXRpY3NCdWlsZGVyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIHF1ZXJ5KSB7XG4gICAgdGhpcy5yZXF1ZXN0Q291bnQgPSAwO1xuICAgIHRoaXMubGFzdFJlcXVlc3RUaW1lID0gMDtcbiAgICB0aGlzLk1BWF9SRVFVRVNUU19QRVJfTUlOVVRFID0gMzA7XG4gICAgdGhpcy5NSU5VVEVfSU5fTVMgPSA2ZTQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICB9XG4gIGNpZChjaWQpIHtcbiAgICB0aGlzLnF1ZXJ5LmNpZCA9IGNpZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBmaWxlTmFtZShmaWxlTmFtZSkge1xuICAgIHRoaXMucXVlcnkuZmlsZV9uYW1lID0gZmlsZU5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdXNlckFnZW50KHVzZXJBZ2VudCkge1xuICAgIHRoaXMucXVlcnkudXNlcl9hZ2VudCA9IHVzZXJBZ2VudDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjb3VudHJ5KGNvdW50cnkpIHtcbiAgICB0aGlzLnF1ZXJ5LmNvdW50cnkgPSBjb3VudHJ5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlZ2lvbihyZWdpb24pIHtcbiAgICB0aGlzLnF1ZXJ5LnJlZ2lvbiA9IHJlZ2lvbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZWZlcmVyKHJlZmVyZXIpIHtcbiAgICB0aGlzLnF1ZXJ5LnJlZmVyZXIgPSByZWZlcmVyO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpbWl0KGxpbWl0KSB7XG4gICAgdGhpcy5xdWVyeS5saW1pdCA9IGxpbWl0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNvcnQob3JkZXIpIHtcbiAgICB0aGlzLnF1ZXJ5LnNvcnRfb3JkZXIgPSBvcmRlcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvLyBwcml2YXRlIGFzeW5jIHJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gXHR0aGlzLnJlcXVlc3RDb3VudCsrO1xuICAvLyBcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIC8vIFx0aWYgKHRoaXMucmVxdWVzdENvdW50ID49IHRoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUpIHtcbiAgLy8gXHRcdGNvbnN0IHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gdGhpcy5sYXN0UmVxdWVzdFRpbWU7XG4gIC8vIFx0XHRpZiAodGltZVBhc3NlZFNpbmNlTGFzdFJlcXVlc3QgPCB0aGlzLk1JTlVURV9JTl9NUykge1xuICAvLyBcdFx0XHRjb25zdCBkZWxheVRpbWUgPSB0aGlzLk1JTlVURV9JTl9NUyAtIHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0O1xuICAvLyBcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheVRpbWUpKTtcbiAgLy8gXHRcdH1cbiAgLy8gXHRcdHRoaXMucmVxdWVzdENvdW50ID0gMDtcbiAgLy8gXHR9XG4gIC8vIFx0dGhpcy5sYXN0UmVxdWVzdFRpbWUgPSBEYXRlLm5vdygpO1xuICAvLyB9XG4gIGFzeW5jIGdldEFuYWx5dGljcygpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJnZXRBbmFseXRpY3MgbWV0aG9kIG11c3QgYmUgaW1wbGVtZW50ZWQgaW4gZGVyaXZlZCBjbGFzc1wiKTtcbiAgfVxuICB0aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QW5hbHl0aWNzKCkudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvYW5hbHl0aWNzL0FuYWx5dGljc1JlcXVlc3RzLnRzXG52YXIgQW5hbHl0aWNzUmVxdWVzdHMgPSBjbGFzcyBleHRlbmRzIEFuYWx5dGljc0ZpbHRlciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZywgXCJcIiwgXCJcIiwgXCJcIik7XG4gICAgdGhpcy5xdWVyeS5zb3J0X2J5ID0gXCJyZXF1ZXN0c1wiO1xuICB9XG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IG5ld0NvbmZpZztcbiAgfVxuICBjdXN0b21EYXRlcyhzdGFydCwgZW5kKSB7XG4gICAgaWYgKHN0YXJ0KSB0aGlzLnF1ZXJ5LnN0YXJ0X2RhdGUgPSBzdGFydDtcbiAgICBpZiAoZW5kKSB0aGlzLnF1ZXJ5LmVuZF9kYXRlID0gZW5kO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGZyb20oZG9tYWluKSB7XG4gICAgdGhpcy5xdWVyeS5nYXRld2F5X2RvbWFpbiA9IGRvbWFpbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy9hbmFseXRpY3MvVGltZUludGVydmFsQW5hbHl0aWNzQnVpbGRlci50c1xudmFyIFRpbWVJbnRlcnZhbEFuYWx5dGljc0J1aWxkZXIgPSBjbGFzcyBleHRlbmRzIEFuYWx5dGljc0J1aWxkZXIge1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGRvbWFpbiwgc3RhcnQsIGVuZCwgZGF0ZUludGVydmFsKSB7XG4gICAgc3VwZXIoY29uZmlnLCB7XG4gICAgICBnYXRld2F5X2RvbWFpbjogZG9tYWluLFxuICAgICAgc3RhcnRfZGF0ZTogc3RhcnQsXG4gICAgICBlbmRfZGF0ZTogZW5kLFxuICAgICAgZGF0ZV9pbnRlcnZhbDogZGF0ZUludGVydmFsXG4gICAgfSk7XG4gIH1cbiAgc29ydEJ5KHNvcnRCeSkge1xuICAgIHRoaXMucXVlcnkuc29ydF9ieSA9IHNvcnRCeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhc3luYyBnZXRBbmFseXRpY3MoKSB7XG4gICAgcmV0dXJuIGFuYWx5dGljc0RhdGVJbnRlcnZhbCh0aGlzLmNvbmZpZywgdGhpcy5xdWVyeSk7XG4gIH1cbiAgYXN5bmMgYWxsKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFuYWx5dGljcygpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2dyb3Vwcy9Hcm91cHNGaWx0ZXIudHNcbnZhciBGaWx0ZXJHcm91cHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgcHJpdmFjeSkge1xuICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnByaXZhY3kgPSBwcml2YWN5O1xuICB9XG4gIG5hbWUobmFtZSkge1xuICAgIHRoaXMucXVlcnkubmFtZSA9IG5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbGltaXQobGltaXQpIHtcbiAgICB0aGlzLnF1ZXJ5LmxpbWl0ID0gbGltaXQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgaXNQdWJsaWMoaXNQdWJsaWMpIHtcbiAgICB0aGlzLnF1ZXJ5LmlzUHVibGljID0gaXNQdWJsaWM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcGFnZVRva2VuKHBhZ2VUb2tlbikge1xuICAgIHRoaXMucXVlcnkucGFnZVRva2VuID0gcGFnZVRva2VuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFBhZ2UoKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgdGhpcy5uZXh0UGFnZVRva2VuID0gcmVzcG9uc2UubmV4dF9wYWdlX3Rva2VuO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0pLnRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpO1xuICB9XG4gIGFzeW5jIGZldGNoUGFnZSgpIHtcbiAgICBpZiAodGhpcy5uZXh0UGFnZVRva2VuKSB7XG4gICAgICB0aGlzLnF1ZXJ5LnBhZ2VUb2tlbiA9IHRoaXMubmV4dFBhZ2VUb2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3RHcm91cHModGhpcy5jb25maWcsIHRoaXMucHJpdmFjeSwgdGhpcy5xdWVyeSk7XG4gIH1cbiAgLy8gcmF0ZSBsaW1pdCwgaG9wZWZ1bGx5IHRlbXBvcmFyeT9cbiAgLy8gcHJpdmF0ZSBhc3luYyByYXRlTGltaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIFx0dGhpcy5yZXF1ZXN0Q291bnQrKztcbiAgLy8gXHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAvLyBcdGlmICh0aGlzLnJlcXVlc3RDb3VudCA+PSB0aGlzLk1BWF9SRVFVRVNUU19QRVJfTUlOVVRFKSB7XG4gIC8vIFx0XHRjb25zdCB0aW1lUGFzc2VkU2luY2VMYXN0UmVxdWVzdCA9IG5vdyAtIHRoaXMubGFzdFJlcXVlc3RUaW1lO1xuICAvLyBcdFx0aWYgKHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0IDwgdGhpcy5NSU5VVEVfSU5fTVMpIHtcbiAgLy8gXHRcdFx0Y29uc3QgZGVsYXlUaW1lID0gdGhpcy5NSU5VVEVfSU5fTVMgLSB0aW1lUGFzc2VkU2luY2VMYXN0UmVxdWVzdDtcbiAgLy8gXHRcdFx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlUaW1lKSk7XG4gIC8vIFx0XHR9XG4gIC8vIFx0XHR0aGlzLnJlcXVlc3RDb3VudCA9IDA7XG4gIC8vIFx0fVxuICAvLyBcdHRoaXMubGFzdFJlcXVlc3RUaW1lID0gRGF0ZS5ub3coKTtcbiAgLy8gfVxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoUGFnZSgpO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3BvbnNlLmdyb3Vwcykge1xuICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgfVxuICAgICAgaWYgKCFyZXNwb25zZS5uZXh0X3BhZ2VfdG9rZW4pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0aGlzLm5leHRQYWdlVG9rZW4gPSByZXNwb25zZS5uZXh0X3BhZ2VfdG9rZW47XG4gICAgfVxuICB9XG4gIGFzeW5jIGFsbCgpIHtcbiAgICBjb25zdCBhbGxJdGVtcyA9IFtdO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiB0aGlzKSB7XG4gICAgICBhbGxJdGVtcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gYWxsSXRlbXM7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvZ3JvdXBzL1B1YmxpY0dyb3Vwcy50c1xudmFyIFB1YmxpY0dyb3VwcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBmb3JtYXRDb25maWcoY29uZmlnKTtcbiAgfVxuICB1cGRhdGVDb25maWcobmV3Q29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBuZXdDb25maWc7XG4gIH1cbiAgY3JlYXRlKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gY3JlYXRlR3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHVibGljXCIpO1xuICB9XG4gIGxpc3QoKSB7XG4gICAgcmV0dXJuIG5ldyBGaWx0ZXJHcm91cHModGhpcy5jb25maWcsIFwicHVibGljXCIpO1xuICB9XG4gIGdldChvcHRpb25zKSB7XG4gICAgcmV0dXJuIGdldEdyb3VwKHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInB1YmxpY1wiKTtcbiAgfVxuICBhZGRGaWxlcyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZFRvR3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHVibGljXCIpO1xuICB9XG4gIHJlbW92ZUZpbGVzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcmVtb3ZlRnJvbUdyb3VwKHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInB1YmxpY1wiKTtcbiAgfVxuICB1cGRhdGUob3B0aW9ucykge1xuICAgIHJldHVybiB1cGRhdGVHcm91cCh0aGlzLmNvbmZpZywgb3B0aW9ucywgXCJwdWJsaWNcIik7XG4gIH1cbiAgZGVsZXRlKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZGVsZXRlR3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHVibGljXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2dyb3Vwcy9Qcml2YXRlR3JvdXBzLnRzXG52YXIgUHJpdmF0ZUdyb3VwcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBmb3JtYXRDb25maWcoY29uZmlnKTtcbiAgfVxuICB1cGRhdGVDb25maWcobmV3Q29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBuZXdDb25maWc7XG4gIH1cbiAgY3JlYXRlKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gY3JlYXRlR3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHJpdmF0ZVwiKTtcbiAgfVxuICBsaXN0KCkge1xuICAgIHJldHVybiBuZXcgRmlsdGVyR3JvdXBzKHRoaXMuY29uZmlnLCBcInByaXZhdGVcIik7XG4gIH1cbiAgZ2V0KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZ2V0R3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHJpdmF0ZVwiKTtcbiAgfVxuICBhZGRGaWxlcyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZFRvR3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHJpdmF0ZVwiKTtcbiAgfVxuICByZW1vdmVGaWxlcyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHJlbW92ZUZyb21Hcm91cCh0aGlzLmNvbmZpZywgb3B0aW9ucywgXCJwcml2YXRlXCIpO1xuICB9XG4gIHVwZGF0ZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVwZGF0ZUdyb3VwKHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInByaXZhdGVcIik7XG4gIH1cbiAgZGVsZXRlKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZGVsZXRlR3JvdXAodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHJpdmF0ZVwiKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy9ncm91cHMvR3JvdXBzLnRzXG52YXIgR3JvdXBzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGZvcm1hdENvbmZpZyhjb25maWcpO1xuICAgIHRoaXMucHVibGljID0gbmV3IFB1YmxpY0dyb3Vwcyhjb25maWcpO1xuICAgIHRoaXMucHJpdmF0ZSA9IG5ldyBQcml2YXRlR3JvdXBzKGNvbmZpZyk7XG4gIH1cbiAgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gbmV3Q29uZmlnO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2tleXMvS2V5cy50c1xudmFyIEtleXMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gZm9ybWF0Q29uZmlnKGNvbmZpZyk7XG4gIH1cbiAgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gbmV3Q29uZmlnO1xuICB9XG4gIGNyZWF0ZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUtleSh0aGlzLmNvbmZpZywgb3B0aW9ucyk7XG4gIH1cbiAgbGlzdCgpIHtcbiAgICByZXR1cm4gbmV3IEZpbHRlcktleXModGhpcy5jb25maWcpO1xuICB9XG4gIHJldm9rZShrZXlzKSB7XG4gICAgcmV0dXJuIHJldm9rZUtleXModGhpcy5jb25maWcsIGtleXMpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2tleXMvRmlsdGVyS2V5cy50c1xudmFyIEZpbHRlcktleXMgPSBjbGFzcyB7XG4gIC8vIHJhdGUgbGltaXQgdmFyc1xuICAvLyBwcml2YXRlIHJlcXVlc3RDb3VudCA9IDA7XG4gIC8vIHByaXZhdGUgbGFzdFJlcXVlc3RUaW1lID0gMDtcbiAgLy8gcHJpdmF0ZSByZWFkb25seSBNQVhfUkVRVUVTVFNfUEVSX01JTlVURSA9IDMwO1xuICAvLyBwcml2YXRlIHJlYWRvbmx5IE1JTlVURV9JTl9NUyA9IDYwMDAwO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLnF1ZXJ5ID0ge307XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cbiAgb2Zmc2V0KG9mZnNldCkge1xuICAgIHRoaXMucXVlcnkub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldm9rZWQocmV2b2tlZCkge1xuICAgIHRoaXMucXVlcnkucmV2b2tlZCA9IHJldm9rZWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbGltaXRlZFVzZShsaW1pdGVkVXNlKSB7XG4gICAgdGhpcy5xdWVyeS5saW1pdGVkVXNlID0gbGltaXRlZFVzZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBleGhhdXN0ZWQoZXhoYXVzdGVkKSB7XG4gICAgdGhpcy5xdWVyeS5leGhhdXN0ZWQgPSBleGhhdXN0ZWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbmFtZShuYW1lKSB7XG4gICAgdGhpcy5xdWVyeS5uYW1lID0gbmFtZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKSB7XG4gICAgcmV0dXJuIGxpc3RLZXlzKHRoaXMuY29uZmlnLCB0aGlzLnF1ZXJ5KS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcbiAgfVxuICAvLyBwcml2YXRlIGFzeW5jIHJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gXHR0aGlzLnJlcXVlc3RDb3VudCsrO1xuICAvLyBcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIC8vIFx0aWYgKHRoaXMucmVxdWVzdENvdW50ID49IHRoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUpIHtcbiAgLy8gXHRcdGNvbnN0IHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gdGhpcy5sYXN0UmVxdWVzdFRpbWU7XG4gIC8vIFx0XHRpZiAodGltZVBhc3NlZFNpbmNlTGFzdFJlcXVlc3QgPCB0aGlzLk1JTlVURV9JTl9NUykge1xuICAvLyBcdFx0XHRjb25zdCBkZWxheVRpbWUgPSB0aGlzLk1JTlVURV9JTl9NUyAtIHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0O1xuICAvLyBcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheVRpbWUpKTtcbiAgLy8gXHRcdH1cbiAgLy8gXHRcdHRoaXMucmVxdWVzdENvdW50ID0gMDtcbiAgLy8gXHR9XG4gIC8vIFx0dGhpcy5sYXN0UmVxdWVzdFRpbWUgPSBEYXRlLm5vdygpO1xuICAvLyB9XG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGxldCBoYXNNb3JlID0gdHJ1ZTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICB3aGlsZSAoaGFzTW9yZSkge1xuICAgICAgdGhpcy5xdWVyeS5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGxpc3RLZXlzKHRoaXMuY29uZmlnLCB0aGlzLnF1ZXJ5KTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBoYXNNb3JlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvZmZzZXQgKz0gaXRlbXMubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3luYyBhbGwoKSB7XG4gICAgY29uc3QgYWxsSXRlbXMgPSBbXTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgdGhpcykge1xuICAgICAgYWxsSXRlbXMucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIGFsbEl0ZW1zO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2dhdGV3YXlzL0dhdGV3YXlzLnRzXG52YXIgR2F0ZXdheXMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gZm9ybWF0Q29uZmlnKGNvbmZpZyk7XG4gICAgdGhpcy5wdWJsaWMgPSBuZXcgUHVibGljR2F0ZXdheXMoY29uZmlnKTtcbiAgICB0aGlzLnByaXZhdGUgPSBuZXcgUHJpdmF0ZUdhdGV3YXlzKGNvbmZpZyk7XG4gIH1cbiAgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gbmV3Q29uZmlnO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2dhdGV3YXlzL09wdGltaXplSW1hZ2VDcmVhdGVTaWduZWRVcmwudHNcbnZhciBPcHRpbWl6ZUltYWdlQ3JlYXRlQWNjZXNzTGluayA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCB1cmxPcHRzKSB7XG4gICAgdGhpcy5pbWdPcHRzID0ge307XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy51cmxPcHRzID0gdXJsT3B0cztcbiAgfVxuICBvcHRpbWl6ZUltYWdlKG9wdGlvbnMpIHtcbiAgICB0aGlzLmltZ09wdHMgPSB7IC4uLnRoaXMuaW1nT3B0cywgLi4ub3B0aW9ucyB9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gY3JlYXRlQWNjZXNzTGluayh0aGlzLmNvbmZpZywgdGhpcy51cmxPcHRzLCB0aGlzLmltZ09wdHMpLnRoZW4oXG4gICAgICBvbmZ1bGZpbGxlZCxcbiAgICAgIG9ucmVqZWN0ZWRcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2dhdGV3YXlzL09wdGltaXplSW1hZ2VHZXRDaWQudHNcbnZhciBPcHRpbWl6ZUltYWdlR2V0Q2lkID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGNpZCwgZ2F0ZXdheVR5cGUpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmNpZCA9IGNpZDtcbiAgICB0aGlzLmdhdGV3YXlUeXBlID0gZ2F0ZXdheVR5cGU7XG4gIH1cbiAgb3B0aW1pemVJbWFnZShvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKSB7XG4gICAgcmV0dXJuIGdldENpZCh0aGlzLmNvbmZpZywgdGhpcy5jaWQsIHRoaXMuZ2F0ZXdheVR5cGUsIHRoaXMub3B0aW9ucykudGhlbihcbiAgICAgIG9uZnVsZmlsbGVkLFxuICAgICAgb25yZWplY3RlZFxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvZ2F0ZXdheXMvUHJpdmF0ZUdhdGV3YXlzLnRzXG52YXIgUHJpdmF0ZUdhdGV3YXlzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuICBnZXQoY2lkKSB7XG4gICAgcmV0dXJuIG5ldyBPcHRpbWl6ZUltYWdlR2V0Q2lkKHRoaXMuY29uZmlnLCBjaWQsIFwiZmlsZXNcIik7XG4gIH1cbiAgY3JlYXRlQWNjZXNzTGluayhvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPcHRpbWl6ZUltYWdlQ3JlYXRlQWNjZXNzTGluayh0aGlzLmNvbmZpZywgb3B0aW9ucyk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvZ2F0ZXdheXMvUHVibGljR2F0ZXdheXMudHNcbnZhciBQdWJsaWNHYXRld2F5cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cbiAgZ2V0KGNpZCkge1xuICAgIHJldHVybiBuZXcgT3B0aW1pemVJbWFnZUdldENpZCh0aGlzLmNvbmZpZywgY2lkLCBcImlwZnNcIik7XG4gIH1cbiAgY29udmVydCh1cmwsIGdhdGV3YXlQcmVmaXgpIHtcbiAgICByZXR1cm4gY29udmVydElQRlNVcmwodGhpcy5jb25maWcsIHVybCwgZ2F0ZXdheVByZWZpeCk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9maWxlcy9nZXRGaWxlLnRzXG52YXIgZ2V0RmlsZSA9IGFzeW5jIChjb25maWcsIGlkLCBwcml2YWN5KSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAuLi5jb25maWcuY3VzdG9tSGVhZGVyc1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFNvdXJjZTogXCJzZGsvZ2V0RmlsZVwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2ZpbGVzLyR7cHJpdmFjeX0vJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7XG4gICAgcmV0dXJuIHJlc0RhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGdldEdyb3VwOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGluZm8gZm9yIGEgZ3JvdXBcIlxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvZmlsZXMvRmlsdGVyRmlsZXMudHNcbnZhciBGaWx0ZXJGaWxlcyA9IGNsYXNzIHtcbiAgLy8gcmF0ZSBsaW1pdCB2YXJzXG4gIC8vIHByaXZhdGUgcmVxdWVzdENvdW50ID0gMDtcbiAgLy8gcHJpdmF0ZSBsYXN0UmVxdWVzdFRpbWUgPSAwO1xuICAvLyBwcml2YXRlIHJlYWRvbmx5IE1BWF9SRVFVRVNUU19QRVJfTUlOVVRFID0gMzA7XG4gIC8vIHByaXZhdGUgcmVhZG9ubHkgTUlOVVRFX0lOX01TID0gNjAwMDA7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgcHJpdmFjeSkge1xuICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnByaXZhY3kgPSBwcml2YWN5O1xuICB9XG4gIG5hbWUobmFtZSkge1xuICAgIHRoaXMucXVlcnkubmFtZSA9IG5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ3JvdXAoZ3JvdXApIHtcbiAgICB0aGlzLnF1ZXJ5Lmdyb3VwID0gZ3JvdXA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2lkKGNpZCkge1xuICAgIHRoaXMucXVlcnkuY2lkID0gY2lkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG1pbWVUeXBlKG1pbWVUeXBlKSB7XG4gICAgdGhpcy5xdWVyeS5taW1lVHlwZSA9IG1pbWVUeXBlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG9yZGVyKG9yZGVyKSB7XG4gICAgdGhpcy5xdWVyeS5vcmRlciA9IG9yZGVyO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpbWl0KGxpbWl0KSB7XG4gICAgdGhpcy5xdWVyeS5saW1pdCA9IGxpbWl0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGNpZFBlbmRpbmcoY2lkUGVuZGluZykge1xuICAgIHRoaXMucXVlcnkuY2lkUGVuZGluZyA9IGNpZFBlbmRpbmc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAga2V5dmFsdWVzKGtleXZhbHVlcykge1xuICAgIHRoaXMucXVlcnkubWV0YWRhdGEgPSBrZXl2YWx1ZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbm9Hcm91cChub0dyb3VwKSB7XG4gICAgdGhpcy5xdWVyeS5ub0dyb3VwID0gbm9Hcm91cDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwYWdlVG9rZW4ocGFnZVRva2VuKSB7XG4gICAgdGhpcy5xdWVyeS5wYWdlVG9rZW4gPSBwYWdlVG9rZW47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUGFnZSgpLnRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpO1xuICB9XG4gIGFzeW5jIGZldGNoUGFnZSgpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50UGFnZVRva2VuKSB7XG4gICAgICB0aGlzLnF1ZXJ5LnBhZ2VUb2tlbiA9IHRoaXMuY3VycmVudFBhZ2VUb2tlbjtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsaXN0RmlsZXModGhpcy5jb25maWcsIHRoaXMucHJpdmFjeSwgdGhpcy5xdWVyeSk7XG4gICAgdGhpcy5jdXJyZW50UGFnZVRva2VuID0gcmVzcG9uc2UubmV4dF9wYWdlX3Rva2VuO1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuICAvLyAvLyByYXRlIGxpbWl0LCBob3BlZnVsbHkgdGVtcG9yYXJ5P1xuICAvLyBwcml2YXRlIGFzeW5jIHJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gXHR0aGlzLnJlcXVlc3RDb3VudCsrO1xuICAvLyBcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIC8vIFx0aWYgKHRoaXMucmVxdWVzdENvdW50ID49IHRoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUpIHtcbiAgLy8gXHRcdGNvbnN0IHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gdGhpcy5sYXN0UmVxdWVzdFRpbWU7XG4gIC8vIFx0XHRpZiAodGltZVBhc3NlZFNpbmNlTGFzdFJlcXVlc3QgPCB0aGlzLk1JTlVURV9JTl9NUykge1xuICAvLyBcdFx0XHRjb25zdCBkZWxheVRpbWUgPSB0aGlzLk1JTlVURV9JTl9NUyAtIHRpbWVQYXNzZWRTaW5jZUxhc3RSZXF1ZXN0O1xuICAvLyBcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheVRpbWUpKTtcbiAgLy8gXHRcdH1cbiAgLy8gXHRcdHRoaXMucmVxdWVzdENvdW50ID0gMDtcbiAgLy8gXHR9XG4gIC8vIFx0dGhpcy5sYXN0UmVxdWVzdFRpbWUgPSBEYXRlLm5vdygpO1xuICAvLyB9XG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHRoaXMuZmV0Y2hQYWdlKCk7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMuZmlsZXMpIHtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5jdXJyZW50UGFnZVRva2VuKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3luYyBhbGwoKSB7XG4gICAgY29uc3QgYWxsSXRlbXMgPSBbXTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgdGhpcykge1xuICAgICAgYWxsSXRlbXMucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIGFsbEl0ZW1zO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2ZpbGVzL0ZpbHRlclF1ZXVlLnRzXG52YXIgRmlsdGVyUXVldWUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgICAvLyByYXRlIGxpbWl0IHZhcnNcbiAgICB0aGlzLnJlcXVlc3RDb3VudCA9IDA7XG4gICAgdGhpcy5sYXN0UmVxdWVzdFRpbWUgPSAwO1xuICAgIHRoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUgPSAzMDtcbiAgICB0aGlzLk1JTlVURV9JTl9NUyA9IDZlNDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuICBjaWQoY2lkKSB7XG4gICAgdGhpcy5xdWVyeS5jaWQgPSBjaWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3RhdHVzKHN0YXR1cykge1xuICAgIHRoaXMucXVlcnkuc3RhdHVzID0gc3RhdHVzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHBhZ2VMaW1pdChsaW1pdCkge1xuICAgIHRoaXMucXVlcnkubGltaXQgPSBsaW1pdDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwYWdlVG9rZW4ocGFnZVRva2VuKSB7XG4gICAgdGhpcy5xdWVyeS5wYWdlVG9rZW4gPSBwYWdlVG9rZW47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYXN5bmMgZmV0Y2hQYWdlKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlVG9rZW4pIHtcbiAgICAgIHRoaXMucXVlcnkucGFnZVRva2VuID0gdGhpcy5jdXJyZW50UGFnZVRva2VuO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHF1ZXVlKHRoaXMuY29uZmlnLCB0aGlzLnF1ZXJ5KTtcbiAgICB0aGlzLmN1cnJlbnRQYWdlVG9rZW4gPSByZXNwb25zZS5uZXh0X3BhZ2VfdG9rZW47XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIHNvcnQoc29ydCkge1xuICAgIHRoaXMucXVlcnkuc29ydCA9IHNvcnQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuICAgIHJldHVybiBxdWV1ZSh0aGlzLmNvbmZpZywgdGhpcy5xdWVyeSkudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG4gIH1cbiAgLy8gcmF0ZSBsaW1pdCwgaG9wZWZ1bGx5IHRlbXBvcmFyeT9cbiAgYXN5bmMgcmF0ZUxpbWl0KCkge1xuICAgIHRoaXMucmVxdWVzdENvdW50Kys7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5yZXF1ZXN0Q291bnQgPj0gdGhpcy5NQVhfUkVRVUVTVFNfUEVSX01JTlVURSkge1xuICAgICAgY29uc3QgdGltZVBhc3NlZFNpbmNlTGFzdFJlcXVlc3QgPSBub3cgLSB0aGlzLmxhc3RSZXF1ZXN0VGltZTtcbiAgICAgIGlmICh0aW1lUGFzc2VkU2luY2VMYXN0UmVxdWVzdCA8IHRoaXMuTUlOVVRFX0lOX01TKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5VGltZSA9IHRoaXMuTUlOVVRFX0lOX01TIC0gdGltZVBhc3NlZFNpbmNlTGFzdFJlcXVlc3Q7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5VGltZSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXF1ZXN0Q291bnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IERhdGUubm93KCk7XG4gIH1cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgdGhpcy5mZXRjaFBhZ2UoKTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcy5qb2JzKSB7XG4gICAgICAgIHlpZWxkIGl0ZW07XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuY3VycmVudFBhZ2VUb2tlbikge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgYXN5bmMgYWxsKCkge1xuICAgIGNvbnN0IGFsbEl0ZW1zID0gW107XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHRoaXMpIHtcbiAgICAgIGFsbEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiBhbGxJdGVtcztcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy9maWxlcy9QdWJsaWNGaWxlcy50c1xudmFyIFB1YmxpY0ZpbGVzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGZvcm1hdENvbmZpZyhjb25maWcpO1xuICB9XG4gIGxpc3QoKSB7XG4gICAgcmV0dXJuIG5ldyBGaWx0ZXJGaWxlcyh0aGlzLmNvbmZpZywgXCJwdWJsaWNcIik7XG4gIH1cbiAgZ2V0KGlkKSB7XG4gICAgcmV0dXJuIGdldEZpbGUodGhpcy5jb25maWcsIGlkLCBcInB1YmxpY1wiKTtcbiAgfVxuICBkZWxldGUoZmlsZXMpIHtcbiAgICByZXR1cm4gZGVsZXRlRmlsZSh0aGlzLmNvbmZpZywgZmlsZXMsIFwicHVibGljXCIpO1xuICB9XG4gIHVwZGF0ZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVwZGF0ZUZpbGUodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHVibGljXCIpO1xuICB9XG4gIGFkZFN3YXAob3B0aW9ucykge1xuICAgIHJldHVybiBzd2FwQ2lkKHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInB1YmxpY1wiKTtcbiAgfVxuICBnZXRTd2FwSGlzdG9yeShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHN3YXBIaXN0b3J5KHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInB1YmxpY1wiKTtcbiAgfVxuICBkZWxldGVTd2FwKGNpZCkge1xuICAgIHJldHVybiBkZWxldGVTd2FwKHRoaXMuY29uZmlnLCBjaWQsIFwicHVibGljXCIpO1xuICB9XG4gIHF1ZXVlKCkge1xuICAgIHJldHVybiBuZXcgRmlsdGVyUXVldWUodGhpcy5jb25maWcpO1xuICB9XG4gIGRlbGV0ZVBpblJlcXVlc3QocmVxdWVzdElkKSB7XG4gICAgcmV0dXJuIGRlbGV0ZVBpblJlcXVlc3QodGhpcy5jb25maWcsIHJlcXVlc3RJZCk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvZmlsZXMvUHJpdmF0ZUZpbGVzLnRzXG52YXIgUHJpdmF0ZUZpbGVzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGZvcm1hdENvbmZpZyhjb25maWcpO1xuICB9XG4gIGxpc3QoKSB7XG4gICAgcmV0dXJuIG5ldyBGaWx0ZXJGaWxlcyh0aGlzLmNvbmZpZywgXCJwcml2YXRlXCIpO1xuICB9XG4gIGdldChpZCkge1xuICAgIHJldHVybiBnZXRGaWxlKHRoaXMuY29uZmlnLCBpZCwgXCJwcml2YXRlXCIpO1xuICB9XG4gIGRlbGV0ZShmaWxlcykge1xuICAgIHJldHVybiBkZWxldGVGaWxlKHRoaXMuY29uZmlnLCBmaWxlcywgXCJwcml2YXRlXCIpO1xuICB9XG4gIHVwZGF0ZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVwZGF0ZUZpbGUodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHJpdmF0ZVwiKTtcbiAgfVxuICBhZGRTd2FwKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc3dhcENpZCh0aGlzLmNvbmZpZywgb3B0aW9ucywgXCJwcml2YXRlXCIpO1xuICB9XG4gIGdldFN3YXBIaXN0b3J5KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc3dhcEhpc3RvcnkodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHJpdmF0ZVwiKTtcbiAgfVxuICBkZWxldGVTd2FwKGNpZCkge1xuICAgIHJldHVybiBkZWxldGVTd2FwKHRoaXMuY29uZmlnLCBjaWQsIFwicHJpdmF0ZVwiKTtcbiAgfVxuICB2ZWN0b3JpemUoZmlsZUlkKSB7XG4gICAgcmV0dXJuIHZlY3Rvcml6ZUZpbGUodGhpcy5jb25maWcsIGZpbGVJZCk7XG4gIH1cbiAgcXVlcnlWZWN0b3JzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdmVjdG9yaXplUXVlcnkodGhpcy5jb25maWcsIG9wdGlvbnMpO1xuICB9XG4gIGRlbGV0ZVZlY3RvcnMoZmlsZUlkKSB7XG4gICAgcmV0dXJuIGRlbGV0ZUZpbGVWZWN0b3JzKHRoaXMuY29uZmlnLCBmaWxlSWQpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL2ZpbGVzL0ZpbGVzLnRzXG52YXIgRmlsZXMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gZm9ybWF0Q29uZmlnKGNvbmZpZyk7XG4gICAgdGhpcy5wdWJsaWMgPSBuZXcgUHVibGljRmlsZXMoY29uZmlnKTtcbiAgICB0aGlzLnByaXZhdGUgPSBuZXcgUHJpdmF0ZUZpbGVzKGNvbmZpZyk7XG4gIH1cbiAgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gbmV3Q29uZmlnO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL3VwbG9hZHMvVXBsb2FkQnVpbGRlci50c1xudmFyIFVwbG9hZEJ1aWxkZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgdXBsb2FkRnVuY3Rpb24sIC4uLmFyZ3MpIHtcbiAgICB0aGlzLm1ldGFkYXRhID0ge307XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy51cGxvYWRGdW5jdGlvbiA9IHVwbG9hZEZ1bmN0aW9uO1xuICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gIH1cbiAgLy8gUmVwbGFjZSBhZGRNZXRhZGF0YSB3aXRoIHRoZXNlIHR3byBtZXRob2RzOlxuICBuYW1lKG5hbWUpIHtcbiAgICBpZiAoIXRoaXMubWV0YWRhdGEpIHtcbiAgICAgIHRoaXMubWV0YWRhdGEgPSB7fTtcbiAgICB9XG4gICAgdGhpcy5tZXRhZGF0YS5uYW1lID0gbmFtZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBrZXl2YWx1ZXMoa2V5dmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLm1ldGFkYXRhKSB7XG4gICAgICB0aGlzLm1ldGFkYXRhID0ge307XG4gICAgfVxuICAgIHRoaXMubWV0YWRhdGEua2V5dmFsdWVzID0ga2V5dmFsdWVzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGtleShqd3QpIHtcbiAgICB0aGlzLmtleXMgPSBqd3Q7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdmVjdG9yaXplKCkge1xuICAgIHRoaXMudmVjdG9yID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB1cmwodXJsKSB7XG4gICAgdGhpcy51cGxvYWRVcmwgPSB1cmw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLy8gY2lkVmVyc2lvbih2OiAwIHwgMSk6IFVwbG9hZEJ1aWxkZXI8VD4ge1xuICAvLyBcdHRoaXMudmVyc2lvbiA9IHY7XG4gIC8vIFx0cmV0dXJuIHRoaXM7XG4gIC8vIH1cbiAgZ3JvdXAoZ3JvdXBJZCkge1xuICAgIHRoaXMuZ3JvdXBJZCA9IGdyb3VwSWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3RyZWFtYWJsZSgpIHtcbiAgICB0aGlzLmlzU3RyZWFtYWJsZSA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcGVlckFkZHJlc3MocGVlckFkZHJlc3Nlcykge1xuICAgIHRoaXMucGVlckFkZHJlc3NlcyA9IHBlZXJBZGRyZXNzZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmFyZ3NbdGhpcy5hcmdzLmxlbmd0aCAtIDFdIHx8IHt9O1xuICAgIGlmICh0aGlzLm1ldGFkYXRhKSB7XG4gICAgICBvcHRpb25zLm1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YTtcbiAgICB9XG4gICAgaWYgKHRoaXMua2V5cykge1xuICAgICAgb3B0aW9ucy5rZXlzID0gdGhpcy5rZXlzO1xuICAgIH1cbiAgICBpZiAodGhpcy5ncm91cElkKSB7XG4gICAgICBvcHRpb25zLmdyb3VwSWQgPSB0aGlzLmdyb3VwSWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLnZlY3Rvcikge1xuICAgICAgb3B0aW9ucy52ZWN0b3JpemUgPSB0aGlzLnZlY3RvcjtcbiAgICB9XG4gICAgaWYgKHRoaXMudXBsb2FkVXJsKSB7XG4gICAgICBvcHRpb25zLnVybCA9IHRoaXMudXBsb2FkVXJsO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc1N0cmVhbWFibGUpIHtcbiAgICAgIG9wdGlvbnMuc3RyZWFtYWJsZSA9IHRoaXMuaXNTdHJlYW1hYmxlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wZWVyQWRkcmVzc2VzKSB7XG4gICAgICBvcHRpb25zLnBlZXJBZGRyZXNzZXMgPSB0aGlzLnBlZXJBZGRyZXNzZXM7XG4gICAgfVxuICAgIHRoaXMuYXJnc1t0aGlzLmFyZ3MubGVuZ3RoIC0gMV0gPSBvcHRpb25zO1xuICAgIHJldHVybiB0aGlzLnVwbG9hZEZ1bmN0aW9uKHRoaXMuY29uZmlnLCAuLi50aGlzLmFyZ3MpLnRoZW4oXG4gICAgICBvbmZ1bGZpbGxlZCxcbiAgICAgIG9ucmVqZWN0ZWRcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL3VwbG9hZHMvUHVibGljVXBsb2FkLnRzXG52YXIgUHVibGljVXBsb2FkID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGZvcm1hdENvbmZpZyhjb25maWcpO1xuICB9XG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IG5ld0NvbmZpZztcbiAgfVxuICBmaWxlKGZpbGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFVwbG9hZEJ1aWxkZXIoXG4gICAgICB0aGlzLmNvbmZpZyxcbiAgICAgIChjb25maWcsIGZpbGUyLCBvcHRpb25zMikgPT4gdXBsb2FkRmlsZShjb25maWcsIGZpbGUyLCBcInB1YmxpY1wiLCBvcHRpb25zMiksXG4gICAgICBmaWxlLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gIH1cbiAgZmlsZUFycmF5KGZpbGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBVcGxvYWRCdWlsZGVyKFxuICAgICAgdGhpcy5jb25maWcsXG4gICAgICAoY29uZmlnLCBmaWxlLCBvcHRpb25zMikgPT4gdXBsb2FkRmlsZUFycmF5KGNvbmZpZywgZmlsZSwgXCJwdWJsaWNcIiwgb3B0aW9uczIpLFxuICAgICAgZmlsZXMsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICBiYXNlNjQoYmFzZTY0U3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBVcGxvYWRCdWlsZGVyKFxuICAgICAgdGhpcy5jb25maWcsXG4gICAgICAoY29uZmlnLCBiYXNlNjRTdHJpbmcyLCBvcHRpb25zMikgPT4gdXBsb2FkQmFzZTY0KGNvbmZpZywgYmFzZTY0U3RyaW5nMiwgXCJwdWJsaWNcIiwgb3B0aW9uczIpLFxuICAgICAgYmFzZTY0U3RyaW5nLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gIH1cbiAgdXJsKHVybCwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgVXBsb2FkQnVpbGRlcihcbiAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgKGNvbmZpZywgdXJsMiwgb3B0aW9uczIpID0+IHVwbG9hZFVybChjb25maWcsIHVybDIsIFwicHVibGljXCIsIG9wdGlvbnMyKSxcbiAgICAgIHVybCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIGpzb24oZGF0YSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgVXBsb2FkQnVpbGRlcihcbiAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgKGNvbmZpZywgZGF0YTIsIG9wdGlvbnMyKSA9PiB1cGxvYWRKc29uKGNvbmZpZywgZGF0YTIsIFwicHVibGljXCIsIG9wdGlvbnMyKSxcbiAgICAgIGRhdGEsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICBjaWQoY2lkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBVcGxvYWRCdWlsZGVyKFxuICAgICAgdGhpcy5jb25maWcsXG4gICAgICAoY29uZmlnLCBjaWQyLCBvcHRpb25zMikgPT4gdXBsb2FkQ2lkKGNvbmZpZywgY2lkMiwgb3B0aW9uczIpLFxuICAgICAgY2lkLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gIH1cbiAgY3JlYXRlU2lnbmVkVVJMKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gY3JlYXRlU2lnbmVkVXBsb2FkVVJMKHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInB1YmxpY1wiKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy91cGxvYWRzL1ByaXZhdGVVcGxvYWQudHNcbnZhciBQcml2YXRlVXBsb2FkID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGZvcm1hdENvbmZpZyhjb25maWcpO1xuICB9XG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IG5ld0NvbmZpZztcbiAgfVxuICBmaWxlKGZpbGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFVwbG9hZEJ1aWxkZXIoXG4gICAgICB0aGlzLmNvbmZpZyxcbiAgICAgIChjb25maWcsIGZpbGUyLCBvcHRpb25zMikgPT4gdXBsb2FkRmlsZShjb25maWcsIGZpbGUyLCBcInByaXZhdGVcIiwgb3B0aW9uczIpLFxuICAgICAgZmlsZSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIC8vIFJlc2VydmVkIGZvciBmdXR1cmUgcmVsZWFzZVxuICAvLyBmaWxlQXJyYXkoXG4gIC8vIFx0ZmlsZXM6IEZpbGVPYmplY3RbXSxcbiAgLy8gXHRvcHRpb25zPzogVXBsb2FkT3B0aW9ucyxcbiAgLy8gKTogVXBsb2FkQnVpbGRlcjxVcGxvYWRSZXNwb25zZT4ge1xuICAvLyBcdHJldHVybiBuZXcgVXBsb2FkQnVpbGRlcihcbiAgLy8gXHRcdHRoaXMuY29uZmlnLFxuICAvLyBcdFx0KGNvbmZpZywgZmlsZSwgb3B0aW9ucykgPT5cbiAgLy8gXHRcdFx0dXBsb2FkRmlsZUFycmF5KGNvbmZpZywgZmlsZSwgXCJwcml2YXRlXCIsIG9wdGlvbnMpLFxuICAvLyBcdFx0ZmlsZXMsXG4gIC8vIFx0XHRvcHRpb25zLFxuICAvLyBcdCk7XG4gIC8vIH1cbiAgYmFzZTY0KGJhc2U2NFN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgVXBsb2FkQnVpbGRlcihcbiAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgKGNvbmZpZywgYmFzZTY0U3RyaW5nMiwgb3B0aW9uczIpID0+IHVwbG9hZEJhc2U2NChjb25maWcsIGJhc2U2NFN0cmluZzIsIFwicHJpdmF0ZVwiLCBvcHRpb25zMiksXG4gICAgICBiYXNlNjRTdHJpbmcsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICB1cmwodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBVcGxvYWRCdWlsZGVyKFxuICAgICAgdGhpcy5jb25maWcsXG4gICAgICAoY29uZmlnLCB1cmwyLCBvcHRpb25zMikgPT4gdXBsb2FkVXJsKGNvbmZpZywgdXJsMiwgXCJwcml2YXRlXCIsIG9wdGlvbnMyKSxcbiAgICAgIHVybCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIGpzb24oZGF0YSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgVXBsb2FkQnVpbGRlcihcbiAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgKGNvbmZpZywgZGF0YTIsIG9wdGlvbnMyKSA9PiB1cGxvYWRKc29uKGNvbmZpZywgZGF0YTIsIFwicHJpdmF0ZVwiLCBvcHRpb25zMiksXG4gICAgICBkYXRhLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gIH1cbiAgY3JlYXRlU2lnbmVkVVJMKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gY3JlYXRlU2lnbmVkVXBsb2FkVVJMKHRoaXMuY29uZmlnLCBvcHRpb25zLCBcInByaXZhdGVcIik7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2NsYXNzZXMvdXBsb2Fkcy9VcGxvYWQudHNcbnZhciBVcGxvYWQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gZm9ybWF0Q29uZmlnKGNvbmZpZyk7XG4gICAgdGhpcy5wdWJsaWMgPSBuZXcgUHVibGljVXBsb2FkKGNvbmZpZyk7XG4gICAgdGhpcy5wcml2YXRlID0gbmV3IFByaXZhdGVVcGxvYWQoY29uZmlnKTtcbiAgfVxuICB1cGRhdGVDb25maWcobmV3Q29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBuZXdDb25maWc7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9zaWduYXR1cmVzL2FkZFNpZ25hdHVyZS50c1xudmFyIGFkZFNpZ25hdHVyZSA9IGFzeW5jIChjb25maWcsIG9wdGlvbnMsIG5ldHdvcmspID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiUGluYXRhIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZ1wiKTtcbiAgfVxuICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHNpZ25hdHVyZTogb3B0aW9ucy5zaWduYXR1cmUsXG4gICAgYWRkcmVzczogb3B0aW9ucy5hZGRyZXNzXG4gIH0pO1xuICBsZXQgaGVhZGVycztcbiAgaWYgKGNvbmZpZy5jdXN0b21IZWFkZXJzICYmIE9iamVjdC5rZXlzKGNvbmZpZy5jdXN0b21IZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVycyA9IHsgLi4uY29uZmlnLmN1c3RvbUhlYWRlcnMgfTtcbiAgfSBlbHNlIHtcbiAgICBoZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NvbmZpZy5waW5hdGFKd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgU291cmNlOiBcInNkay9hZGRTaWduYXR1cmVcIlxuICAgIH07XG4gIH1cbiAgbGV0IGVuZHBvaW50ID0gXCJodHRwczovL2FwaS5waW5hdGEuY2xvdWQvdjNcIjtcbiAgaWYgKGNvbmZpZy5lbmRwb2ludFVybCkge1xuICAgIGVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50VXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKFxuICAgICAgYCR7ZW5kcG9pbnR9L2ZpbGVzLyR7bmV0d29ya30vc2lnbmF0dXJlLyR7b3B0aW9ucy5jaWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogZGF0YVxuICAgICAgfVxuICAgICk7XG4gICAgaWYgKCFyZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAxIHx8IHJlcXVlc3Quc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvckRhdGF9YCxcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgICAgICBcIlVuYXV0aG9yaXplZCBzaWduaW5nLCB5b3UgbXVzdCBiZSB0aGUgb3JpZ2luYWwgb3duZXIgb2YgdGhlIGZpbGUgYW5kIGl0IG11c3Qgbm90IGhhdmUgYSBzaWduYXR1cmVcIixcbiAgICAgICAgICByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgZXJyb3I6ICR7ZXJyb3JEYXRhfWAsIHJlcXVlc3Quc3RhdHVzLCB7XG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgIGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUGluYXRhRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFBpbmF0YUVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGFkZFNpZ25hdHVyZTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYWRkaW5nIHNpZ25hdHVyZSB0byBDSURcIlxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb3JlL2Z1bmN0aW9ucy9zaWduYXR1cmVzL2dldFNpZ25hdHVyZS50c1xudmFyIGdldFNpZ25hdHVyZSA9IGFzeW5jIChjb25maWcsIGNpZCwgbmV0d29yaykgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJQaW5hdGEgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nXCIpO1xuICB9XG4gIGxldCBoZWFkZXJzO1xuICBpZiAoY29uZmlnLmN1c3RvbUhlYWRlcnMgJiYgT2JqZWN0LmtleXMoY29uZmlnLmN1c3RvbUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBoZWFkZXJzID0geyAuLi5jb25maWcuY3VzdG9tSGVhZGVycyB9O1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLnBpbmF0YUp3dH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBTb3VyY2U6IFwic2RrL2dldFNpZ25hdHVyZVwiXG4gICAgfTtcbiAgfVxuICBsZXQgZW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC92M1wiO1xuICBpZiAoY29uZmlnLmVuZHBvaW50VXJsKSB7XG4gICAgZW5kcG9pbnQgPSBjb25maWcuZW5kcG9pbnRVcmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goXG4gICAgICBgJHtlbmRwb2ludH0vZmlsZXMvJHtuZXR3b3JrfS9zaWduYXR1cmUvJHtjaWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICBoZWFkZXJzXG4gICAgICB9XG4gICAgKTtcbiAgICBpZiAoIXJlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDEgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihcbiAgICAgICAgICBgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2Vycm9yRGF0YX1gLFxuICAgICAgICAgIHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvckRhdGEsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RVcmw6IHJlcXVlc3QudXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCBlcnJvcjogJHtlcnJvckRhdGF9YCwgcmVxdWVzdC5zdGF0dXMsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgY29kZTogXCJIVFRQX0VSUk9SXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgZ2V0U2lnbmF0dXJlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBzaWduYXR1cmUgZm9yIENJRFwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvZnVuY3Rpb25zL3NpZ25hdHVyZXMvcmVtb3ZlU2lnbmF0dXJlLnRzXG52YXIgcmVtb3ZlU2lnbmF0dXJlID0gYXN5bmMgKGNvbmZpZywgY2lkLCBuZXR3b3JrKSA9PiB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlBpbmF0YSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmdcIik7XG4gIH1cbiAgbGV0IGhlYWRlcnM7XG4gIGlmIChjb25maWcuY3VzdG9tSGVhZGVycyAmJiBPYmplY3Qua2V5cyhjb25maWcuY3VzdG9tSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgIGhlYWRlcnMgPSB7IC4uLmNvbmZpZy5jdXN0b21IZWFkZXJzIH07XG4gIH0gZWxzZSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtjb25maWcucGluYXRhSnd0fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFNvdXJjZTogXCJzZGsvcmVtb3ZlU2lnbmF0dXJlXCJcbiAgICB9O1xuICB9XG4gIGxldCBlbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkucGluYXRhLmNsb3VkL3YzXCI7XG4gIGlmIChjb25maWcuZW5kcG9pbnRVcmwpIHtcbiAgICBlbmRwb2ludCA9IGNvbmZpZy5lbmRwb2ludFVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2VuZHBvaW50fS9maWxlcy8ke25ldHdvcmt9L3NpZ25hdHVyZS8ke2NpZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICghcmVxdWVzdC5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMSB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKFxuICAgICAgICAgIGBBdXRoZW50aWNhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JEYXRhfWAsXG4gICAgICAgICAgcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YSxcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9FUlJPUlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcmVxdWVzdFVybDogcmVxdWVzdC51cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQIGVycm9yOiAke2Vycm9yRGF0YX1gLCByZXF1ZXN0LnN0YXR1cywge1xuICAgICAgICBlcnJvcjogZXJyb3JEYXRhLFxuICAgICAgICBjb2RlOiBcIkhUVFBfRVJST1JcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICByZXF1ZXN0VXJsOiByZXF1ZXN0LnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFwiT0tcIjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQaW5hdGFFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgUGluYXRhRXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgYWRkU2lnbmF0dXJlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBQaW5hdGFFcnJvcihcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBhZGRpbmcgc2lnbmF0dXJlIHRvIENJRFwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvY2xhc3Nlcy9zaWduYXR1cmVzL1B1YmxpY1NpZ25hdHVyZXMudHNcbnZhciBQdWJsaWNTaWduYXR1cmVzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGZvcm1hdENvbmZpZyhjb25maWcpO1xuICB9XG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IG5ld0NvbmZpZztcbiAgfVxuICBhZGQob3B0aW9ucykge1xuICAgIHJldHVybiBhZGRTaWduYXR1cmUodGhpcy5jb25maWcsIG9wdGlvbnMsIFwicHVibGljXCIpO1xuICB9XG4gIGdldChjaWQpIHtcbiAgICByZXR1cm4gZ2V0U2lnbmF0dXJlKHRoaXMuY29uZmlnLCBjaWQsIFwicHVibGljXCIpO1xuICB9XG4gIGRlbGV0ZShjaWQpIHtcbiAgICByZXR1cm4gcmVtb3ZlU2lnbmF0dXJlKHRoaXMuY29uZmlnLCBjaWQsIFwicHVibGljXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jbGFzc2VzL3NpZ25hdHVyZXMvU2lnbmF0dXJlcy50c1xudmFyIFNpZ25hdHVyZXMgPSBjbGFzcyB7XG4gIC8vcHJpdmF0ZTogUHJpdmF0ZVNpZ25hdHVyZXNcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBmb3JtYXRDb25maWcoY29uZmlnKTtcbiAgICB0aGlzLnB1YmxpYyA9IG5ldyBQdWJsaWNTaWduYXR1cmVzKGNvbmZpZyk7XG4gIH1cbiAgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gbmV3Q29uZmlnO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9waW5hdGFTREsudHNcbnZhciBQaW5hdGFTREsgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gZm9ybWF0Q29uZmlnKGNvbmZpZyk7XG4gICAgdGhpcy5maWxlcyA9IG5ldyBGaWxlcyh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy51cGxvYWQgPSBuZXcgVXBsb2FkKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmdhdGV3YXlzID0gbmV3IEdhdGV3YXlzKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmtleXMgPSBuZXcgS2V5cyh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5ncm91cHMgPSBuZXcgR3JvdXBzKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3ModGhpcy5jb25maWcpO1xuICAgIHRoaXMuc2lnbmF0dXJlcyA9IG5ldyBTaWduYXR1cmVzKHRoaXMuY29uZmlnKTtcbiAgfVxuICBzZXROZXdIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IHsgcGluYXRhSnd0OiBcIlwiLCBjdXN0b21IZWFkZXJzOiB7fSB9O1xuICAgIH1cbiAgICB0aGlzLmNvbmZpZy5jdXN0b21IZWFkZXJzID0geyAuLi50aGlzLmNvbmZpZy5jdXN0b21IZWFkZXJzLCAuLi5oZWFkZXJzIH07XG4gICAgdGhpcy5maWxlcy51cGRhdGVDb25maWcodGhpcy5jb25maWcpO1xuICAgIHRoaXMudXBsb2FkLnVwZGF0ZUNvbmZpZyh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5nYXRld2F5cy51cGRhdGVDb25maWcodGhpcy5jb25maWcpO1xuICAgIHRoaXMua2V5cy51cGRhdGVDb25maWcodGhpcy5jb25maWcpO1xuICAgIHRoaXMuZ3JvdXBzLnVwZGF0ZUNvbmZpZyh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5hbmFseXRpY3MudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLnNpZ25hdHVyZXMudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnKTtcbiAgfVxuICBzZXROZXdKd3Qoand0KSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgdGhpcy5jb25maWcgPSB7IHBpbmF0YUp3dDogXCJcIiB9O1xuICAgIH1cbiAgICB0aGlzLmNvbmZpZy5waW5hdGFKd3QgPSBqd3Q7XG4gICAgdGhpcy5maWxlcy51cGRhdGVDb25maWcodGhpcy5jb25maWcpO1xuICAgIHRoaXMudXBsb2FkLnVwZGF0ZUNvbmZpZyh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5nYXRld2F5cy51cGRhdGVDb25maWcodGhpcy5jb25maWcpO1xuICAgIHRoaXMua2V5cy51cGRhdGVDb25maWcodGhpcy5jb25maWcpO1xuICAgIHRoaXMuZ3JvdXBzLnVwZGF0ZUNvbmZpZyh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5hbmFseXRpY3MudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLnNpZ25hdHVyZXMudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnKTtcbiAgfVxuICB0ZXN0QXV0aGVudGljYXRpb24oKSB7XG4gICAgcmV0dXJuIHRlc3RBdXRoZW50aWNhdGlvbih0aGlzLmNvbmZpZyk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IFBpbmF0YVNESywgYWRkVG9Hcm91cCwgYW5hbHl0aWNzRGF0ZUludGVydmFsLCBhbmFseXRpY3NUb3BVc2FnZSwgY29udmVydElQRlNVcmwsIGNyZWF0ZUFjY2Vzc0xpbmssIGNyZWF0ZUdyb3VwLCBjcmVhdGVLZXksIGNyZWF0ZVNpZ25lZFVwbG9hZFVSTCwgZGVsZXRlRmlsZSwgZGVsZXRlRmlsZVZlY3RvcnMsIGRlbGV0ZUdyb3VwLCBkZWxldGVQaW5SZXF1ZXN0LCBkZWxldGVTd2FwLCBnZXRDaWQsIGdldEdyb3VwLCBsaXN0RmlsZXMsIGxpc3RHcm91cHMsIGxpc3RLZXlzLCBwaW5uZWRGaWxlQ291bnQsIHF1ZXVlLCByZW1vdmVGcm9tR3JvdXAsIHJldm9rZUtleXMsIHN3YXBDaWQsIHN3YXBIaXN0b3J5LCB0ZXN0QXV0aGVudGljYXRpb24sIHRvdGFsU3RvcmFnZVVzYWdlLCB1cGRhdGVGaWxlLCB1cGRhdGVHcm91cCwgdXBsb2FkQmFzZTY0LCB1cGxvYWRDaWQsIHVwbG9hZEZpbGUsIHVwbG9hZEZpbGVBcnJheSwgdXBsb2FkSnNvbiwgdXBsb2FkVXJsLCB2ZWN0b3JpemVGaWxlLCB2ZWN0b3JpemVRdWVyeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/pinata/dist/index.mjs\n");

/***/ })

};
;